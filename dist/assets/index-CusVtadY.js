const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/seasons-data-table-D6aE9suz.js","assets/index-D98YVPTv.js","assets/index-6F8IYIcK.css","assets/alert-dialog-_LIJmeHR.js","assets/table-BdnF7bxe.js","assets/use-notifications-Djew7tEo.js","assets/skeleton-AhcMI11W.js","assets/sports-3zFtE_vW.js","assets/dropdown-menu-CaKzf2B7.js","assets/index-CjV1abNR.js","assets/IconDotsVertical-Biqaf3Ve.js","assets/IconEye-BrRV-lhS.js","assets/site-header-S87R6eOd.js","assets/IconEdit-Pc_T4rfh.js","assets/IconCopy-DrWOp0zE.js","assets/IconCategory-COs_SFzj.js","assets/constants-D_wQXR5Q.js","assets/IconHash-B8dhbANy.js","assets/IconChevronRight-rRzk-FN6.js","assets/IconCurrencyDollar-C0zN0sQF.js","assets/IconClock-BsHd5WaW.js","assets/IconSettings-DTdzrT03.js","assets/season-edit-modal-B3PUu7WG.js","assets/eye-CdBfYyUA.js","assets/IconDownload-Dvv14wbh.js","assets/IconChevronLeft-B7HgA5xr.js"])))=>i.map(i=>d[i]);
import{D as A,Z as c,u as E,k as _,l as S,j as s,B as V,r as N,_ as j}from"./index-D98YVPTv.js";import{S as U,e as I,f as R,b as C}from"./site-header-S87R6eOd.js";import{P as k}from"./page-header-B9qhubMt.js";import{S as u}from"./stats-card-DydNgz-G.js";import{S as M}from"./stats-grid-Dd4KG5eR.js";import{s as F}from"./season-schema-DVFNm_2a.js";import{z as D}from"./external-DCTon813.js";import{I as P}from"./IconStar-_hT0piPE.js";import{I as T}from"./IconDownload-Dvv14wbh.js";import"./use-notifications-Djew7tEo.js";import"./skeleton-AhcMI11W.js";import"./schemas-B5fuxOj7.js";import"./coerce-C-pLok-C.js";import"./compat-Blf4Bw1-.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M12 12m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M4 4l3 3",key:"svg-1"}],["path",{d:"M20 4l-3 3",key:"svg-2"}],["path",{d:"M4 20l3 -3",key:"svg-3"}],["path",{d:"M20 20l-3 -3",key:"svg-4"}]],$=A("outline","currency","Currency",z),B=N.lazy(()=>j(()=>import("./seasons-data-table-D6aE9suz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25])).then(p=>({default:p.SeasonsDataTable})));function ae(){const[p,g]=c.useState([]),[r,x]=c.useState(!0),[m,n]=c.useState(null),y=E(),o=c.useCallback(async()=>{var t,a;x(!0),n(null);try{const e=await _.get(S.season.getAll);let i=[];if(Array.isArray(e.data)?i=e.data:(t=e.data)!=null&&t.data&&Array.isArray(e.data.data)?i=e.data.data:(a=e.data)!=null&&a.seasons&&Array.isArray(e.data.seasons)&&(i=e.data.seasons),!i||i.length===0){g([]);return}const d=D.array(F).parse(i);g(d),n(null)}catch(e){console.error("Failed to fetch seasons:",e),e instanceof D.ZodError?(n("Invalid data format"),console.error("Validation errors:",e.issues)):e instanceof Error?e.message.includes("Network Error")?n("Network error"):e.message.includes("timeout")?n("Request timeout"):e.message.includes("401")||e.message.includes("403")?n("Access denied"):n("Failed to load"):n("Unexpected error"),g([])}finally{x(!1)}},[]);c.useEffect(()=>{o()},[o]);const b=t=>{y({to:"/seasons/$seasonId",params:{seasonId:t}})},l=p,f=l.length,v=l.filter(t=>t.status==="ACTIVE").length,h=l.reduce((t,a)=>{var e;return t+(((e=a.memberships)==null?void 0:e.length)||0)},0),w=l.reduce((t,a)=>{var d;const e=parseFloat((a==null?void 0:a.entryFee)||"0")||0,i=((d=a.memberships)==null?void 0:d.length)||0;return t+e*i},0),L=f>0?Math.round(h/f):0;return s.jsxDEV(s.Fragment,{children:[s.jsxDEV(U,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:86,columnNumber:7},this),s.jsxDEV("div",{className:"flex flex-1 flex-col",children:s.jsxDEV("div",{className:"@container/main flex flex-1 flex-col gap-2",children:[s.jsxDEV(k,{icon:I,title:"Seasons Management",description:"Manage league seasons and tournaments",actions:s.jsxDEV(s.Fragment,{children:s.jsxDEV(V,{variant:"outline",size:"sm",children:[s.jsxDEV(T,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:91,columnNumber:17},this),"Export"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:90,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:89,columnNumber:131},this),children:s.jsxDEV(M,{children:[s.jsxDEV(u,{title:"Total Seasons",value:f,description:`${v} currently active`,icon:R,iconColor:"text-primary",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:96,columnNumber:13},this),s.jsxDEV(u,{title:"Total Participants",value:h,description:"Across all seasons",icon:C,iconColor:"text-blue-500",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:97,columnNumber:13},this),s.jsxDEV(u,{title:"Total Revenue",value:`RM ${w.toLocaleString("en-MY",{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:"From all season entry fees",icon:$,iconColor:"text-green-500",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:98,columnNumber:13},this),s.jsxDEV(u,{title:"Average per Season",value:L,description:"Players per season",icon:P,iconColor:"text-yellow-500",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:102,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:95,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:89,columnNumber:11},this),s.jsxDEV("div",{className:"flex-1 px-4 lg:px-6 pb-6",children:s.jsxDEV(N.Suspense,{fallback:s.jsxDEV("div",{className:"h-96 animate-pulse bg-muted rounded-lg"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:107,columnNumber:31},this),children:s.jsxDEV(B,{data:l,isLoading:r,onViewSeason:b,onRefresh:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:108,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:107,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:106,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:88,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:87,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:85,columnNumber:10},this)}export{ae as component};
