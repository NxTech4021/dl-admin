import{r as m,j as e,C as c,e as u,f,g as w,b as d}from"./index-BkrdirJj.js";import{C as v,a as E,X as j,Y as A,b as V,c as M}from"./chart-C62sWv_H.js";import{S as a}from"./skeleton-DlnWNXWc.js";import{R as k}from"./use-queries-m7g6rbxN.js";import{L as C,a as x}from"./LineChart-zdSv-frf.js";import"./external-CBw6adHz.js";import"./coerce-D7_fDuSg.js";import"./league-schema-BPwUAuXp.js";import"./season-schema-B9VBdruD.js";import"./division-schema-C1GhWsht.js";const D=4.3,b={users:{label:"User Growth"},totalUsers:{label:"Total Users",color:"var(--chart-user-total)"},payingMembers:{label:"Paying Members",color:"var(--chart-user-paying)"}};function S(){return e.jsxDEV(c,{className:"h-full flex flex-col border border-border",children:[e.jsxDEV(u,{className:"pb-0 pt-2 px-5 shrink-0",children:[e.jsxDEV(a,{className:"h-5 w-32 mb-1"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:48,columnNumber:9},this),e.jsxDEV(a,{className:"h-3 w-48"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:49,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:47,columnNumber:7},this),e.jsxDEV(d,{className:"flex-1 flex flex-col pt-4 px-5 pb-5 min-h-0",children:[e.jsxDEV("div",{className:"flex items-center gap-6 mb-5",children:[e.jsxDEV(a,{className:"h-4 w-24"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:53,columnNumber:11},this),e.jsxDEV(a,{className:"h-4 w-24"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:54,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:52,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 min-h-[280px]",children:e.jsxDEV(a,{className:"h-full w-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:57,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:56,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:51,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:46,columnNumber:5},this)}function O({chartRange:o="monthly",historyRange:h=3}){const{data:i,isLoading:p,error:L}=k(h),y=s=>{if(s.includes("Week")||s.includes("This Week")||["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].includes(s))return s;try{return new Date(s+"-01").toLocaleDateString("en-US",{month:"short"})}catch{return s}},n=m.useMemo(()=>i?o==="average"?i.map((s,t)=>({...s,totalUsers:Math.round(s.totalUsers/D),payingMembers:Math.round(s.payingMembers/D),month:`Week ${t+1}`})):i:[],[o,i]),g=m.useMemo(()=>{var s,t;return{totalUsers:((s=n[n.length-1])==null?void 0:s.totalUsers)??0,payingMembers:((t=n[n.length-1])==null?void 0:t.payingMembers)??0}},[n]),U=m.useCallback(()=>{if(!n||n.length===0)return[0,100];const s=n.flatMap(N=>[N.totalUsers,N.payingMembers]),t=Math.max(...s);if(!isFinite(t)||t<=0)return[0,100];const r=t*1.1;let l;return r<=10?l=Math.ceil(r/2)*2:r<=50?l=Math.ceil(r/10)*10:r<=200?l=Math.ceil(r/25)*25:r<=1e3?l=Math.ceil(r/100)*100:l=Math.ceil(r/500)*500,[0,l]},[n]);return p?e.jsxDEV(S,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:136,columnNumber:12},this):L||!i||i.length===0?e.jsxDEV(c,{className:"h-full flex flex-col border border-border",children:[e.jsxDEV(u,{className:"pb-0 pt-2 px-5 shrink-0",children:[e.jsxDEV(f,{className:"text-base font-medium",children:"User Growth"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:143,columnNumber:11},this),e.jsxDEV(w,{className:"text-xs",children:"No data available"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:144,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:142,columnNumber:9},this),e.jsxDEV(d,{className:"flex-1 flex items-center justify-center px-5 min-h-0",children:e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"No user growth data available"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:147,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:146,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:141,columnNumber:7},this):e.jsxDEV(c,{className:"h-full flex flex-col border border-border",children:[e.jsxDEV(u,{className:"pb-4 pt-2 px-5 shrink-0",children:e.jsxDEV("div",{className:"flex items-start justify-between gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(f,{className:"text-base font-medium",children:"User Growth"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:160,columnNumber:13},this),e.jsxDEV(w,{className:"text-xs",children:[o==="average"?"Weekly average":"Monthly"," for past ",h,"mo"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:161,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:159,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-1.5",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-[var(--chart-user-total)]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:167,columnNumber:15},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Total"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:168,columnNumber:15},this),e.jsxDEV("span",{className:"text-sm font-medium tabular-nums",children:g.totalUsers.toLocaleString()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:169,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:166,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-1.5",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-[var(--chart-user-paying)]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:172,columnNumber:15},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Paying"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:173,columnNumber:15},this),e.jsxDEV("span",{className:"text-sm font-medium tabular-nums",children:g.payingMembers.toLocaleString()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:174,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:171,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:165,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:158,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:157,columnNumber:7},this),e.jsxDEV(d,{className:"flex-1 flex flex-col px-5 pb-5 min-h-0",children:e.jsxDEV("div",{className:"flex-1 min-h-[280px]",children:e.jsxDEV(v,{config:b,className:"h-full w-full",children:e.jsxDEV(C,{accessibilityLayer:!0,data:n,margin:{left:10,right:10,top:10,bottom:25},children:[e.jsxDEV(E,{vertical:!1,strokeDasharray:"3 3",stroke:"var(--border)",strokeOpacity:.5},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:190,columnNumber:15},this),e.jsxDEV(j,{dataKey:"month",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32,tickFormatter:y,tick:{fontSize:11},label:{value:"Month",position:"bottom",offset:10,style:{fontSize:11,fill:"hsl(var(--muted-foreground))"}}},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:196,columnNumber:15},this),e.jsxDEV(A,{tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:s=>s>=1e3?`${(s/1e3).toFixed(0)}k`:s.toString(),domain:U(),tick:{fontSize:11},width:45,label:{value:"Users",angle:-90,position:"insideLeft",offset:0,style:{fontSize:11,fill:"hsl(var(--muted-foreground))",textAnchor:"middle"}}},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:211,columnNumber:15},this),e.jsxDEV(V,{content:e.jsxDEV(M,{className:"w-[160px]",labelFormatter:s=>{if(s.includes("Week")||s.includes("This Week")||["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].includes(s))return s;try{return new Date(s+"-01").toLocaleDateString("en-US",{month:"short",year:"numeric"})}catch{return s}},formatter:(s,t)=>{const r=b[t],l="color"in r?r.color:"#374F35";return[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:l}},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:255,columnNumber:27},this),e.jsxDEV("span",{className:"text-sm font-medium tabular-nums",children:new Intl.NumberFormat().format(s)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:259,columnNumber:27},this)]},t,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:254,columnNumber:25},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:(r==null?void 0:r.label)||t},`${t}-label`,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:263,columnNumber:25},this)]}},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:232,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:230,columnNumber:15},this),e.jsxDEV(x,{dataKey:"totalUsers",type:"monotone",stroke:"var(--color-totalUsers)",strokeWidth:1.5,dot:!1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:271,columnNumber:15},this),e.jsxDEV(x,{dataKey:"payingMembers",type:"monotone",stroke:"var(--color-payingMembers)",strokeWidth:1.5,dot:!1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:278,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:185,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:184,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:183,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:180,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:156,columnNumber:5},this)}export{O as UserGrowthChart};
