const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/emoji-picker-react.esm-BFnJUxpy.js","assets/index-D4sRxPGx.js","assets/index-prMvOnec.css"])))=>i.map(i=>d[i]);
import{c as Z,ak as ls,al as is,am as cs,an as Ae,ao as Ue,ap as Ee,aq as je,ar as Ve,as as Oe,at as ze,r as l,aa as X,j as e,au as ge,av as fe,J as ms,aw as xe,a2 as rs,a3 as os,a4 as us,a5 as ds,a6 as hs,d as k,a as ne,u as me,k as q,l as W,t as I,N as De,P as be,Q as Fe,R as Ge,M as se,V as Ns,S as Pe,I as He,B as T,L as Be,U as pe,ax as ce,ay as Ke,W as gs,az as fs,aA as Ye,$ as xs,aB as Ds,x as Ce,o as qe,aC as bs}from"./index-D4sRxPGx.js";import{T as Se,a as ke,b as Me,c as Te,u as we,S as We,d as Qe,e as ps,f as ws}from"./socket-context-Coy4MzG8.js";import{c as Ls,g as ys,a as Le,M as vs,i as As,u as Ze,P as Us,b as Es,d as js,L as Vs,S as Cs,m as E,e as re,f as Ss}from"./scroll-area-TJOFpdqX.js";import{A as O,a as z,b as F}from"./avatar-CM3gLKyZ.js";import{S as Q}from"./skeleton-U6SvGEVv.js";import{A as ks,a as Ms,b as Ts,c as _s,d as Rs,e as Is,f as $s,g as Os}from"./alert-dialog-CZfdvu04.js";import{T as ue,U as zs}from"./user-DF_iwxJM.js";import{s as Fs}from"./subDays-GFctCICB.js";import{P as de}from"./index-0inBHODM.js";import{M as Xe}from"./mail-BtKq1DmZ.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ps=Z("ellipsis",Gs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],_e=Z("message-square-plus",Hs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Je=Z("phone",Bs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Ys=Z("reply",Ks);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],es=Z("smile",qs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Qs=Z("square-pen",Ws);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Xs=Z("video",Zs);function Js(s,a,n){const i=ls(),t=(n==null?void 0:n.locale)??i.locale??is,c=Ls(s,a);if(isNaN(c))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:c}),[d,x]=cs(n==null?void 0:n.in,...c>0?[a,s]:[s,a]),g=ys((n==null?void 0:n.roundingMethod)??"round"),N=x.getTime()-d.getTime(),h=N/Ve,u=Ae(x)-Ae(d),m=(N-u)/Ve,r=n==null?void 0:n.unit;let f;if(r?f=r:h<1?f="second":h<60?f="minute":h<Ue?f="hour":m<Ee?f="day":m<je?f="month":f="year",f==="second"){const D=g(N/1e3);return t.formatDistance("xSeconds",D,o)}else if(f==="minute"){const D=g(h);return t.formatDistance("xMinutes",D,o)}else if(f==="hour"){const D=g(h/60);return t.formatDistance("xHours",D,o)}else if(f==="day"){const D=g(m/Ue);return t.formatDistance("xDays",D,o)}else if(f==="month"){const D=g(m/Ee);return D===12&&r!=="month"?t.formatDistance("xYears",1,o):t.formatDistance("xMonths",D,o)}else{const D=g(m/je);return t.formatDistance("xYears",D,o)}}function ss(s,a){return Js(s,Le(s),a)}function ea(s,a){return Oe(ze(s,s),Le(s))}function sa(s,a){return Oe(ze(s,s),Fs(Le(s),1))}function Re(s,a){if(typeof s=="function")return s(a);s!=null&&(s.current=a)}function aa(...s){return a=>{let n=!1;const i=s.map(t=>{const c=Re(t,a);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let t=0;t<i.length;t++){const c=i[t];typeof c=="function"?c():Re(s[t],null)}}}}function na(...s){return l.useCallback(aa(...s),s)}class ta extends l.Component{getSnapshotBeforeUpdate(a){const n=this.props.childRef.current;if(n&&a.isPresent&&!this.props.isPresent){const i=n.offsetParent,t=As(i)&&i.offsetWidth||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=t-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function la({children:s,isPresent:a,anchorX:n,root:i}){const t=l.useId(),c=l.useRef(null),o=l.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=l.useContext(vs),x=na(c,s==null?void 0:s.ref);return l.useInsertionEffect(()=>{const{width:g,height:N,top:h,left:u,right:m}=o.current;if(a||!c.current||!g||!N)return;const r=n==="left"?`left: ${u}`:`right: ${m}`;c.current.dataset.motionPopId=t;const f=document.createElement("style");d&&(f.nonce=d);const D=i??document.head;return D.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${N}px !important;
            ${r}px !important;
            top: ${h}px !important;
          }
        `),()=>{D.contains(f)&&D.removeChild(f)}},[a]),X.jsx(ta,{isPresent:a,childRef:c,sizeRef:o,children:l.cloneElement(s,{ref:x})})}const ia=({children:s,initial:a,isPresent:n,onExitComplete:i,custom:t,presenceAffectsLayout:c,mode:o,anchorX:d,root:x})=>{const g=Ze(ca),N=l.useId();let h=!0,u=l.useMemo(()=>(h=!1,{id:N,initial:a,isPresent:n,custom:t,onExitComplete:m=>{g.set(m,!0);for(const r of g.values())if(!r)return;i&&i()},register:m=>(g.set(m,!1),()=>g.delete(m))}),[n,g,i]);return c&&h&&(u={...u}),l.useMemo(()=>{g.forEach((m,r)=>g.set(r,!1))},[n]),l.useEffect(()=>{!n&&!g.size&&i&&i()},[n]),o==="popLayout"&&(s=X.jsx(la,{isPresent:n,anchorX:d,root:x,children:s})),X.jsx(Us.Provider,{value:u,children:s})};function ca(){return new Map}const le=s=>s.key||"";function Ie(s){const a=[];return l.Children.forEach(s,n=>{l.isValidElement(n)&&a.push(n)}),a}const P=({children:s,custom:a,initial:n=!0,onExitComplete:i,presenceAffectsLayout:t=!0,mode:c="sync",propagate:o=!1,anchorX:d="left",root:x})=>{const[g,N]=Es(o),h=l.useMemo(()=>Ie(s),[s]),u=o&&!g?[]:h.map(le),m=l.useRef(!0),r=l.useRef(h),f=Ze(()=>new Map),[D,b]=l.useState(h),[w,A]=l.useState(h);js(()=>{m.current=!1,r.current=h;for(let y=0;y<w.length;y++){const v=le(w[y]);u.includes(v)?f.delete(v):f.get(v)!==!0&&f.set(v,!1)}},[w,u.length,u.join("-")]);const p=[];if(h!==D){let y=[...h];for(let v=0;v<w.length;v++){const V=w[v],L=le(V);u.includes(L)||(y.splice(v,0,V),p.push(V))}return c==="wait"&&p.length&&(y=p),A(Ie(y)),b(h),null}c==="wait"&&w.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:C}=l.useContext(Vs);return X.jsx(X.Fragment,{children:w.map(y=>{const v=le(y),V=o&&!g?!1:h===w||u.includes(v),L=()=>{if(f.has(v))f.set(v,!0);else return;let j=!0;f.forEach(_=>{_||(j=!1)}),j&&(C==null||C(),A(r.current),o&&(N==null||N()),i&&i())};return X.jsx(ia,{isPresent:V,initial:!m.current||n?void 0:!1,custom:a,presenceAffectsLayout:t,mode:c,root:x,onExitComplete:V?void 0:L,anchorX:d,children:y},v)})})},ma=["online","away","busy","offline"],$e={background:{online:"bg-green-500",away:"bg-yellow-500",busy:"bg-red-500",offline:"bg-gray-500"},text:{online:"text-green-600",away:"text-yellow-600",busy:"text-red-600",offline:"text-gray-600"},border:{online:"border-green-500",away:"border-yellow-500",busy:"border-red-500",offline:"border-gray-500"},ring:{online:"ring-green-500",away:"ring-yellow-500",busy:"ring-red-500",offline:"ring-gray-500"}},he={AVATAR_SIZES:{MEDIUM:"w-10 h-10",LARGE:"w-12 h-12"}},Y=(s,a="background")=>$e[a][s]||$e[a].offline,ie=s=>s.charAt(0).toUpperCase()+s.slice(1),Ne={FADE_IN:"animate-in fade-in-0 duration-200",PULSE:"animate-pulse"},ae={USER_STATUS:"online",AVATAR_FALLBACK:"?",UNKNOWN_USER:"Unknown User",EMPTY_MESSAGES:"No messages yet"};function ra({user:s,onStatusChange:a,onSettingsClick:n,onLogoutClick:i,collapsed:t=!1}){const[c,o]=l.useState(ae.USER_STATUS),[d,x]=l.useState(!1),g=(s==null?void 0:s.name)||(s==null?void 0:s.displayName)||ae.UNKNOWN_USER,N=(s==null?void 0:s.email)||"",h=(s==null?void 0:s.image)||(s==null?void 0:s.photoURL)||"",u=g.charAt(0).toUpperCase()||ae.AVATAR_FALLBACK,m=l.useCallback(r=>{o(r),a==null||a(r),console.log("User status changed to:",r)},[a]);return l.useCallback(()=>{x(!1),n==null||n()},[n]),l.useCallback(()=>{x(!1),i==null||i()},[i]),t?e.jsxDEV(Se,{children:e.jsxDEV(ke,{children:[e.jsxDEV(Me,{asChild:!0,children:e.jsxDEV("div",{className:"flex justify-center p-3",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(O,{className:he.AVATAR_SIZES.MEDIUM,children:[e.jsxDEV(z,{src:h,alt:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:70,columnNumber:19},this),e.jsxDEV(F,{className:"text-sm font-medium",children:u},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:71,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:69,columnNumber:17},this),e.jsxDEV("span",{className:`absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full border-2 border-background ${Y(c)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:76,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:68,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:67,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:66,columnNumber:11},this),e.jsxDEV(Te,{side:"right",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"font-medium",children:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:84,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground capitalize",children:ie(c)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:85,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:83,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:82,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:65,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:64,columnNumber:7},this):e.jsxDEV(ge,{open:d,onOpenChange:x,children:[e.jsxDEV(Se,{children:e.jsxDEV(ke,{children:[e.jsxDEV(Me,{asChild:!0,children:e.jsxDEV(fe,{asChild:!0,children:e.jsxDEV("div",{className:`flex items-center gap-3 p-3 cursor-pointer hover:bg-muted/50 rounded-lg transition-colors ${Ne.FADE_IN}`,children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(O,{className:he.AVATAR_SIZES.MEDIUM,children:[e.jsxDEV(z,{src:h,alt:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:106,columnNumber:21},this),e.jsxDEV(F,{className:"text-sm font-medium",children:u},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:107,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:105,columnNumber:19},this),e.jsxDEV("span",{className:`absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full border-2 border-background ${Y(c)} ${c==="online"?Ne.PULSE:""}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:112,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:104,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"font-medium text-sm truncate",children:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:119,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2 mt-1",children:e.jsxDEV(ms,{variant:"outline",className:`text-xs px-2 py-0.5 ${Y(c,"text")} border-current`,children:ie(c)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:123,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:122,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:118,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:102,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:101,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:100,columnNumber:11},this),e.jsxDEV(Te,{children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:136,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:N},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:137,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:135,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:134,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:99,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:98,columnNumber:7},this),e.jsxDEV(xe,{className:`w-80 p-0 ${Ne.FADE_IN}`,align:"start",children:[e.jsxDEV("div",{className:"flex items-center gap-3 p-4 bg-muted/50",children:[e.jsxDEV(O,{className:he.AVATAR_SIZES.LARGE,children:[e.jsxDEV(z,{src:h,alt:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:147,columnNumber:13},this),e.jsxDEV(F,{className:"text-lg font-medium",children:u},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:148,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:146,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"font-semibold text-base truncate",children:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:153,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground truncate",children:N},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:154,columnNumber:13},this),(s==null?void 0:s.username)&&e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["@",s.username]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:156,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:152,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:145,columnNumber:9},this),e.jsxDEV(Cs,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:161,columnNumber:9},this),e.jsxDEV("div",{className:"p-4 space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Status"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:166,columnNumber:13},this),e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${Y(c)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:167,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:165,columnNumber:11},this),e.jsxDEV(rs,{value:c,onValueChange:m,children:[e.jsxDEV(os,{className:"w-full",children:e.jsxDEV(us,{children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${Y(c)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:176,columnNumber:19},this),e.jsxDEV("span",{className:"capitalize",children:ie(c)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:179,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:175,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:174,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:173,columnNumber:13},this),e.jsxDEV(ds,{children:ma.map(r=>e.jsxDEV(hs,{value:r,children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${Y(r)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:187,columnNumber:21},this),e.jsxDEV("span",{className:"capitalize",children:ie(r)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:190,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:186,columnNumber:19},this)},r,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:185,columnNumber:17},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:172,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:164,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:143,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:97,columnNumber:5},this)}const oa=({className:s,...a})=>e.jsxDEV("div",{className:k("flex flex-row items-center space-x-2 px-2.5 py-1.5",s),...a,children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:12,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex flex-col flex-grow space-y-1",children:[e.jsxDEV("div",{className:"w-[75%] h-2 rounded bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:16,columnNumber:9},void 0),e.jsxDEV("div",{className:"w-[50%] h-2 rounded bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:17,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:15,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:7,columnNumber:5},void 0),ua=(s,a)=>{const[n,i]=l.useState(!1);return l.useEffect(()=>{const t=window.matchMedia("(min-width: 768px)"),c=o=>i(o.matches);return t.addEventListener("change",c),c(t),()=>t.removeEventListener("change",c)},[]),n},da=(s,a=6)=>{if(!s)return"";const n=s.trim().split(/\s+/);return n.length<=a?s:n.slice(0,a).join(" ")+"..."},ha=({conversation:s,currentUserId:a})=>{var g,N,h,u,m,r;const n=(s==null?void 0:s.type)==="group",i=n?(s==null?void 0:s.participants)||[]:((g=s==null?void 0:s.participants)==null?void 0:g.filter(f=>f.id!==a))||[],t=n?(s==null?void 0:s.displayName)||(s==null?void 0:s.name)||"Group Chat":((N=i[0])==null?void 0:N.name)||((h=i[0])==null?void 0:h.displayName)||ae.UNKNOWN_USER,c=((u=s==null?void 0:s.lastMessage)==null?void 0:u.content)||"",o=da(c,6),d=(m=s==null?void 0:s.lastMessage)==null?void 0:m.createdAt,x=n&&((r=s==null?void 0:s.participants)==null?void 0:r.some(f=>f.status==="online"));return{group:n,displayName:t,displayText:o,participants:i,lastActivity:d,hasOnlineInGroup:x}},Na={dashboard:{chat:"/chat"}},ga=s=>s.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2),fa=s=>{const a=s.trim().split(" ");return a.length===1?a[0].slice(0,2).toUpperCase():a.slice(0,2).map(n=>n.charAt(0)).join("").toUpperCase()},xa=({selected:s,conversation:a,onCloseMobile:n})=>{const{data:i}=ne(),t=i==null?void 0:i.user,c=me(),o=ua(),{group:d,displayName:x,displayText:g,participants:N,lastActivity:h,hasOnlineInGroup:u}=ha({conversation:a,currentUserId:t==null?void 0:t.id}),m=N[0],{name:r,photoURL:f,status:D}=m||{},b=l.useCallback(async()=>{try{!o&&n&&n(),c({to:`${Na.dashboard.chat}?id=${a.id}`})}catch(p){console.error(p)}},[a.id,o,n,c]),w=e.jsxDEV("div",{className:"relative flex-shrink-0",children:[e.jsxDEV(O,{className:"h-12 w-12",children:[e.jsxDEV(z,{src:a.avatarUrl||a.photoURL,alt:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:146,columnNumber:9},void 0),e.jsxDEV(F,{className:"text-sm bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:fa(x)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:150,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:145,columnNumber:7},void 0),u&&e.jsxDEV("span",{className:"absolute bottom-0.5 right-0.5 h-3 w-3 rounded-full bg-green-500 ring-2 ring-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:155,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:144,columnNumber:5},void 0),A=e.jsxDEV("div",{className:"relative flex-shrink-0",children:[e.jsxDEV(O,{className:"h-12 w-12",children:[e.jsxDEV(z,{src:f||(m==null?void 0:m.photoURL),alt:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:163,columnNumber:9},void 0),e.jsxDEV(F,{className:"text-sm bg-muted font-medium",children:ga(x)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:167,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:162,columnNumber:7},void 0),D==="online"&&e.jsxDEV("span",{className:"absolute bottom-0.5 right-0.5 h-3 w-3 rounded-full bg-green-500 ring-2 ring-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:172,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:161,columnNumber:5},void 0);return e.jsxDEV(E.div,{onClick:b,whileTap:{scale:.98},transition:{duration:.1},className:k("flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors",s?"bg-muted":"hover:bg-muted/50"),children:[d?w:A,e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"font-semibold text-[15px] truncate",children:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:193,columnNumber:11},void 0),e.jsxDEV("span",{className:"text-xs text-muted-foreground/70 flex-shrink-0 ml-2",children:h?ss(new Date(h),{addSuffix:!1}):""},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:196,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:192,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-0.5",children:[e.jsxDEV("span",{className:"text-sm text-muted-foreground truncate",children:g||ae.EMPTY_MESSAGES},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:205,columnNumber:11},void 0),e.jsxDEV(P,{children:a.unreadCount>0&&e.jsxDEV(E.span,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},transition:{type:"spring",stiffness:500,damping:25},className:"h-5 min-w-5 px-1.5 rounded-full bg-brand-light text-white text-xs font-medium flex items-center justify-center flex-shrink-0 ml-2",children:a.unreadCount>99?"99+":a.unreadCount},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:210,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:204,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:191,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:178,columnNumber:5},void 0)};function Da(s){const[a,n]=l.useState([]),[i,t]=l.useState(!0),[c,o]=l.useState(null),{socket:d,isConnected:x}=we(),g=l.useCallback(async()=>{var N,h,u,m;if(!s){t(!1);return}try{t(!0),o(null);const r=await q.get(W.chat.getThreads(s));r.data?r.data.success&&r.data.data?n(r.data.data):Array.isArray(r.data)?n(r.data):r.data.threads&&Array.isArray(r.data.threads)?n(r.data.threads):n([]):n([])}catch(r){console.error("Error fetching threads:",r);const f=((h=(N=r.response)==null?void 0:N.data)==null?void 0:h.message)||((m=(u=r.response)==null?void 0:u.data)==null?void 0:m.error)||r.message||"Failed to fetch threads";o(f),I.error("Failed to load chat threads"),n([])}finally{t(!1)}},[s]);return l.useEffect(()=>{if(!d||!x)return;const N=u=>{n(m=>[u.thread,...m]),I.success("New conversation started!")},h=u=>{n(m=>m.map(r=>r.id===u.threadId?{...r,messages:[u.lastMessage],updatedAt:new Date().toISOString()}:r))};return d.on("new_thread",N),d.on("thread_updated",h),()=>{d.off("new_thread",N),d.off("thread_updated",h)}},[d,x]),l.useEffect(()=>{g()},[g]),{threads:a,loading:i,error:c,refetch:g}}function ba(s){const[a,n]=l.useState([]),[i,t]=l.useState(!1),[c,o]=l.useState(null),{socket:d,isConnected:x,joinThread:g,leaveThread:N}=we(),h=l.useRef(null),u=l.useCallback(async()=>{var D,b,w,A;if(!s){n([]);return}try{t(!0),o(null);const p=await q.get(W.chat.getMessages(s));p.data?p.data.success&&p.data.data?n(Array.isArray(p.data.data)?p.data.data:[]):Array.isArray(p.data)?n(p.data):p.data.messages&&Array.isArray(p.data.messages)?n(p.data.messages):n([]):n([])}catch(p){console.error("Error fetching messages:",p);const C=((b=(D=p.response)==null?void 0:D.data)==null?void 0:b.message)||((A=(w=p.response)==null?void 0:w.data)==null?void 0:A.error)||p.message||"Failed to fetch messages";o(C),n([])}finally{t(!1)}},[s]),m=l.useCallback(async(D,b,w)=>{var A,p,C,y;if(s)try{const v={senderId:b,content:D};w&&(v.repliesToId=w);const V=await q.post(W.chat.sendMessage(s),v);let L=null;if(V.data&&(V.data.success&&V.data.data?L=V.data.data:V.data.message?L=V.data.message:V.data.id&&(L=V.data)),L)return L}catch(v){console.error("Error sending message:",v);const V=((p=(A=v.response)==null?void 0:A.data)==null?void 0:p.message)||((y=(C=v.response)==null?void 0:C.data)==null?void 0:y.error)||v.message||"Failed to send message";throw I.error(V),v}},[s]),r=l.useCallback(async D=>{var w,A,p,C;if(!s)return;const b=[...a];try{return n(y=>y.map(v=>v.id===D?{...v,isDeleted:!0,deletedAt:new Date().toISOString(),content:"This message has been deleted"}:v)),await q.delete(W.chat.deleteMessage(D)),I.success("Message deleted successfully"),!0}catch(y){n(b);const v=((A=(w=y.response)==null?void 0:w.data)==null?void 0:A.message)||((C=(p=y.response)==null?void 0:p.data)==null?void 0:C.error)||y.message||"Failed to delete message";throw I.error(v),y}},[s,a]);l.useEffect(()=>{if(!d||!x)return;const D=p=>{p.threadId===s&&n(C=>[...C,p])},b=p=>{p.threadId===s&&n(C=>C.map(y=>y.id===p.messageId?{...y,isDeleted:!0,deletedAt:new Date().toISOString(),content:"This message has been deleted"}:y))},w=p=>{},A=p=>{p.threadId===s&&n(C=>C.map(y=>y.id===p.messageId?{...y,readBy:[...y.readBy||[],{id:`${p.messageId}-${p.readerId}`,userId:p.readerId,messageId:p.messageId,readAt:new Date().toISOString(),user:{id:p.readerId,name:p.readerName}}]}:y))};return d.on("new_message",D),d.on("message_deleted",b),d.on("message_sent",w),d.on("message_read",A),()=>{d.off("new_message",D),d.off("message_deleted",b),d.off("message_sent",w),d.off("message_read",A)}},[d,x,s]),l.useEffect(()=>{if(!(!s||!x))return h.current&&h.current!==s&&N(h.current),g(s),h.current=s,()=>{s&&(N(s),h.current=null)}},[s,x,g,N]);const f=l.useCallback(async D=>{try{await q.post(W.chat.markAsRead(D))}catch{}},[]);return l.useEffect(()=>{u()},[u]),{messages:a,loading:i,error:c,sendMessage:m,deleteMessage:r,markAsRead:f,refetch:u}}function as(s){const[a,n]=l.useState([]),{socket:i,isConnected:t,sendTyping:c}=we(),{data:o}=ne(),d=o==null?void 0:o.user,x=l.useRef(void 0);l.useEffect(()=>()=>{x.current&&(clearTimeout(x.current),x.current=void 0),n([])},[s]),l.useEffect(()=>{if(!i||!t||!s)return;const N=h=>{h.threadId===s&&h.senderId!==(d==null?void 0:d.id)&&n(u=>h.isTyping?u.some(r=>r.userId===h.senderId)?u:[...u,{userId:h.senderId,userName:"Someone"}]:u.filter(m=>m.userId!==h.senderId))};return i.on("typing_status",N),()=>{i.off("typing_status",N)}},[i,t,s,d==null?void 0:d.id]);const g=l.useCallback(N=>{s&&(c(s,N),N?(x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{c(s,!1)},3e3)):x.current&&(clearTimeout(x.current),x.current=void 0))},[s,c]);return{typingUsers:a,setTyping:g}}function pa(){const[s,a]=l.useState(!1),[n,i]=l.useState(null);return{createThread:l.useCallback(async c=>{var o,d,x,g;try{a(!0),i(null);const N=await q.post(W.chat.createThread,c);if(N.data){let h=null;if(N.data.success&&N.data.data?h=N.data.data:N.data.thread?h=N.data.thread:N.data.id&&(h=N.data),h)return I.success("Thread created successfully"),h}throw new Error("Failed to create thread")}catch(N){console.error("Error creating thread:",N);const h=((d=(o=N.response)==null?void 0:o.data)==null?void 0:d.message)||((g=(x=N.response)==null?void 0:x.data)==null?void 0:g.error)||N.message||"Failed to create thread";throw i(h),I.error(h),N}finally{a(!1)}},[]),loading:s,error:n}}function wa(s){const[a,n]=l.useState([]),[i,t]=l.useState(!1),[c,o]=l.useState(null),d=l.useCallback(async()=>{var x,g,N,h;if(!s){n([]);return}try{t(!0),o(null);const u=await q.get(W.chat.getAvailableUsers(s));let m=[];u.data&&(u.data.success&&u.data.data?m=u.data.data:Array.isArray(u.data)?m=u.data:u.data.users&&Array.isArray(u.data.users)&&(m=u.data.users));const r=m.filter(f=>f.id!==s);n(r)}catch(u){console.error("Error fetching available users:",u);const m=((g=(x=u.response)==null?void 0:x.data)==null?void 0:g.message)||((h=(N=u.response)==null?void 0:N.data)==null?void 0:h.error)||u.message||"Failed to fetch users";o(m),n([])}finally{t(!1)}},[s]);return l.useEffect(()=>{d()},[d]),{users:a,loading:i,error:c,refetch:d}}const La=()=>e.jsxDEV("div",{className:"flex items-center gap-3 p-2",children:[e.jsxDEV(Q,{className:"h-10 w-10 rounded-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:30,columnNumber:5},void 0),e.jsxDEV("div",{className:"flex-1 space-y-1",children:[e.jsxDEV(Q,{className:"h-4 w-32"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:32,columnNumber:7},void 0),e.jsxDEV(Q,{className:"h-3 w-24"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:33,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:31,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:29,columnNumber:3},void 0);function ya({open:s,onOpenChange:a,currentUserId:n,onThreadCreated:i}){const t=me(),[c,o]=l.useState(""),[d,x]=l.useState(null),{users:g,loading:N,error:h,refetch:u}=wa(n),{createThread:m}=pa(),r=l.useMemo(()=>{if(!c.trim())return g;const b=c.toLowerCase();return g.filter(w=>{var A,p;return w.name.toLowerCase().includes(b)||((A=w.username)==null?void 0:A.toLowerCase().includes(b))||((p=w.email)==null?void 0:p.toLowerCase().includes(b))})},[g,c]),f=async b=>{if(!(!n||d))try{x(b.id);const w={name:void 0,isGroup:!1,userIds:[n,b.id],createdBy:n},A=await m(w);A&&(await(i==null?void 0:i()),x(null),a(!1),o(""),t({to:"/chat",search:{id:A.id}}),I.success(`Chat with ${b.name} started!`))}catch{I.error("Failed to start chat. Please try again."),x(null)}},D=()=>{d||(a(!1),o(""))};return e.jsxDEV(De,{open:s,onOpenChange:D,children:e.jsxDEV(be,{className:"max-w-md h-[500px] flex flex-col p-0",children:[e.jsxDEV(Fe,{className:"px-6 pt-6 pb-4",children:[e.jsxDEV(Ge,{className:"flex items-center gap-2",children:[e.jsxDEV(se,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:111,columnNumber:13},this),"Start New Chat"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:110,columnNumber:11},this),e.jsxDEV(Ns,{children:"Click on a user to start chatting"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:114,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:109,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 space-y-4 flex-1 flex flex-col overflow-hidden",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Pe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:122,columnNumber:13},this),e.jsxDEV(He,{placeholder:"Search users...",value:c,onChange:b=>o(b.target.value),className:"pl-9",disabled:!!d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:123,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:121,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV(re,{className:"h-full",children:N?e.jsxDEV("div",{className:"space-y-2",children:Array.from({length:5}).map((b,w)=>e.jsxDEV(La,{},w,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:138,columnNumber:21},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:136,columnNumber:17},this):h?e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV("div",{className:"text-4xl mb-2",children:"âš ï¸"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:143,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm mb-2",children:"Failed to load users"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:144,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs mb-3",children:h},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:145,columnNumber:19},this),e.jsxDEV(T,{size:"sm",variant:"outline",onClick:u,children:"Try Again"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:146,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:142,columnNumber:17},this):r.length===0?e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV("div",{className:"text-4xl mb-2",children:c?"ðŸ”":"ðŸ‘¥"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:152,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm mb-1",children:c?"No users found":"No available users"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:155,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs",children:c?"Try a different search term":"All users already have conversations with you"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:158,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:151,columnNumber:17},this):e.jsxDEV("div",{className:"space-y-1",children:r.map(b=>{const w=d===b.id;return e.jsxDEV("div",{onClick:()=>!d&&f(b),className:k("flex items-center gap-3 p-3 rounded-md transition-colors",!d&&"cursor-pointer hover:bg-muted/50",d&&d!==b.id&&"opacity-50",w&&"bg-muted border border-brand-light/20"),children:[e.jsxDEV(O,{className:"h-10 w-10",children:[e.jsxDEV(z,{src:b.image,alt:b.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:182,columnNumber:27},this),e.jsxDEV(F,{children:b.name.charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:183,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:181,columnNumber:25},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"text-sm font-medium truncate",children:b.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:189,columnNumber:27},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground truncate",children:b.username?`@${b.username}`:b.email},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:192,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:188,columnNumber:25},this),w&&e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxDEV(Be,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:199,columnNumber:29},this),e.jsxDEV("span",{children:"Creating chat..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:200,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:198,columnNumber:27},this)]},b.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:171,columnNumber:23},this)})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:166,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:134,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:133,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:119,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 py-4 border-t flex justify-end",children:e.jsxDEV(T,{variant:"outline",onClick:D,disabled:!!d,children:d?"Creating...":"Cancel"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:214,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:213,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:108,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:107,columnNumber:5},this)}const va=()=>{const[s,a]=l.useState(!1);return l.useEffect(()=>{const n=window.matchMedia("(min-width: 768px)"),i=t=>a(t.matches);return n.addEventListener("change",i),i(n),()=>n.removeEventListener("change",i)},[]),s},Aa=()=>{const[s,a]=l.useState(!1),[n,i]=l.useState(!1);return{collapseDesktop:s,onCollapseDesktop:()=>a(t=>!t),onCloseDesktop:()=>a(!1),openMobile:n,onOpenMobile:()=>i(!0),onCloseMobile:()=>i(!1)}},Ua=(s=!1)=>{const[a,n]=l.useState(s);return{value:a,onTrue:()=>n(!0),onFalse:()=>n(!1),onToggle:()=>n(i=>!i)}};function Ea({loading:s,user:a,conversations:n,selectedConversationId:i,onConversationSelect:t,onThreadCreated:c}){me();const o=va(),{openMobile:d,onOpenMobile:x,onCloseMobile:g}=Aa(),{value:N,onTrue:h,onFalse:u}=Ua(!1),[m,r]=l.useState(""),[f,D]=l.useState(n);l.useEffect(()=>{if(!m.trim())D(n);else{const S=n.filter(U=>{var B;const G=U.displayName||"",J=((B=U.participants)==null?void 0:B.map(H=>H.displayName||H.name||"").join(" "))||"";return(G+" "+J).toLowerCase().includes(m.toLowerCase())});D(S)}},[m,n]),l.useEffect(()=>{m.trim()||D(n)},[n,m]);const b=l.useCallback(()=>{o||g(),h()},[o,g,h]),w=l.useCallback(S=>{r(S)},[]),A=l.useCallback(()=>{r("")},[]),p=l.useCallback(async()=>{await(c==null?void 0:c())},[c]),C=()=>e.jsxDEV(T,{onClick:x,variant:"ghost",className:"fixed left-0 top-[84px] z-10 w-8 h-8 rounded-r-md bg-primary text-primary-foreground shadow-lg hover:bg-primary/90 md:hidden","aria-label":"Open chat navigation",children:e.jsxDEV(pe,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:168,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:162,columnNumber:5},this),y=()=>e.jsxDEV(e.Fragment,{children:Array.from({length:8},(S,U)=>e.jsxDEV(oa,{},`skeleton-${U}`,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:175,columnNumber:9},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:173,columnNumber:5},this),v=()=>e.jsxDEV(E.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.3,ease:[.4,0,.2,1]},className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsxDEV(_e,{className:"w-6 h-6 text-muted-foreground/60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:188,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:187,columnNumber:7},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-2",children:m?"No conversations found":"No conversations yet"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:190,columnNumber:7},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground/70",children:m?"Try a different search term":"Start a new conversation"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:193,columnNumber:7},this),!m&&e.jsxDEV(T,{variant:"outline",size:"sm",className:"mt-4",onClick:b,children:[e.jsxDEV(_e,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:205,columnNumber:11},this),"New Message"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:199,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:181,columnNumber:5},this),V=()=>e.jsxDEV(e.Fragment,{children:f.length>0?e.jsxDEV(E.div,{initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.04}}},children:f.map(S=>e.jsxDEV(E.div,{variants:{hidden:{opacity:0,x:-8},visible:{opacity:1,x:0}},transition:{duration:.25,ease:[.4,0,.2,1]},children:e.jsxDEV(xa,{conversation:S,selected:S.id===i,onCloseMobile:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:232,columnNumber:15},this)},S.id,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:224,columnNumber:13},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:215,columnNumber:9},this):v()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:213,columnNumber:5},this),L=()=>e.jsxDEV("div",{className:"flex items-center justify-between px-4 min-h-[68px] border-b",children:[e.jsxDEV(ra,{user:a},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:248,columnNumber:7},this),e.jsxDEV(T,{size:"icon",variant:"ghost",onClick:b,className:"rounded-full h-9 w-9",children:e.jsxDEV(Qs,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:255,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:249,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:247,columnNumber:5},this),j=()=>e.jsxDEV("div",{className:"px-3 py-2",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Pe,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:263,columnNumber:9},this),e.jsxDEV(He,{value:m,onChange:S=>w(S.target.value),placeholder:"Search",className:"pl-10 h-9 rounded-full bg-muted/50 border-0 focus-visible:ring-0 text-sm","aria-label":"Search conversations"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:264,columnNumber:9},this),e.jsxDEV(P,{children:m&&e.jsxDEV(E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},children:e.jsxDEV(T,{variant:"ghost",size:"sm",className:"absolute right-1.5 top-1/2 -translate-y-1/2 h-6 w-6 p-0 text-muted-foreground hover:text-foreground rounded-full",onClick:A,"aria-label":"Clear search",children:"Ã—"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:279,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:273,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:271,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:262,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:261,columnNumber:5},this),_=()=>e.jsxDEV("div",{className:"h-full flex flex-col",children:[L(),j(),e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV(re,{className:"h-full",children:s?y():V()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:305,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:304,columnNumber:7},this),e.jsxDEV(ya,{open:N,onOpenChange:u,currentUserId:a==null?void 0:a.id,onThreadCreated:p},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:310,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:296,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[!o&&C(),o?e.jsxDEV("div",{className:"h-full w-full flex flex-col",children:_()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:325,columnNumber:9},this):e.jsxDEV(We,{open:d,onOpenChange:g,children:e.jsxDEV(Qe,{side:"left",className:"p-0 border-r-0 w-[320px]",children:_()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:330,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:329,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:321,columnNumber:5},this)}function ja({participants:s=[],conversation:a,onDetailsClick:n}){var u;const i=(a==null?void 0:a.type)==="group",t=s.find(m=>!m.isCurrentUser),c=m=>{const r=m.trim().split(" ");return r.length===1?r[0].slice(0,2).toUpperCase():r.slice(0,2).map(f=>f.charAt(0)).join("").toUpperCase()},o=m=>{switch(m){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"busy":return"bg-red-500";case"offline":default:return"bg-gray-400"}},d=m=>m?`Last seen ${Ss(new Date(m),{addSuffix:!0})}`:"Last seen recently",x=((u=a==null?void 0:a.participants)==null?void 0:u.length)||s.length,g=((a==null?void 0:a.participants)||s).filter(m=>m.status==="online").length,N=e.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(O,{className:"h-10 w-10",children:[e.jsxDEV(z,{src:(a==null?void 0:a.photoURL)||(a==null?void 0:a.avatarUrl),alt:(a==null?void 0:a.displayName)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:87,columnNumber:11},this),e.jsxDEV(F,{className:"text-sm bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:c((a==null?void 0:a.displayName)||(a==null?void 0:a.name)||"Group")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:91,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:86,columnNumber:9},this),g>0&&e.jsxDEV("div",{className:"absolute bottom-0 right-0 h-3 w-3 bg-green-500 rounded-full border-2 border-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:98,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:85,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h3",{className:"text-[15px] font-semibold truncate",children:(a==null?void 0:a.displayName)||(a==null?void 0:a.name)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:104,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsxDEV(pe,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:108,columnNumber:11},this),e.jsxDEV("span",{children:[x," members",g>0&&e.jsxDEV("span",{className:"ml-1",children:["â€¢ ",g," online"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:112,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:109,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:107,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:103,columnNumber:7},this),e.jsxDEV(ce,{className:"h-4 w-4 text-muted-foreground/50 flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:121,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:83,columnNumber:5},this),h=e.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(O,{className:"h-10 w-10",children:[e.jsxDEV(z,{src:(t==null?void 0:t.photoURL)||(t==null?void 0:t.avatarUrl)||(a==null?void 0:a.photoURL),alt:(t==null?void 0:t.name)||(t==null?void 0:t.displayName)||(a==null?void 0:a.displayName)||"User"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:130,columnNumber:11},this),e.jsxDEV(F,{children:((t==null?void 0:t.name)||(t==null?void 0:t.displayName)||(a==null?void 0:a.displayName)||"U").charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:134,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:129,columnNumber:9},this),e.jsxDEV("div",{className:k("absolute bottom-0 right-0 h-3 w-3 rounded-full border-2 border-background",o(t==null?void 0:t.status))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:140,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:128,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h3",{className:"text-[15px] font-semibold truncate",children:(t==null?void 0:t.name)||(t==null?void 0:t.displayName)||(a==null?void 0:a.displayName)||"Unknown User"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:148,columnNumber:9},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground truncate",children:(t==null?void 0:t.status)==="offline"?d(t.lastActivity):e.jsxDEV("span",{className:"capitalize",children:(t==null?void 0:t.status)||"online"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:155,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:151,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:147,columnNumber:7},this),e.jsxDEV(ce,{className:"h-4 w-4 text-muted-foreground/50 flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:164,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:126,columnNumber:5},this);return e.jsxDEV("div",{className:k("flex items-center gap-3 w-full py-1 px-2 -mx-2 rounded-xl transition-colors cursor-pointer",n&&"hover:bg-muted/50 active:bg-muted/70"),onClick:n,role:n?"button":void 0,tabIndex:n?0:void 0,onKeyDown:n?m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),n())}:void 0,children:i?N:h},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:169,columnNumber:5},this)}function Va({message:s,participants:a,currentUserId:n}){return l.useMemo(()=>{var d;const t=a.find(x=>x.id===s.senderId)||{firstName:"Unknown",avatarUrl:""},c=s.senderId===n,o=s.contentType==="image";return{me:c,senderDetails:{firstName:((d=t.displayName)==null?void 0:d.split(" ")[0])||t.firstName,avatarUrl:t.photoURL||t.avatarUrl},hasImage:o}},[s,a,n])}const Ca=["ðŸ‘","â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ˜¢"];function Sa({message:s,participants:a,onOpenLightbox:n,onReply:i,onDelete:t}){var B,H,M,ye,ve;const{data:c}=ne(),o=c==null?void 0:c.user,[d,x]=l.useState(!1),[g,N]=l.useState(!1),[h,u]=l.useState(s.reactions||[]),[m,r]=l.useState(!1),{me:f,senderDetails:D,hasImage:b}=Va({message:s,participants:a,currentUserId:(o==null?void 0:o.id)||""}),{firstName:w,avatarUrl:A}=D,p=s.content||s.body||"",C=s.createdAt,y=s.isDeleted||!1,v=()=>{i&&!y&&i(s)},V=()=>{x(!0)},L=()=>{t&&t(s.id),x(!1)},j=R=>{u(ee=>{const oe=ee.find($=>$.emoji===R);return oe?oe.isSelected?oe.count===1?ee.filter($=>$.emoji!==R):ee.map($=>$.emoji===R?{...$,count:$.count-1,isSelected:!1}:$):ee.map($=>$.emoji===R?{...$,count:$.count+1,isSelected:!0}:$):[...ee,{emoji:R,count:1,isSelected:!0}]}),N(!1)},S=((H=(B=s.repliesTo)==null?void 0:B.sender)==null?void 0:H.id)===(o==null?void 0:o.id)?"You":((ye=(M=s.repliesTo)==null?void 0:M.sender)==null?void 0:ye.name)||"User",U=s.repliesTo&&e.jsxDEV("div",{className:k("mb-2 pb-2 text-xs border-b",f?"border-white/20":"border-border"),children:[e.jsxDEV("span",{className:k("font-medium",f?"text-white/80":"text-foreground/70"),children:S},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:132,columnNumber:7},this),e.jsxDEV("p",{className:k("line-clamp-2 mt-0.5",f?"text-white/60":"text-muted-foreground"),children:s.repliesTo.isDeleted?e.jsxDEV("span",{className:"italic flex items-center gap-1",children:[e.jsxDEV(ue,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:148,columnNumber:13},this),"Message deleted"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:147,columnNumber:11},this):s.repliesTo.content},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:140,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:126,columnNumber:5},this),G=!f&&e.jsxDEV("div",{className:"mb-1",children:e.jsxDEV("p",{className:"text-xs text-muted-foreground font-medium",children:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:160,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:159,columnNumber:5},this),J=y?e.jsxDEV("div",{className:k("flex items-center gap-2 px-4 py-2.5 italic text-sm",f?"rounded-[20px] rounded-br-[6px] bg-brand-light/40 text-white/70":"rounded-[20px] rounded-bl-[6px] bg-muted/40 text-muted-foreground"),children:[e.jsxDEV(ue,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:174,columnNumber:7},this),e.jsxDEV("span",{children:"Message deleted"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:175,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:165,columnNumber:5},this):e.jsxDEV("div",{className:k("relative w-fit max-w-full transition-all duration-200",b?"p-0 bg-transparent rounded-2xl overflow-hidden":"px-4 py-2.5",f?["rounded-[20px] rounded-br-[6px]","bg-brand-light text-white"]:["rounded-[20px] rounded-bl-[6px]","bg-muted text-foreground"]),children:[U,b?e.jsxDEV(E.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.3},children:e.jsxDEV("img",{src:p,alt:"attachment",width:400,height:220,className:"min-h-[220px] w-full object-cover rounded-2xl cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>n==null?void 0:n(p)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:203,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:198,columnNumber:9},this):e.jsxDEV("p",{className:"text-sm whitespace-pre-wrap break-words leading-relaxed",children:p},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:213,columnNumber:9},this),e.jsxDEV(P,{children:h.length>0&&e.jsxDEV(E.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},className:"flex flex-wrap gap-1 mt-1.5 -mb-0.5",children:h.map(R=>e.jsxDEV(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>j(R.emoji),className:k("inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-xs transition-colors duration-150",f?"bg-white/15 hover:bg-white/25":"bg-muted-foreground/10 hover:bg-muted-foreground/20",R.isSelected&&"ring-1 ring-current/30"),children:[e.jsxDEV("span",{children:R.emoji},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:241,columnNumber:17},this),e.jsxDEV("span",{className:"font-medium",children:R.count},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:242,columnNumber:17},this)]},R.emoji,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:228,columnNumber:15},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:221,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:219,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:178,columnNumber:5},this),te=e.jsxDEV("div",{className:k("flex items-center gap-1.5 mt-1",f?"flex-row-reverse":"flex-row"),children:[e.jsxDEV("span",{className:"text-[10px] text-muted-foreground/60 px-1",children:ss(new Date(C),{addSuffix:!0})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:260,columnNumber:7},this),!y&&e.jsxDEV(P,{children:m&&e.jsxDEV(E.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},transition:{duration:.15,ease:"easeOut"},className:"flex items-center gap-0.5",children:[e.jsxDEV(T,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-muted rounded-full",onClick:v,title:"Reply to message",children:e.jsxDEV(Ys,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:283,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:276,columnNumber:15},this),e.jsxDEV(ge,{open:g,onOpenChange:N,children:[e.jsxDEV(fe,{asChild:!0,children:e.jsxDEV(T,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-muted rounded-full",title:"React to message",children:e.jsxDEV(es,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:295,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:289,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:288,columnNumber:17},this),e.jsxDEV(xe,{side:"top",align:"center",className:"p-0 border-none bg-transparent shadow-none w-auto",sideOffset:8,children:e.jsxDEV(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15,ease:"easeOut"},className:"flex gap-1 p-1.5 bg-popover rounded-full shadow-lg border",children:Ca.map(R=>e.jsxDEV(E.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>j(R),className:"w-8 h-8 flex items-center justify-center hover:bg-muted rounded-full text-lg transition-colors",children:R},R,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:312,columnNumber:23},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:304,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:298,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:287,columnNumber:15},this),f&&e.jsxDEV(T,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-destructive/10 hover:text-destructive rounded-full",onClick:V,title:"Delete message",children:e.jsxDEV(ue,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:335,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:328,columnNumber:17},this),e.jsxDEV(T,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-muted rounded-full",title:"More options",children:e.jsxDEV(Ps,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:346,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:340,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:268,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:266,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:253,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:k("group flex gap-2 py-1 px-4 md:px-6",f?"flex-row-reverse":"flex-row",y&&"opacity-50"),onMouseEnter:()=>r(!0),onMouseLeave:()=>{r(!1),N(!1)},children:[!f&&e.jsxDEV(O,{className:"h-8 w-8 flex-shrink-0 mt-auto mb-1",children:[e.jsxDEV(z,{src:A,alt:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:372,columnNumber:13},this),e.jsxDEV(F,{className:"text-xs bg-muted font-medium",children:((ve=w==null?void 0:w.charAt(0))==null?void 0:ve.toUpperCase())||"?"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:373,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:371,columnNumber:11},this),e.jsxDEV("div",{className:k("flex flex-col flex-1 min-w-0 max-w-[75%]",f?"items-end":"items-start"),children:[G,J,te]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:380,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:357,columnNumber:7},this),e.jsxDEV(ks,{open:d,onOpenChange:x,children:e.jsxDEV(Ms,{children:[e.jsxDEV(Ts,{children:[e.jsxDEV(_s,{children:"Delete Message"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:396,columnNumber:13},this),e.jsxDEV(Rs,{children:"Are you sure you want to delete this message? This action cannot be undone."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:397,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:395,columnNumber:11},this),e.jsxDEV(Is,{children:[e.jsxDEV($s,{children:"Cancel"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:403,columnNumber:13},this),e.jsxDEV(Os,{onClick:L,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:404,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:402,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:394,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:393,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:356,columnNumber:5},this)}const ka=l.memo(Sa),Ma={initial:{y:0,opacity:.4},animate:s=>({y:[-1,1,-1],opacity:[.4,.8,.4],transition:{y:{duration:.6,repeat:1/0,ease:"easeInOut",delay:s*.12},opacity:{duration:.6,repeat:1/0,ease:"easeInOut",delay:s*.12}}})};function Ta({threadId:s}){const{data:a}=ne(),n=a==null?void 0:a.user,{typingUsers:i}=as(s),t=i.filter(o=>o.userId!==(n==null?void 0:n.id)),c=()=>t.length===1?`${t[0].userName} is typing`:t.length===2?`${t[0].userName} and ${t[1].userName} are typing`:`${t[0].userName} and ${t.length-1} others are typing`;return e.jsxDEV(P,{children:t.length>0&&e.jsxDEV(E.div,{initial:{opacity:0,y:8,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:8,height:0},transition:{duration:.2,ease:[.4,0,.2,1]},className:"px-4 py-2.5 overflow-hidden",children:e.jsxDEV("div",{className:"flex items-center gap-2.5",children:[e.jsxDEV("div",{className:"flex gap-0.5 items-center h-4",children:[0,1,2].map(o=>e.jsxDEV(E.div,{custom:o,variants:Ma,initial:"initial",animate:"animate",className:"w-1.5 h-1.5 bg-muted-foreground/60 rounded-full"},o,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:65,columnNumber:17},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:63,columnNumber:13},this),e.jsxDEV(E.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm text-muted-foreground/70",children:c()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:75,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:61,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:54,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:52,columnNumber:5},this)}const _a=()=>e.jsxDEV("div",{className:"flex gap-3 px-4 py-2",children:[e.jsxDEV(Q,{className:"h-8 w-8 rounded-full flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:39,columnNumber:5},void 0),e.jsxDEV("div",{className:"flex-1 space-y-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Q,{className:"h-3 w-16"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:42,columnNumber:9},void 0),e.jsxDEV(Q,{className:"h-3 w-20"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:43,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:41,columnNumber:7},void 0),e.jsxDEV(Q,{className:"h-4 w-48"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:45,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:40,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:38,columnNumber:3},void 0),Ra=({date:s})=>{const a=new Date(s),n=()=>ea(a)?"Today":sa(a)?"Yesterday":Ke(a,"MMMM d, yyyy");return e.jsxDEV("div",{className:"flex items-center justify-center py-3",children:e.jsxDEV("span",{className:"px-3 py-1 rounded-full bg-muted/60 text-xs font-medium text-muted-foreground",children:n()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:61,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:60,columnNumber:5},void 0)};function Ia({messages:s=[],participants:a=[],loading:n=!1,threadId:i,onReply:t,onDelete:c}){const o=l.useRef(null),[d,x]=l.useState(!0),[g,N]=l.useState(!1),h=s.reduce((r,f)=>{const D=Ke(new Date(f.createdAt),"yyyy-MM-dd");return r[D]||(r[D]=[]),r[D].push(f),r},{});l.useEffect(()=>{if(d&&o.current){const r=o.current.querySelector("[data-radix-scroll-area-viewport]");r&&(r.scrollTop=r.scrollHeight)}},[s,d]);const u=r=>{const{scrollTop:f,scrollHeight:D,clientHeight:b}=r.currentTarget,w=D-f-b<100;x(w),N(!w&&s.length>10)},m=()=>{if(o.current){const r=o.current.querySelector("[data-radix-scroll-area-viewport]");r&&r.scrollTo({top:r.scrollHeight,behavior:"smooth"})}};return n&&s.length===0?e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV("div",{className:"space-y-4 p-4",children:Array.from({length:5}).map((r,f)=>e.jsxDEV(_a,{},f,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:123,columnNumber:13},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:121,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:120,columnNumber:7},this):s.length===0?e.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},className:"text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(se,{className:"w-8 h-8 text-muted-foreground/50"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:140,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:139,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-medium text-foreground/80 mb-2",children:"Start a conversation"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:142,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto",children:"Send a message to begin chatting"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:145,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:133,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:132,columnNumber:7},this):e.jsxDEV("div",{className:"flex-1 relative overflow-hidden bg-background",children:[e.jsxDEV(re,{ref:o,className:"h-full",onScrollCapture:u,children:e.jsxDEV("div",{className:"min-h-full flex flex-col justify-end py-2",children:[Object.entries(h).map(([r,f])=>e.jsxDEV("div",{children:[e.jsxDEV(Ra,{date:f[0].createdAt},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:163,columnNumber:15},this),e.jsxDEV(P,{mode:"popLayout",children:f.map((D,b)=>e.jsxDEV(E.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.25,delay:b<3?b*.05:0,ease:[.4,0,.2,1]},layout:!0,children:e.jsxDEV(ka,{message:D,participants:a,onReply:t,onDelete:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:178,columnNumber:21},this)},D.id,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:166,columnNumber:19},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:164,columnNumber:15},this)]},r,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:162,columnNumber:13},this)),e.jsxDEV(Ta,{threadId:i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:191,columnNumber:11},this),e.jsxDEV(P,{children:n&&e.jsxDEV(E.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"flex items-center justify-center py-4",children:[e.jsxDEV(Be,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:"Sending..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:196,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:194,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:160,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:155,columnNumber:7},this),e.jsxDEV(P,{children:g&&e.jsxDEV(E.button,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},transition:{duration:.2,ease:"easeOut"},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:m,className:"absolute bottom-4 right-4 bg-primary text-primary-foreground rounded-full p-2.5 shadow-lg hover:bg-primary/90 transition-colors","aria-label":"Scroll to bottom",children:e.jsxDEV("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:231,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:225,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:214,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:212,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:154,columnNumber:5},this)}const $a=l.lazy(()=>xs(()=>import("./emoji-picker-react.esm-BFnJUxpy.js"),__vite__mapDeps([0,1,2]))),K=new Map;function Oa({selectedConversationId:s,disabled:a=!1,onSendMessage:n,replyingTo:i,onCancelReply:t}){var V;const[c,o]=l.useState(""),[d,x]=l.useState(!1),[g,N]=l.useState(!1),[h,u]=l.useState(!1),m=l.useRef(null),r=l.useRef(void 0),f=l.useRef(void 0),{setTyping:D}=as(s);l.useEffect(()=>{const L=f.current;if(L&&L!==s&&(c.trim()?K.set(L,c):K.delete(L)),s&&s!==L){const j=K.get(s)||"";o(j),setTimeout(()=>{m.current&&(m.current.style.height="auto",m.current.style.height=`${Math.min(m.current.scrollHeight,120)}px`)},0)}f.current=s},[s]),l.useEffect(()=>{s&&c.trim()?K.set(s,c):s&&!c.trim()&&K.delete(s)},[c,s]),l.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const b=l.useCallback(async()=>{if(!c.trim()||!n||d)return;const L=c.trim();o(""),x(!0),D(!1),s&&K.delete(s);try{await n(L),setTimeout(()=>{var j;(j=m.current)==null||j.focus()},0)}catch(j){console.error("Failed to send message:",j),o(L),s&&K.set(s,L)}finally{x(!1)}},[c,n,d,D,s]),w=l.useCallback(L=>{const j=L.metaKey||L.ctrlKey;if(j&&(L.key==="a"||L.key==="A")){L.stopPropagation();const _=L.currentTarget;_.setSelectionRange(0,_.value.length),L.preventDefault();return}if(j){L.stopPropagation();return}if(L.key==="Enter"&&!L.shiftKey){L.preventDefault(),b();return}if(L.key==="Escape"&&i&&t){L.preventDefault(),t();return}},[b,i,t]),A=l.useCallback(()=>{const L=m.current;L&&(L.style.height="auto",L.style.height=`${Math.min(L.scrollHeight,120)}px`)},[]),p=l.useCallback(L=>{const j=L.target.value;o(j),A(),j.trim()&&s?(D(!0),r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{D(!1)},1e3)):D(!1)},[A,s,D]),C=l.useCallback(L=>{const j=L.emoji,_=m.current;if(_){const S=_.selectionStart,U=_.selectionEnd,G=c.slice(0,S)+j+c.slice(U);o(G),setTimeout(()=>{_.focus(),_.setSelectionRange(S+j.length,S+j.length)},0)}else o(S=>S+j);N(!1),A()},[c,A]);l.useEffect(()=>()=>{r.current&&clearTimeout(r.current),D(!1)},[s,D]);const y=a||!s||d,v=()=>{var L;return e.jsxDEV(P,{children:i&&e.jsxDEV(E.div,{initial:{opacity:0,y:20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:20,height:0},transition:{duration:.25,ease:[.4,0,.2,1]},className:"border-t bg-muted/20 px-4 py-3 overflow-hidden",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(E.div,{initial:{scaleY:0},animate:{scaleY:1},transition:{duration:.2,delay:.1},className:"w-1 bg-primary rounded-full h-12 flex-shrink-0 mt-1 origin-top"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:247,columnNumber:15},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[e.jsxDEV("p",{className:"text-xs font-medium text-primary",children:["Replying to ",((L=i.sender)==null?void 0:L.name)||"User"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:256,columnNumber:19},this),e.jsxDEV(E.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsxDEV(T,{size:"sm",variant:"ghost",onClick:t,className:"h-6 w-6 p-0 flex-shrink-0 hover:bg-muted-foreground/20 rounded-full",children:e.jsxDEV(Ye,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:266,columnNumber:23},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:260,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:259,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:255,columnNumber:17},this),e.jsxDEV("div",{className:"bg-background/60 rounded-xl px-3 py-2 border border-border/50",children:e.jsxDEV("p",{className:"text-sm text-muted-foreground line-clamp-3",children:i.content||"Message"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:272,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:271,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:254,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:245,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:238,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:236,columnNumber:7},this)};return e.jsxDEV("div",{className:"bg-background",children:[v(),e.jsxDEV("div",{className:"border-t bg-background px-4 py-3",children:e.jsxDEV("div",{className:"flex items-end gap-2",children:[e.jsxDEV("div",{className:"flex-1 relative",children:[e.jsxDEV(gs,{ref:m,value:c,onChange:p,onKeyDown:w,onFocus:()=>u(!0),onBlur:()=>u(!1),placeholder:i?`Reply to ${((V=i.sender)==null?void 0:V.name)||"message"}...`:s?"Message":"Select a conversation",className:k("min-h-[44px] max-h-[120px] py-3 px-4 pr-12","resize-none rounded-[22px]","bg-muted/50 border-0 focus:bg-muted","transition-colors focus-visible:ring-0 focus-visible:ring-offset-0"),disabled:y,rows:1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:294,columnNumber:13},this),e.jsxDEV(ge,{open:g,onOpenChange:N,children:[e.jsxDEV(fe,{asChild:!0,children:e.jsxDEV(T,{variant:"ghost",size:"icon",className:"absolute right-2 bottom-1.5 h-8 w-8 rounded-full hover:bg-background/50",disabled:y,children:e.jsxDEV(es,{className:"h-5 w-5 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:327,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:321,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:320,columnNumber:15},this),e.jsxDEV(xe,{className:"w-auto p-0 border-none shadow-lg",side:"top",align:"end",sideOffset:8,children:e.jsxDEV(E.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.2,ease:"easeOut"},children:e.jsxDEV(l.Suspense,{fallback:e.jsxDEV("div",{className:"w-80 h-96 flex items-center justify-center",children:"Loading..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:341,columnNumber:39},this),children:e.jsxDEV($a,{onEmojiClick:C,autoFocusSearch:!1,height:400,width:350,previewConfig:{showPreview:!1},skinTonesDisabled:!0,searchDisabled:!1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:342,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:341,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:336,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:330,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:319,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:293,columnNumber:11},this),e.jsxDEV(E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxDEV(T,{onClick:b,disabled:y||!c.trim(),size:"icon",className:k("h-11 w-11 rounded-full flex-shrink-0","bg-brand-light hover:bg-brand-light/90 text-white","disabled:opacity-40 disabled:cursor-not-allowed"),children:e.jsxDEV(fs,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:374,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:364,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:360,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:291,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:290,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:285,columnNumber:5},this)}function ns(s){const[a,n]=l.useState(!0),i=l.useCallback(()=>{n(!0)},[]),t=l.useCallback(()=>{n(!1)},[]),c=l.useCallback(()=>{n(o=>!o)},[]);return{value:a,onTrue:i,onFalse:t,onToggle:c,setValue:n}}function ts({participant:s,open:a,onClose:n}){var i;return e.jsxDEV(De,{open:a,onOpenChange:n,children:e.jsxDEV(be,{className:"max-w-xs p-6 relative flex gap-4",children:[e.jsxDEV(Ds,{asChild:!0,children:e.jsxDEV("button",{className:"absolute top-2 right-2 p-1 rounded hover:bg-muted/50",children:e.jsxDEV(Ye,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:17,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:16,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:15,columnNumber:9},this),e.jsxDEV(O,{className:"h-24 w-24",children:[e.jsxDEV(z,{src:s.avatarUrl,alt:s.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:22,columnNumber:11},this),e.jsxDEV(F,{children:(i=s.name)==null?void 0:i.charAt(0)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:23,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:21,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col flex-1 justify-between",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("p",{className:"text-xs text-primary",children:s.role},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:28,columnNumber:13},this),e.jsxDEV("p",{className:"text-lg font-medium",children:s.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:29,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsxDEV(Ce,{className:"h-4 w-4 flex-shrink-0 mr-1"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:31,columnNumber:15},this),s.address]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:30,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:27,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2 pt-3",children:[e.jsxDEV(T,{size:"icon",variant:"ghost",className:"bg-red-100 hover:bg-red-200",children:e.jsxDEV(Je,{className:"h-4 w-4 text-red-600"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:42,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:37,columnNumber:13},this),e.jsxDEV(T,{size:"icon",variant:"ghost",className:"bg-sky-100 hover:bg-sky-200",children:e.jsxDEV(Ce,{className:"h-4 w-4 text-sky-600"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:50,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:45,columnNumber:13},this),e.jsxDEV(T,{size:"icon",variant:"ghost",className:"bg-primary/10 hover:bg-primary/20",children:e.jsxDEV(Xe,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:58,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:53,columnNumber:13},this),e.jsxDEV(T,{size:"icon",variant:"ghost",className:"bg-secondary/10 hover:bg-secondary/20",children:e.jsxDEV(Xs,{className:"h-4 w-4 text-secondary"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:66,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:61,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:36,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:26,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:14,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:13,columnNumber:5},this)}ts.propTypes={onClose:de.func,open:de.bool,participant:de.object};const za=s=>s.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2),Fa=s=>{const a=s.trim().split(" ");return a.length===1?a[0].slice(0,2).toUpperCase():a.slice(0,2).map(n=>n.charAt(0)).join("").toUpperCase()};function Ga({participants:s,conversation:a}){const[n,i]=l.useState(null),t=ns(),c=l.useCallback(u=>{i(u)},[]),o=()=>i(null),d=s.length,x=s.filter(u=>u.status==="online").length,g=e.jsxDEV("div",{className:"flex flex-col items-center py-5 px-3 border-b border-border",children:[e.jsxDEV(O,{className:"h-20 w-20 mb-3",children:[e.jsxDEV(z,{src:(a==null?void 0:a.photoURL)||(a==null?void 0:a.avatarUrl),alt:(a==null?void 0:a.displayName)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV(F,{className:"text-lg bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:Fa((a==null?void 0:a.displayName)||(a==null?void 0:a.name)||"Group")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:79,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:74,columnNumber:7},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-center mb-1",children:(a==null?void 0:a.displayName)||(a==null?void 0:a.name)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:87,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsxDEV(pe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:93,columnNumber:9},this),e.jsxDEV("span",{children:[d," members",x>0&&e.jsxDEV("span",{className:"ml-1",children:["â€¢ ",x," online"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:97,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:92,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:72,columnNumber:5},this),N=e.jsxDEV(T,{variant:"ghost",onClick:t.onToggle,className:"flex items-center justify-between w-full h-10 px-3 text-xs font-medium text-muted-foreground bg-muted/50",children:[e.jsxDEV("span",{children:["Members (",d,")"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:110,columnNumber:7},this),t.value?e.jsxDEV(qe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:112,columnNumber:9},this):e.jsxDEV(ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:114,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:105,columnNumber:5},this),h=e.jsxDEV(re,{className:"h-[224px]",children:e.jsxDEV("ul",{className:"divide-y divide-border",children:s.map(u=>e.jsxDEV("li",{onClick:()=>c(u),className:"flex items-center gap-3 px-3 py-2 cursor-pointer hover:bg-muted/70",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(O,{className:"h-8 w-8",children:[e.jsxDEV(z,{src:u.photoURL||u.avatarUrl,alt:u.name||u.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:130,columnNumber:17},this),e.jsxDEV(F,{children:za(u.name||u.displayName||"User")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:134,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:129,columnNumber:15},this),e.jsxDEV("span",{className:k("absolute bottom-0 right-0 h-2.5 w-2.5 rounded-full border border-background",u.status==="online"?"bg-green-500":u.status==="offline"?"bg-gray-400":"bg-yellow-500")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:139,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:128,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-sm font-medium truncate",children:u.name||u.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:153,columnNumber:17},this),u.isCurrentUser&&e.jsxDEV("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-1.5 py-0.5 rounded-full",children:"You"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:157,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:152,columnNumber:15},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground truncate",children:u.role||"Member"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:162,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:151,columnNumber:13},this)]},u.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:123,columnNumber:11},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:121,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:120,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[g,N,e.jsxDEV("div",{className:k("transition-all overflow-hidden",t.value?"max-h-[224px]":"max-h-0"),children:t.value&&h},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:177,columnNumber:7},this),n&&e.jsxDEV(De,{open:!!n,onOpenChange:o,children:e.jsxDEV(be,{children:[e.jsxDEV(Fe,{children:e.jsxDEV(Ge,{children:n.name||n.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:190,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:189,columnNumber:13},this),e.jsxDEV(ts,{participant:n,open:!!n,onClose:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:192,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:188,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:187,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:173,columnNumber:5},this)}const Pa=s=>s.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2);function Ha({participant:s,conversation:a}){const n=ns(),i=(s==null?void 0:s.name)||(s==null?void 0:s.displayName)||"Unknown User",t=(s==null?void 0:s.photoURL)||"unknown",c=(s==null?void 0:s.role)||"User",o=(s==null?void 0:s.phoneNumber)||"No phone number",d=(s==null?void 0:s.email)||"No email provided",x=(s==null?void 0:s.status)||"offline",g=e.jsxDEV("div",{className:"flex flex-col items-center py-5 px-3 border-b border-border",children:[e.jsxDEV("div",{className:"relative mb-3",children:[e.jsxDEV(O,{className:"h-20 w-20",children:[e.jsxDEV(z,{src:t,alt:i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:37,columnNumber:11},this),e.jsxDEV(F,{className:"text-lg",children:Pa(i)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:38,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:36,columnNumber:9},this),e.jsxDEV("div",{className:k("absolute bottom-1 right-1 h-4 w-4 rounded-full border-2 border-background",Y(x))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:43,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:35,columnNumber:7},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-center mb-1",children:i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:49,columnNumber:7},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-1 capitalize",children:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:50,columnNumber:7},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:51,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:34,columnNumber:5},this),N=e.jsxDEV(T,{variant:"ghost",onClick:n.onToggle,className:"flex items-center justify-between w-full h-10 px-3 text-xs font-medium text-muted-foreground bg-muted/50",children:[e.jsxDEV("span",{children:"Information"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:61,columnNumber:7},this),n.value?e.jsxDEV(qe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:63,columnNumber:9},this):e.jsxDEV(ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:65,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:56,columnNumber:5},this),h=e.jsxDEV("div",{className:k("overflow-hidden transition-all duration-200",n.value?"max-h-40":"max-h-0"),children:e.jsxDEV("div",{className:"flex flex-col px-3 py-2.5 space-y-3 text-sm",children:[e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(zs,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:79,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Role"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:81,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm",children:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:82,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:80,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:78,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(Xe,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:87,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col min-w-0",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Email"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:89,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm truncate",children:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:86,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(Je,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:95,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Phone"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:97,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm",children:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:98,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:96,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:77,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:71,columnNumber:5},this);return e.jsxDEV("div",{children:[g,N,h]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:106,columnNumber:5},this)}function Ba({open:s,onOpenChange:a,conversation:n,participants:i}){if(!n)return null;const t=n.type==="group";return e.jsxDEV(We,{open:s,onOpenChange:a,children:e.jsxDEV(Qe,{side:"right",className:"w-[380px] p-0 overflow-y-auto",children:[e.jsxDEV(ps,{className:"sr-only",children:e.jsxDEV(ws,{children:t?"Group Details":"Contact Details"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:28,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:27,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col h-full",children:t?e.jsxDEV(Ga,{participants:i,conversation:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:35,columnNumber:13},this):e.jsxDEV(Ha,{participant:i.find(c=>!c.isCurrentUser),conversation:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:40,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:33,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:26,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:25,columnNumber:5},this)}function an(){const s=me(),{id:a}=bs({from:"/_authenticated/chat/"}),{data:n}=ne(),i=n==null?void 0:n.user,[t,c]=l.useState(null),[o,d]=l.useState(!1),{threads:x,loading:g,error:N,refetch:h}=Da(i==null?void 0:i.id),{messages:u,loading:m,sendMessage:r,deleteMessage:f,error:D}=ba(a||void 0);l.useEffect(()=>{N&&(console.error("Threads error:",N),I.error("Failed to load conversations")),D&&(console.error("Messages error:",D),I.error("Failed to load messages"))},[N,D]),l.useEffect(()=>{c(null)},[a]);const b=x.map(U=>{var H;const G=U.isGroup?U.name||"Unnamed Group":U.members.filter(M=>M.userId!==(i==null?void 0:i.id)).map(M=>M.user.name).join(", ")||"Unknown",J=U.isGroup?U.avatarUrl:(H=U.members.find(M=>M.userId!==(i==null?void 0:i.id)))==null?void 0:H.user.image,te=U.members.map(M=>({id:M.userId,name:M.user.name,username:M.user.username,email:M.user.email,phoneNumber:M.user.phoneNumber,image:M.user.image,displayName:M.user.name,photoURL:M.user.image,status:"online",role:M.role,isCurrentUser:M.userId===(i==null?void 0:i.id)})),B=U.messages.length>0?{content:U.messages[0].content,createdAt:U.messages[0].createdAt,sender:{name:U.messages[0].sender.name}}:null;return{id:U.id,type:U.isGroup?"group":"direct",displayName:G,name:U.name,photoURL:J,avatarUrl:U.avatarUrl,isGroup:U.isGroup,participants:te,messages:[],lastMessage:B,unreadCount:0}}),w=a?b.find(U=>U.id===a):null,A=(w==null?void 0:w.participants)||[];l.useEffect(()=>{d(!1)},[a]);const p=l.useCallback(()=>{d(!0)},[]),C=l.useCallback(U=>{c(U)},[]),y=l.useCallback(()=>{c(null)},[]),v=l.useCallback(async U=>{if(!f){I.error("Delete functionality not available");return}try{await f(U),I.success("Message deleted successfully")}catch(G){console.error("Failed to delete message:",G)}},[f]),V=l.useCallback(async U=>{if(!(i!=null&&i.id)||!a){I.error("Unable to send message. Please select a conversation.");return}try{await r(U,i.id,t==null?void 0:t.id),c(null)}catch(G){console.error("Failed to send message:",G),I.error("Failed to send message. Please try again.")}},[r,i==null?void 0:i.id,a,t]),L=l.useCallback(U=>{s({to:"/chat",search:{id:U}})},[s]);if(g&&x.length===0)return e.jsxDEV("div",{className:"flex-1 flex items-center justify-center h-[calc(100vh-4rem)]",children:e.jsxDEV(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-brand-light to-brand-dark flex items-center justify-center",children:e.jsxDEV(se,{className:"w-8 h-8 text-white"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:150,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:149,columnNumber:13},this),e.jsxDEV(E.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute -inset-2 border-2 border-brand-light/30 border-t-brand-light rounded-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:152,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:148,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground font-medium",children:"Loading conversations..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:160,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:141,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:140,columnNumber:12},this);const j=()=>e.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.32,.72,0,1]},className:"flex-1 flex items-center justify-center px-8",children:e.jsxDEV("div",{className:"text-center max-w-sm",children:[e.jsxDEV("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(se,{className:"w-10 h-10 text-muted-foreground/40"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:178,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:177,columnNumber:9},this),e.jsxDEV("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"No conversation selected"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:180,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Choose a chat from the sidebar to start messaging"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:183,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:176,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:166,columnNumber:34},this),_=()=>e.jsxDEV("div",{className:"flex items-center px-4 py-3 min-h-[68px] border-b bg-background sticky top-0 z-10",children:a&&w?e.jsxDEV(ja,{participants:A,conversation:w,onDetailsClick:p},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:189,columnNumber:56},this):e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(se,{className:"w-5 h-5 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:191,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:190,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-[15px] font-semibold",children:"Messages"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:194,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:[b.length," conversation",b.length!==1?"s":""]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:195,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:193,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:189,columnNumber:177},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:188,columnNumber:30},this),S=()=>!a||!w?j():e.jsxDEV("div",{className:"flex flex-col w-full h-full overflow-hidden",children:[e.jsxDEV(Ia,{messages:u,participants:A,loading:m,threadId:a,onReply:C,onDelete:v},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:206,columnNumber:9},this),e.jsxDEV(Oa,{selectedConversationId:a,disabled:!a||m,onSendMessage:V,replyingTo:t,onCancelReply:y},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:208,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:205,columnNumber:12},this);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex h-[calc(100vh-4rem)] overflow-hidden",children:[e.jsxDEV("div",{className:"w-[340px] flex-shrink-0 border-r border-border/40 bg-background",children:e.jsxDEV(Ea,{conversations:b,loading:g,selectedConversationId:a,user:i,onConversationSelect:L,onThreadCreated:h},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:214,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:213,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 flex flex-col min-w-0 bg-background",children:e.jsxDEV(P,{mode:"wait",children:e.jsxDEV(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:[.32,.72,0,1]},className:"flex-1 flex flex-col h-full overflow-hidden",children:[_(),S()]},a||"empty",!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:219,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:218,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:217,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:212,columnNumber:7},this),e.jsxDEV(Ba,{open:o,onOpenChange:d,conversation:w,participants:A},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:239,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:211,columnNumber:10},this)}export{an as component};
