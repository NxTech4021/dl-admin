import{r as h,j as e,C as m,e as o,f as N,g,b as c}from"./index-DkYP5wDW.js";import{C as y,a as U,X as v,Y as E,b as j,c as A}from"./chart-CWeERSDF.js";import{S as i}from"./skeleton-wNfqMjMN.js";import{M as V}from"./use-queries-9OKVaZpn.js";import{L as k,a as w}from"./LineChart-BsxoV2FG.js";import"./index-7y95sN9n.js";import"./external-DCTon813.js";import"./schemas-B5fuxOj7.js";import"./compat-Blf4Bw1-.js";import"./coerce-C-pLok-C.js";import"./league-schema-CW4CwVLH.js";import"./season-schema-DVFNm_2a.js";import"./division-schema-gPrDsMOQ.js";const x=4.3,f={users:{label:"User Growth"},totalUsers:{label:"Total Users",color:"var(--chart-user-total)"},payingMembers:{label:"Paying Members",color:"var(--chart-user-paying)"}};function M(){return e.jsxDEV(m,{className:"h-full flex flex-col border-border/40",children:[e.jsxDEV(o,{className:"pb-0 pt-5 px-5 shrink-0",children:[e.jsxDEV(i,{className:"h-5 w-32 mb-1"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:48,columnNumber:9},this),e.jsxDEV(i,{className:"h-3 w-48"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:49,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:47,columnNumber:7},this),e.jsxDEV(c,{className:"flex-1 flex flex-col pt-5 px-5 pb-5 min-h-0",children:[e.jsxDEV("div",{className:"flex items-center gap-6 mb-5",children:[e.jsxDEV(i,{className:"h-4 w-24"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:53,columnNumber:11},this),e.jsxDEV(i,{className:"h-4 w-24"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:54,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:52,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 min-h-[280px]",children:e.jsxDEV(i,{className:"h-full w-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:57,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:56,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:51,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:46,columnNumber:5},this)}function _({chartRange:a="monthly",historyRange:u=3}){const{data:t,isLoading:D,error:b}=V(u),p=s=>{if(s.includes("Week")||s.includes("This Week")||["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].includes(s))return s;try{return new Date(s+"-01").toLocaleDateString("en-US",{month:"short"})}catch{return s}},n=h.useMemo(()=>t?a==="average"?t.map((s,r)=>({...s,totalUsers:Math.round(s.totalUsers/x),payingMembers:Math.round(s.payingMembers/x),month:`Week ${r+1}`})):t:[],[a,t]),d=h.useMemo(()=>{var s,r;return{totalUsers:((s=n[n.length-1])==null?void 0:s.totalUsers)??0,payingMembers:((r=n[n.length-1])==null?void 0:r.payingMembers)??0}},[n]);return D?e.jsxDEV(M,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:113,columnNumber:12},this):b||!t||t.length===0?e.jsxDEV(m,{className:"h-full flex flex-col border-border/40",children:[e.jsxDEV(o,{className:"pb-0 pt-5 px-5 shrink-0",children:[e.jsxDEV(N,{className:"text-base font-medium",children:"User Growth"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:120,columnNumber:11},this),e.jsxDEV(g,{className:"text-xs",children:"No data available"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:121,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:119,columnNumber:9},this),e.jsxDEV(c,{className:"flex-1 flex items-center justify-center px-5 min-h-0",children:e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"No user growth data available"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:124,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:123,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:118,columnNumber:7},this):e.jsxDEV(m,{className:"h-full flex flex-col border-border/40",children:[e.jsxDEV(o,{className:"pb-0 pt-5 px-5 shrink-0",children:[e.jsxDEV(N,{className:"text-base font-medium",children:"User Growth"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:135,columnNumber:9},this),e.jsxDEV(g,{className:"text-xs",children:[a==="average"?"Weekly average":"Monthly"," for past ",u,"mo"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:136,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:134,columnNumber:7},this),e.jsxDEV(c,{className:"flex-1 flex flex-col pt-5 px-5 pb-5 min-h-0",children:[e.jsxDEV("div",{className:"flex items-center gap-6 mb-5",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-[var(--chart-user-total)]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:145,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Total"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:146,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm font-medium tabular-nums",children:d.totalUsers.toLocaleString()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:147,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:144,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-[var(--chart-user-paying)]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:150,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Paying"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:151,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm font-medium tabular-nums",children:d.payingMembers.toLocaleString()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:152,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:149,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:143,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 min-h-[280px]",children:e.jsxDEV(y,{config:f,className:"h-full w-full",children:e.jsxDEV(k,{accessibilityLayer:!0,data:n,margin:{left:0,right:0,top:10,bottom:10},children:[e.jsxDEV(U,{vertical:!1,strokeDasharray:"3 3",stroke:"var(--border)",strokeOpacity:.5},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:164,columnNumber:15},this),e.jsxDEV(v,{dataKey:"month",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32,tickFormatter:p,tick:{fontSize:11}},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:170,columnNumber:15},this),e.jsxDEV(E,{tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:s=>s.toString(),domain:["dataMin - 10","dataMax + 10"],tick:{fontSize:11},width:40},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:179,columnNumber:15},this),e.jsxDEV(j,{content:e.jsxDEV(A,{className:"w-[160px]",labelFormatter:s=>{if(s.includes("Week")||s.includes("This Week")||["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].includes(s))return s;try{return new Date(s+"-01").toLocaleDateString("en-US",{month:"short",year:"numeric"})}catch{return s}},formatter:(s,r)=>{const l=f[r],L="color"in l?l.color:"#374F35";return[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:L}},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:213,columnNumber:27},this),e.jsxDEV("span",{className:"text-sm font-medium tabular-nums",children:new Intl.NumberFormat().format(s)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:217,columnNumber:27},this)]},r,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:212,columnNumber:25},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:(l==null?void 0:l.label)||r},`${r}-label`,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:221,columnNumber:25},this)]}},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:190,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:188,columnNumber:15},this),e.jsxDEV(w,{dataKey:"totalUsers",type:"monotone",stroke:"var(--color-totalUsers)",strokeWidth:1.5,dot:!1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:229,columnNumber:15},this),e.jsxDEV(w,{dataKey:"payingMembers",type:"monotone",stroke:"var(--color-payingMembers)",strokeWidth:1.5,dot:!1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:236,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:159,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:158,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:157,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:141,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/user-growth-chart.tsx",lineNumber:133,columnNumber:5},this)}export{_ as UserGrowthChart};
