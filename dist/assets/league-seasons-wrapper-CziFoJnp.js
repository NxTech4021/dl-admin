import{u as C,r as a,j as e,B as S,ca as I,k as f,l as D,t as P}from"./index-DkYP5wDW.js";import{SeasonsDataTable as M}from"./seasons-data-table-DQHRehKX.js";import{I as W}from"./IconPlus-OVb4rSTK.js";import{I as x}from"./IconCalendar-BJL1nSGP.js";import{I as O}from"./IconTrophy-DEIW-o4l.js";import"./alert-dialog-B64E20T9.js";import"./table-TSmZ7bT1.js";import"./tooltip-i1uewStl.js";import"./skeleton-wNfqMjMN.js";import"./sports-DlL8wsWK.js";import"./dropdown-menu-CEcXqwU1.js";import"./index-Gv5aR-aq.js";import"./IconDotsVertical-wj_fxMaz.js";import"./IconEye-DVyNYUC4.js";import"./IconExternalLink-H-HL1Y0w.js";import"./IconEdit-FU7ltPhr.js";import"./IconHash-D1u0Lk1s.js";import"./IconUsers-DAF0xImA.js";import"./IconCategory-Cl0ykW78.js";import"./IconTrash-DzEPolz-.js";import"./constants-CwTYU-p_.js";import"./IconChevronRight-0t6kW6LK.js";import"./IconCurrencyDollar-lU6kbHIO.js";import"./IconClock-smTgWtmy.js";import"./IconSettings-CmYrgfvs.js";import"./IconCreditCard-BQVdwEwQ.js";import"./IconCheck-DWEFHc3q.js";import"./season-edit-modal-CuPAKwpS.js";import"./eye-DT2UBq9Y.js";import"./IconDownload-Chj97qSj.js";import"./IconRefresh-aGs3OyLR.js";import"./IconChevronLeft-CKI_5jiH.js";function Ne({seasons:n,leagueId:i,leagueName:h,onRefresh:d}){const b=C(),[L,g]=a.useState(!1),[v,p]=a.useState([]),[y,N]=a.useState(!1),[l,m]=a.useState([]),[A,w]=a.useState(!1);a.useEffect(()=>{if(!n||n.length===0){m([]);return}const s=new AbortController;return(async()=>{w(!0);try{const r=n.map(o=>f.get(D.season.getById(o.id),{signal:s.signal}).then(c=>c.data)),t=await Promise.allSettled(r);if(s.signal.aborted)return;const u=t.map((o,c)=>o.status==="fulfilled"?o.value:n[c]);m(u)}catch{if(s.signal.aborted)return;m(n)}finally{s.signal.aborted||w(!1)}})(),()=>{s.abort()}},[n]),a.useEffect(()=>{if(!i)return;const s=new AbortController;return(async()=>{var r;N(!0);try{const t=await f.get(D.categories.getAll,{params:{leagueId:i},signal:s.signal}),u=((r=t.data)==null?void 0:r.data)||t.data||[];p(u)}catch{if(s.signal.aborted)return;p([]),P.error("Failed to load categories")}finally{s.signal.aborted||N(!1)}})(),()=>{s.abort()}},[i]);const E=s=>{b({to:`/seasons/${s}`})},j=()=>{g(!0)},V=async()=>{d&&d()};return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Seasons Management"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:145,columnNumber:11},this),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:["(",l.length," season(s))"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:146,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:144,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:e.jsxDEV(S,{onClick:j,size:"sm",className:"gap-2",disabled:y,children:[e.jsxDEV(W,{className:"w-4 h-4","aria-hidden":"true"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:158,columnNumber:13},this),"Create Season"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:152,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:151,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:143,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(x,{className:"w-4 h-4 text-blue-500","aria-hidden":"true"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:168,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm font-medium",children:"Total"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:169,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:167,columnNumber:11},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:l.length},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:171,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:166,columnNumber:9},this),e.jsxDEV("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(O,{className:"w-4 h-4 text-green-500","aria-hidden":"true"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:176,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm font-medium",children:"Active"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:177,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:175,columnNumber:11},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:l.filter(s=>s.status==="ACTIVE").length},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:179,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:174,columnNumber:9},this),e.jsxDEV("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(x,{className:"w-4 h-4 text-orange-500","aria-hidden":"true"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:186,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm font-medium",children:"Upcoming"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:187,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:185,columnNumber:11},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:l.filter(s=>s.status==="UPCOMING").length},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:189,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:184,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:165,columnNumber:7},this),e.jsxDEV(M,{data:l,isLoading:A,onViewSeason:E},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:196,columnNumber:7},this),e.jsxDEV(I,{open:L,onOpenChange:g,leagueId:i,leagueName:h,categories:v,onSeasonCreated:V},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:203,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-seasons-wrapper.tsx",lineNumber:141,columnNumber:5},this)}export{Ne as LeagueSeasonsWrapper};
