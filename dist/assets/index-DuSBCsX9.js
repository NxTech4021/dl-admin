const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/seasons-data-table-DQHRehKX.js","assets/index-DkYP5wDW.js","assets/index-IdBuu3mz.css","assets/alert-dialog-B64E20T9.js","assets/table-TSmZ7bT1.js","assets/tooltip-i1uewStl.js","assets/skeleton-wNfqMjMN.js","assets/sports-DlL8wsWK.js","assets/dropdown-menu-CEcXqwU1.js","assets/index-Gv5aR-aq.js","assets/IconDotsVertical-wj_fxMaz.js","assets/IconEye-DVyNYUC4.js","assets/IconExternalLink-H-HL1Y0w.js","assets/IconEdit-FU7ltPhr.js","assets/IconHash-D1u0Lk1s.js","assets/IconUsers-DAF0xImA.js","assets/IconCategory-Cl0ykW78.js","assets/IconTrash-DzEPolz-.js","assets/constants-CwTYU-p_.js","assets/IconTrophy-DEIW-o4l.js","assets/IconChevronRight-0t6kW6LK.js","assets/IconCurrencyDollar-lU6kbHIO.js","assets/IconCalendar-BJL1nSGP.js","assets/IconClock-smTgWtmy.js","assets/IconSettings-CmYrgfvs.js","assets/IconCreditCard-BQVdwEwQ.js","assets/IconCheck-DWEFHc3q.js","assets/season-edit-modal-CuPAKwpS.js","assets/eye-DT2UBq9Y.js","assets/IconDownload-Chj97qSj.js","assets/IconRefresh-aGs3OyLR.js","assets/IconChevronLeft-CKI_5jiH.js"])))=>i.map(i=>d[i]);
import{E as A,_ as c,u as E,k as _,l as S,j as s,B as V,r as N,$ as j}from"./index-DkYP5wDW.js";import{P as I}from"./page-header-D26UtXr6.js";import{S as u}from"./stats-card-DhcoG5iT.js";import{S as U}from"./stats-grid-CtfJQSwS.js";import{s as R}from"./season-schema-DVFNm_2a.js";import{z as D}from"./external-DCTon813.js";import{I as C}from"./IconCalendar-BJL1nSGP.js";import{I as k}from"./IconTrophy-DEIW-o4l.js";import{I as M}from"./IconUsers-DAF0xImA.js";import{I as P}from"./IconStar-CNcp_pJN.js";import{I as F}from"./IconDownload-Chj97qSj.js";import"./skeleton-wNfqMjMN.js";import"./schemas-B5fuxOj7.js";import"./coerce-C-pLok-C.js";import"./compat-Blf4Bw1-.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M12 12m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M4 4l3 3",key:"svg-1"}],["path",{d:"M20 4l-3 3",key:"svg-2"}],["path",{d:"M4 20l3 -3",key:"svg-3"}],["path",{d:"M20 20l-3 -3",key:"svg-4"}]],z=A("outline","currency","Currency",T),$=N.lazy(()=>j(()=>import("./seasons-data-table-DQHRehKX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])).then(p=>({default:p.SeasonsDataTable})));function ae(){const[p,f]=c.useState([]),[r,x]=c.useState(!0),[m,n]=c.useState(null),y=E(),o=c.useCallback(async()=>{var t,a;x(!0),n(null);try{const e=await _.get(S.season.getAll);let i=[];if(Array.isArray(e.data)?i=e.data:(t=e.data)!=null&&t.data&&Array.isArray(e.data.data)?i=e.data.data:(a=e.data)!=null&&a.seasons&&Array.isArray(e.data.seasons)&&(i=e.data.seasons),!i||i.length===0){f([]);return}const d=D.array(R).parse(i);f(d),n(null)}catch(e){console.error("Failed to fetch seasons:",e),e instanceof D.ZodError?(n("Invalid data format"),console.error("Validation errors:",e.issues)):e instanceof Error?e.message.includes("Network Error")?n("Network error"):e.message.includes("timeout")?n("Request timeout"):e.message.includes("401")||e.message.includes("403")?n("Access denied"):n("Failed to load"):n("Unexpected error"),f([])}finally{x(!1)}},[]);c.useEffect(()=>{o()},[o]);const v=t=>{y({to:"/seasons/$seasonId",params:{seasonId:t}})},l=p,g=l.length,b=l.filter(t=>t.status==="ACTIVE").length,h=l.reduce((t,a)=>{var e;return t+(((e=a.memberships)==null?void 0:e.length)||0)},0),w=l.reduce((t,a)=>{var d;const e=parseFloat((a==null?void 0:a.entryFee)||"0")||0,i=((d=a.memberships)==null?void 0:d.length)||0;return t+e*i},0),L=g>0?Math.round(h/g):0;return s.jsxDEV("div",{className:"flex flex-1 flex-col",children:s.jsxDEV("div",{className:"@container/main flex flex-1 flex-col gap-2",children:[s.jsxDEV(I,{icon:C,title:"Seasons Management",description:"Manage league seasons and tournaments",actions:s.jsxDEV(s.Fragment,{children:s.jsxDEV(V,{variant:"outline",size:"sm",children:[s.jsxDEV(F,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:88,columnNumber:17},this),"Export"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:87,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:86,columnNumber:129},this),children:s.jsxDEV(U,{children:[s.jsxDEV(u,{title:"Total Seasons",value:g,description:`${b} currently active`,icon:k,iconColor:"text-primary",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:93,columnNumber:13},this),s.jsxDEV(u,{title:"Total Participants",value:h,description:"Across all seasons",icon:M,iconColor:"text-blue-500",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:94,columnNumber:13},this),s.jsxDEV(u,{title:"Total Revenue",value:`RM ${w.toLocaleString("en-MY",{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:"From all season entry fees",icon:z,iconColor:"text-green-500",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:95,columnNumber:13},this),s.jsxDEV(u,{title:"Average per Season",value:L,description:"Players per season",icon:P,iconColor:"text-yellow-500",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:99,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:92,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:86,columnNumber:9},this),s.jsxDEV("div",{className:"flex-1 px-4 lg:px-6 pb-6",children:s.jsxDEV(N.Suspense,{fallback:s.jsxDEV("div",{className:"h-96 animate-pulse bg-muted rounded-lg"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:104,columnNumber:31},this),children:s.jsxDEV($,{data:l,isLoading:r,onViewSeason:v,onRefresh:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:105,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:104,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:103,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:85,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:84,columnNumber:10},this)}export{ae as component};
