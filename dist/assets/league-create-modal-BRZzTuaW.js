import{r as o,a as W,_ as q,k as F,l as k,j as e,N as J,aK as Y,P as Z,Q as $,R as ee,V as le,h as n,I as B,a2 as f,a3 as b,a4 as w,a5 as L,a6 as v,a0 as se,aN as ae,W as me,K as oe,X as ne,B as O,a1 as ie,t as P,bC as re}from"./index-DyY9s1i7.js";import{S as te,g as de,L as ue,a as ce}from"./league-BTskQ2oy.js";import{f as ge,a as Ne}from"./site-header-Dzv4kaRt.js";import{I as De}from"./IconMapPin-BqbGQxWd.js";import"./use-notifications-BbMTfb7w.js";function Le({open:M,onOpenChange:t,children:R,onLeagueCreated:d,selectedTemplate:y}){const[u,c]=o.useState(!1),[E,g]=o.useState(""),[_,V]=o.useState([]),[he,A]=o.useState(!1),[N,D]=o.useState(""),[j,i]=o.useState(!1),[h,x]=o.useState([]),{data:p}=W(),K=p==null?void 0:p.user.id,[s,U]=o.useState({leagueName:"",sport:"",location:"",status:"ACTIVE",description:"",hasSponsor:!1,existingSponsorId:""});q.useEffect(()=>{s.hasSponsor&&(A(!0),F.get(k.sponsors.getAll).then(l=>{var C;const a=l.data,Q=(((C=a==null?void 0:a.data)==null?void 0:C.sponsorships)||(a==null?void 0:a.data)||a||[]).map(T=>({id:T.id,name:T.sponsoredName||"Unnamed Sponsor"}));V(Q)}).catch(()=>{V([])}).finally(()=>A(!1)))},[s.hasSponsor]);const m=(l,a)=>{U(r=>({...r,[l]:a}))},z=l=>{if(D(l),l.trim()===""){x([]),i(!1),m("existingSponsorId","");return}const a=_.filter(r=>r.name.toLowerCase().includes(l.toLowerCase()));x(a),i(!0)},X=l=>{D(l.name),m("existingSponsorId",l.id),i(!1)},G=()=>{setTimeout(()=>{i(!1)},200)},S=()=>{U({leagueName:"",sport:"",location:"",status:"ACTIVE",description:"",hasSponsor:!1,existingSponsorId:""}),g(""),c(!1),D(""),i(!1),x([])},I=s.leagueName&&s.sport&&s.location,H=async()=>{if(I){c(!0),g("");try{const l={name:s.leagueName,location:s.location,status:s.status,sportType:s.sport||"TENNIS",gameType:"SINGLES",description:s.description||null,createdById:K};s.hasSponsor&&s.existingSponsorId&&(l.existingSponsorshipIds=[s.existingSponsorId]);const a=await F.post(k.league.create,l);a.data&&(P.success("League created successfully!"),S(),t(!1),d==null||d(a.data))}catch(l){const a=re(l,"Failed to create league");g(a),P.error(a)}finally{c(!1)}}};return e.jsxDEV(J,{open:M,onOpenChange:l=>{l||S(),t(l)},children:[e.jsxDEV(Y,{asChild:!0,children:R},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:226,columnNumber:7},this),e.jsxDEV(Z,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxDEV($,{className:"space-y-3",children:[e.jsxDEV(ee,{className:"flex items-center gap-3 text-2xl",children:[e.jsxDEV("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:e.jsxDEV(ge,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:233,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:232,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{children:"Create New League"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:236,columnNumber:15},this),y&&e.jsxDEV("span",{className:"text-sm font-normal text-muted-foreground",children:["Using template: ",y.name]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:238,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:235,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:231,columnNumber:11},this),e.jsxDEV(le,{className:"text-base",children:"Set up the basic information for your new league"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:244,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:230,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-6 py-4",children:[e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(n,{htmlFor:"leagueName",className:"text-sm font-medium",children:"League Name *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:255,columnNumber:17},this),e.jsxDEV(B,{id:"leagueName",type:"text",placeholder:"e.g., KL League",value:s.leagueName,onChange:l=>m("leagueName",l.target.value),className:"h-11"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:258,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:254,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(n,{className:"text-sm font-medium",children:"Sport *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:270,columnNumber:17},this),e.jsxDEV(f,{value:s.sport,onValueChange:l=>m("sport",l),children:[e.jsxDEV(b,{className:"h-11 w-full",children:e.jsxDEV(w,{placeholder:"Select a sport"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:273,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:272,columnNumber:19},this),e.jsxDEV(L,{children:te.map(l=>e.jsxDEV(v,{value:l.value,children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:de(l.value)}},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:279,columnNumber:27},this),l.label]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:278,columnNumber:25},this)},l.value,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:277,columnNumber:23},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:275,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:271,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:269,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(n,{className:"text-sm font-medium",children:"Location *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:293,columnNumber:17},this),e.jsxDEV(f,{value:s.location,onValueChange:l=>m("location",l),children:[e.jsxDEV(b,{className:"h-11 w-full",children:e.jsxDEV(w,{placeholder:"Select location"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:296,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:295,columnNumber:19},this),e.jsxDEV(L,{children:ue.map(l=>e.jsxDEV(v,{value:l.value,children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(De,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:302,columnNumber:27},this),l.label]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:301,columnNumber:25},this)},l.value,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:300,columnNumber:23},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:298,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:294,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:292,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(n,{className:"text-sm font-medium",children:"Status"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:313,columnNumber:17},this),e.jsxDEV(f,{value:s.status,onValueChange:l=>m("status",l),children:[e.jsxDEV(b,{className:"h-11 w-full",children:e.jsxDEV(w,{placeholder:"Select status"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:316,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:315,columnNumber:19},this),e.jsxDEV(L,{children:ce.map(l=>e.jsxDEV(v,{value:l.value,children:l.label},l.value,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:320,columnNumber:23},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:318,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:314,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:312,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:252,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV(se,{id:"hasSponsor",checked:s.hasSponsor,onCheckedChange:l=>m("hasSponsor",l)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:332,columnNumber:17},this),e.jsxDEV(n,{htmlFor:"hasSponsor",className:"text-sm font-medium flex items-center gap-2",children:[e.jsxDEV(ae,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:338,columnNumber:19},this),"This league has a sponsor"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:337,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:331,columnNumber:15},this),s.hasSponsor&&e.jsxDEV("div",{className:"space-y-4 pl-6 border-l-2 border-primary/20 bg-muted/30 p-4 rounded-lg",children:e.jsxDEV("div",{className:"space-y-2 relative",children:[e.jsxDEV(n,{htmlFor:"existingSponsor",className:"text-sm font-medium",children:"Select Existing Sponsor *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:347,columnNumber:21},this),e.jsxDEV(B,{id:"existingSponsor",placeholder:"Type to search sponsors...",value:N,onChange:l=>z(l.target.value),onFocus:()=>{N.trim()!==""&&i(!0)},onBlur:G,className:"h-11"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:350,columnNumber:21},this),j&&h.length>0&&e.jsxDEV("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:h.map(l=>e.jsxDEV("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:()=>X(l),children:l.name},l.id,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:368,columnNumber:27},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:366,columnNumber:23},this),j&&h.length===0&&N.trim()!==""&&e.jsxDEV("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg",children:e.jsxDEV("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No sponsors found"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:382,columnNumber:25},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:381,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:346,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:344,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:330,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(n,{htmlFor:"description",className:"text-sm font-medium",children:"Description"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:394,columnNumber:15},this),e.jsxDEV(me,{id:"description",placeholder:"Brief description of the league...",value:s.description,onChange:l=>m("description",l.target.value),className:"min-h-[100px]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:397,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:393,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:251,columnNumber:11},this),E&&e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-destructive bg-destructive/10 p-3 rounded-lg border border-destructive/20",children:[e.jsxDEV("div",{className:"h-4 w-4 rounded-full bg-destructive/20 flex items-center justify-center",children:e.jsxDEV(oe,{className:"h-2.5 w-2.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:411,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:410,columnNumber:15},this),E]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:409,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:249,columnNumber:9},this),e.jsxDEV(ne,{className:"flex gap-3 pt-4",children:[e.jsxDEV(O,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:u,className:"flex-1 sm:flex-none",children:"Cancel"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:419,columnNumber:11},this),e.jsxDEV(O,{type:"button",onClick:H,disabled:u||!I,className:"flex-1 sm:flex-none min-w-[160px]",children:u?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ie,{className:"animate-spin mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:436,columnNumber:17},this),"Creating League..."]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:435,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ne,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:441,columnNumber:17},this),"Create League"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:440,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:428,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:418,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:229,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/league-create-modal.tsx",lineNumber:219,columnNumber:5},this)}export{Le as default};
