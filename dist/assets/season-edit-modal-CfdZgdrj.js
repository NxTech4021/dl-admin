import{c as M,r as d,j as e,P as R,Q as q,R as I,V as T,T as h,W as P,d as b,h as c,I as U,X as B,aS as O,aT as Y,B as u,aY as y,q as _,aU as z,b3 as X,a5 as $,a_ as H,Y as Q,L as W,k as Z,l as G,t as V}from"./index-B1yKy6BS.js";import{E as J}from"./eye-Gyyh48bJ.js";import{A as K}from"./arrow-left-CJ5oHjVY.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],se=M("arrow-right",ee);function de({open:N,onOpenChange:g,season:a,onSeasonUpdated:f}){const[o,w]=d.useState("form"),[t,L]=d.useState(!1),[v,x]=d.useState(""),[ie,ae]=d.useState([]),[s,p]=d.useState({name:"",startDate:void 0,endDate:void 0,regiDeadline:void 0,entryFee:"",description:"",categoryIds:[],isActive:!1,paymentRequired:!1,promoCodeSupported:!1,withdrawalEnabled:!1});d.useEffect(()=>{a&&N&&p({name:a.name||"",startDate:a.startDate?new Date(a.startDate):void 0,endDate:a.endDate?new Date(a.endDate):void 0,regiDeadline:a.regiDeadline?new Date(a.regiDeadline):void 0,entryFee:a.entryFee||"",description:a.description||"",categoryIds:[],isActive:a.isActive||!1,paymentRequired:a.paymentRequired||!1,promoCodeSupported:a.promoCodeSupported||!1,withdrawalEnabled:a.withdrawalEnabled||!1})},[a,N]);const E=()=>{w("form"),p({name:"",startDate:void 0,endDate:void 0,regiDeadline:void 0,entryFee:"",description:"",categoryIds:[],isActive:!1,paymentRequired:!1,promoCodeSupported:!1,withdrawalEnabled:!1}),x("")},r=(i,l)=>{p(n=>({...n,[i]:l}))},S=()=>{j&&w("preview")},C=()=>w("form"),A=(i,l,n)=>{const m={};return i||(m.startDate="Start date is required"),l||(m.endDate="End date is required"),n||(m.regiDeadline="Registration deadline is required"),i&&l&&i>=l&&(m.endDate="End date must be after start date"),n&&i&&n>=i&&(m.regiDeadline="Registration deadline must be before start date"),m},D=d.useMemo(()=>A(s.startDate,s.endDate,s.regiDeadline),[s.startDate,s.endDate,s.regiDeadline]),F=async()=>{var i,l;L(!0),x("");try{if(!s.name||!s.entryFee)throw new Error("Please fill in all required fields");const n=A(s.startDate,s.endDate,s.regiDeadline);if(Object.keys(n).length>0){const k=Object.values(n).join(". ");throw new Error(k)}const m={name:s.name,description:s.description||null,entryFee:Number(s.entryFee),startDate:s.startDate.toISOString(),endDate:s.endDate.toISOString(),regiDeadline:s.regiDeadline.toISOString(),isActive:s.isActive,paymentRequired:s.paymentRequired,promoCodeSupported:s.promoCodeSupported,withdrawalEnabled:s.withdrawalEnabled},le=await Z.put(G.season.update(a.id),m);V.success("Season updated successfully!"),E(),g(!1),await(f==null?void 0:f())}catch(n){const m=((l=(i=n.response)==null?void 0:i.data)==null?void 0:l.error)||n.message||"Failed to update season";x(m),V.error(m)}finally{L(!1)}},j=d.useMemo(()=>!!(s.name&&s.startDate&&s.endDate&&s.regiDeadline&&s.entryFee&&Object.keys(D).length===0),[s,D]);return e.jsxDEV(R,{open:N,onOpenChange:i=>{i||E(),g(i)},children:e.jsxDEV(q,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxDEV(I,{className:"space-y-3",children:[e.jsxDEV(T,{className:"flex items-center gap-3 text-2xl",children:[e.jsxDEV("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:o==="form"?e.jsxDEV(h,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:283,columnNumber:17},this):e.jsxDEV(J,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:285,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:281,columnNumber:13},this),o==="form"?"Edit Season":"Update Season Details"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:280,columnNumber:11},this),e.jsxDEV(P,{className:"text-base",children:o==="form"?"Update your season details and configuration.":"Review all changes before updating the season."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:290,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:279,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[e.jsxDEV("div",{className:b("flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium transition-colors",o==="form"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.jsxDEV("span",{children:"1. Details"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:307,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:299,columnNumber:11},this),e.jsxDEV("div",{className:"w-8 h-px bg-border"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:309,columnNumber:11},this),e.jsxDEV("div",{className:b("flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium transition-colors",o==="preview"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.jsxDEV("span",{children:"2. Confirm"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:318,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:310,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:298,columnNumber:9},this),o==="form"&&e.jsxDEV("div",{className:"space-y-6 animate-in slide-in-from-right-4 duration-300",children:[e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxDEV("div",{children:[e.jsxDEV(c,{children:"Season Name *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:328,columnNumber:17},this),e.jsxDEV(U,{value:s.name,onChange:i=>r("name",i.target.value),placeholder:"e.g., Spring Championship 2025",className:"h-11"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:329,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:327,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{children:"Entry Fee (MYR) *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:337,columnNumber:17},this),e.jsxDEV(U,{type:"number",value:s.entryFee,onChange:i=>r("entryFee",i.target.value),placeholder:"150",min:"0",className:"h-11"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:338,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:336,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:326,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{children:"Description"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:351,columnNumber:15},this),e.jsxDEV(B,{value:s.description,onChange:i=>r("description",i.target.value),placeholder:"Describe this season..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:352,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:350,columnNumber:13},this),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-3",children:[{label:"Registration Deadline",key:"regiDeadline"},{label:"Start Date",key:"startDate"},{label:"End Date",key:"endDate"}].map(i=>e.jsxDEV("div",{children:[e.jsxDEV(c,{children:[i.label," *"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:459,columnNumber:19},this),e.jsxDEV(O,{children:[e.jsxDEV(Y,{asChild:!0,children:e.jsxDEV(u,{variant:"outline",className:b("w-full justify-start text-left font-normal h-11",!s[i.key]&&"text-muted-foreground"),children:[e.jsxDEV(_,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:469,columnNumber:25},this),s[i.key]?y(s[i.key],"MMM dd, yyyy"):"Select date"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:462,columnNumber:23},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:461,columnNumber:21},this),e.jsxDEV(z,{className:"w-auto p-0",align:"start",children:e.jsxDEV(X,{mode:"single",selected:s[i.key],onSelect:l=>r(i.key,l)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:476,columnNumber:23},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:475,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:460,columnNumber:19},this),D[i.key]&&e.jsxDEV("p",{className:"text-sm text-destructive mt-1",children:D[i.key]},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:485,columnNumber:21},this)]},i.key,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:458,columnNumber:17},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:449,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:["isActive","paymentRequired","promoCodeSupported","withdrawalEnabled"].map(i=>e.jsxDEV("div",{className:"flex items-center justify-between border p-3 rounded-lg",children:[e.jsxDEV(c,{className:"capitalize",children:i.replace(/([A-Z])/g," $1")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:507,columnNumber:19},this),e.jsxDEV($,{checked:s[i],onCheckedChange:l=>r(i,l)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:510,columnNumber:19},this)]},i,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:503,columnNumber:17},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:494,columnNumber:13},this),v&&e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-destructive bg-destructive/10 p-3 rounded-lg border border-destructive/20",children:[e.jsxDEV(H,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:521,columnNumber:17},this),v]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:520,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:324,columnNumber:11},this),o==="preview"&&e.jsxDEV("div",{className:"space-y-6 animate-in slide-in-from-left-4 duration-300",children:[e.jsxDEV("div",{className:"text-center space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 mx-auto",children:e.jsxDEV(h,{className:"h-6 w-6 text-primary"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:533,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:532,columnNumber:15},this),e.jsxDEV("h3",{className:"text-xl font-semibold",children:s.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:535,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:s.description||"No description"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:536,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:531,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Entry Fee:"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:543,columnNumber:17},this)," MYR ",s.entryFee]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:542,columnNumber:15},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Dates:"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:546,columnNumber:17},this)," ",y(s.startDate,"MMM dd")," -"," ",y(s.endDate,"MMM dd, yyyy")]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:545,columnNumber:15},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Status:"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:550,columnNumber:17},this)," ",s.isActive?"Active":"Inactive"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:549,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:541,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:530,columnNumber:11},this),e.jsxDEV(Q,{className:"flex gap-3 pt-4",children:o==="form"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(u,{variant:"outline",onClick:()=>g(!1),disabled:t,children:"Cancel"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:559,columnNumber:15},this),e.jsxDEV(u,{onClick:S,disabled:!j||t,children:[e.jsxDEV(se,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:570,columnNumber:17},this)," Review Changes"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:566,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:558,columnNumber:13},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(u,{variant:"outline",onClick:C,disabled:t,children:[e.jsxDEV(K,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:580,columnNumber:17},this)," Back"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:575,columnNumber:15},this),e.jsxDEV(u,{onClick:F,disabled:t,children:t?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(W,{className:"animate-spin mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:585,columnNumber:21},this)," ","Updating..."]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:584,columnNumber:19},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(h,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:590,columnNumber:21},this)," Update Season"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:589,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:582,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:574,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:556,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:278,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/season-edit-modal.tsx",lineNumber:271,columnNumber:5},this)}export{de as S};
