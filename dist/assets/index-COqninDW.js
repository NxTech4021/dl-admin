const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/user-growth-chart-DOLsrAZl.js","assets/index-BhJxrXm-.js","assets/index-37X8X0xr.css","assets/chart-x13qg_-7.js","assets/skeleton-n4fk542y.js","assets/use-queries-Bkilzo1z.js","assets/external-DCTon813.js","assets/schemas-B5fuxOj7.js","assets/compat-Blf4Bw1-.js","assets/coerce-C-pLok-C.js","assets/league-schema-CW4CwVLH.js","assets/season-schema-DVFNm_2a.js","assets/division-schema-gPrDsMOQ.js","assets/LineChart-DgvyRfWN.js","assets/sport-comparison-chart-B_jOq_x3.js","assets/BarChart-C6IYhKt-.js","assets/site-header-CLzro3EY.js","assets/use-notifications-DLwVzHk4.js","assets/animated-container-D5obiq7b.js","assets/animation-variants-DxvUkNuY.js","assets/user-check-BaAUee9p.js","assets/filter-select-Mn9EK1eh.js","assets/match-activity-chart-DN_nEaV9.js"])))=>i.map(i=>d[i]);
import{c as M,Z as Y,j as e,C as A,U as B,w as G,K as W,N as q,P as Q,Q as Z,R as J,e as I,b as $,d as C,f as X,B as _,ah as ee,r as m,t as x,ai as se,_ as E}from"./index-BhJxrXm-.js";import{S as ie,m as N}from"./site-header-CLzro3EY.js";import{S as D}from"./skeleton-n4fk542y.js";import{S as R,g as p}from"./animated-container-D5obiq7b.js";import{L as F,M as O,N as ne}from"./use-queries-Bkilzo1z.js";import{U as re,T as H}from"./user-check-BaAUee9p.js";import{F as S}from"./filter-select-Mn9EK1eh.js";import{s as ae,d as g,b}from"./animation-variants-DxvUkNuY.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],le=M("download",te);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],me=M("trending-down",oe);function v(s,n="number"){const i=typeof s=="string"?parseFloat(s):s;if(isNaN(i))return n==="currency"?"RM0":n==="percentage"?"0.0%":"0";switch(n){case"currency":return new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",minimumFractionDigits:0,maximumFractionDigits:0}).format(i);case"percentage":return`${i.toFixed(1)}%`;case"number":default:return new Intl.NumberFormat("en-US").format(i)}}function de(s,n){if(n===0)return{trend:"neutral",percentage:0};const i=(s-n)/n*100;return{trend:i>0?"up":i<0?"down":"neutral",percentage:Math.abs(i)}}function f(){return e.jsxDEV(A,{className:"relative overflow-hidden h-full flex flex-col border border-border",children:[e.jsxDEV(I,{className:"flex flex-row items-center justify-between space-y-0 pb-2 px-4 pt-4",children:[e.jsxDEV(D,{className:"h-3 w-20"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:51,columnNumber:9},this),e.jsxDEV(D,{className:"h-4 w-4 rounded"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:52,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:50,columnNumber:7},this),e.jsxDEV($,{className:"flex-1 px-4 pb-4",children:[e.jsxDEV(D,{className:"h-9 w-24 mb-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:55,columnNumber:9},this),e.jsxDEV(D,{className:"h-3 w-28"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:56,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:54,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:49,columnNumber:5},this)}function w({title:s,value:n,previousValue:i,icon:l,format:o="number",onClick:r,isLoading:u}){if(u)return e.jsxDEV(f,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:72,columnNumber:12},this);const d=typeof n=="string"?parseFloat(n):n,a=i?de(d,i):null;return e.jsxDEV(A,{className:C("relative overflow-hidden h-full flex flex-col border border-border",r&&"cursor-pointer hover:bg-muted/30 transition-colors"),onClick:r,onKeyDown:t=>{r&&(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),r())},role:r?"button":void 0,tabIndex:r?0:void 0,"aria-label":r?`${s}: ${v(n,o)}. Click for details.`:void 0,children:[e.jsxDEV(I,{className:"flex flex-row items-center justify-between space-y-0 pb-2 px-4 pt-4",children:[e.jsxDEV(X,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:s},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:98,columnNumber:9},this),e.jsxDEV(l,{className:"h-4 w-4 text-muted-foreground/60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:101,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:97,columnNumber:7},this),e.jsxDEV($,{className:"flex-1 px-4 pb-4",children:[e.jsxDEV("div",{className:"text-3xl font-semibold tracking-tight tabular-nums",children:v(n,o)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:104,columnNumber:9},this),a&&e.jsxDEV("div",{className:"flex items-center gap-1.5 mt-2 text-xs text-muted-foreground",children:[a.trend==="up"?e.jsxDEV(H,{className:"h-3 w-3 text-emerald-600"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:110,columnNumber:15},this):a.trend==="down"?e.jsxDEV(me,{className:"h-3 w-3 text-red-500"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:112,columnNumber:15},this):null,e.jsxDEV("span",{className:C(a.trend==="up"&&"text-emerald-600",a.trend==="down"&&"text-red-500"),children:a.percentage>0&&`${a.percentage.toFixed(1)}%`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:114,columnNumber:13},this),e.jsxDEV("span",{children:"vs last period"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:122,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:108,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:103,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:81,columnNumber:5},this)}function ce(){const[s,n]=Y.useState(null),{data:i,isLoading:l}=F(),{data:o,isLoading:r}=O(),u=l||r,a=s?(t=>{if(!i)return null;switch(t){case"totalUsers":return{title:"Total Users",value:i.totalUsers,previousValue:i.previousTotalUsers,description:"All registered users across all sports",breakdown:(o==null?void 0:o.map(c=>({label:`${c.sport} users`,value:c.users})))||[]};case"leagueParticipants":return{title:"League Participants",value:i.leagueParticipants,previousValue:i.previousLeagueParticipants,description:"Users actively participating in league matches",breakdown:(o==null?void 0:o.map(c=>({label:`${c.sport} participants`,value:c.payingMembers})))||[]};case"conversionRate":return{title:"Conversion Rate",value:i.conversionRate,description:"Percentage of users who become paying members",breakdown:[{label:"Total paying members",value:i.leagueParticipants},{label:"Total users",value:i.totalUsers},{label:"Conversion rate",value:`${i.conversionRate}%`}]};case"totalRevenue":return{title:"Total Revenue",value:i.totalRevenue,previousValue:i.previousRevenue,description:"Combined revenue from all sports and membership fees",breakdown:(o==null?void 0:o.map(c=>({label:`${c.sport} revenue`,value:`RM${c.revenue.toLocaleString()}`})))||[]}}})(s):null;return u?e.jsxDEV(R,{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",staggerDelay:.05,children:[e.jsxDEV(p,{children:e.jsxDEV(f,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:197,columnNumber:22},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:197,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(f,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:198,columnNumber:22},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:198,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(f,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:199,columnNumber:22},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:199,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(f,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:200,columnNumber:22},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:200,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:196,columnNumber:7},this):i?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(R,{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",staggerDelay:.05,children:[e.jsxDEV(p,{children:e.jsxDEV(w,{title:"Total Users",value:i.totalUsers,previousValue:i.previousTotalUsers,icon:B,format:"number",onClick:()=>n("totalUsers")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:220,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:219,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(w,{title:"League Participants",value:i.leagueParticipants,previousValue:i.previousLeagueParticipants,icon:re,format:"number",onClick:()=>n("leagueParticipants")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:230,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:229,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(w,{title:"Conversion Rate",value:i.conversionRate,icon:H,format:"percentage",onClick:()=>n("conversionRate")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:240,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:239,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(w,{title:"Total Revenue",value:i.totalRevenue,previousValue:i.previousRevenue,icon:G,format:"currency",onClick:()=>n("totalRevenue")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:249,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:248,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:218,columnNumber:7},this),e.jsxDEV(W,{open:!!s,onOpenChange:t=>!t&&n(null),children:e.jsxDEV(q,{className:"sm:max-w-[500px]",children:[e.jsxDEV(Q,{children:[e.jsxDEV(Z,{children:a==null?void 0:a.title},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:263,columnNumber:13},this),e.jsxDEV(J,{children:a==null?void 0:a.description},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:264,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:262,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-6 py-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Current Value"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:268,columnNumber:15},this),e.jsxDEV("span",{className:"text-2xl font-bold",children:v((a==null?void 0:a.value)||0,s==="totalRevenue"?"currency":s==="conversionRate"?"percentage":"number")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:269,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:267,columnNumber:13},this),(a==null?void 0:a.previousValue)&&e.jsxDEV("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border",children:[e.jsxDEV("span",{className:"text-sm font-medium text-muted-foreground",children:"Previous Period"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:283,columnNumber:17},this),e.jsxDEV("span",{className:"text-lg font-semibold",children:v(a.previousValue,s==="totalRevenue"?"currency":"number")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:286,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:282,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("h4",{className:"text-sm font-medium",children:"Breakdown"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:296,columnNumber:15},this),a==null?void 0:a.breakdown.map((t,c)=>e.jsxDEV("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:[e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:t.label},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:302,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm font-medium",children:typeof t.value=="number"?t.value.toLocaleString():t.value},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:303,columnNumber:19},this)]},c,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:298,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:295,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:266,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:261,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:260,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:217,columnNumber:5},this):e.jsxDEV("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:e.jsxDEV(A,{className:"col-span-full p-6 text-center text-muted-foreground border border-border",children:"No dashboard data available"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:209,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:208,columnNumber:7},this)}const ue=[{value:"monthly",label:"Monthly"},{value:"average",label:"Weekly Avg"}],pe=[{value:"1",label:"1mo"},{value:"3",label:"3mo"},{value:"6",label:"6mo"}];function he({chartRange:s,historyRange:n,lastUpdated:i,onChartRangeChange:l,onHistoryRangeChange:o,onRefresh:r,onExport:u}){const d=()=>i.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxDEV("div",{className:"px-6 md:px-8",children:e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-4 py-4",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("h2",{className:"text-lg font-medium",children:"Analytics"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:54,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(S,{value:s,onChange:a=>l(a||"monthly"),options:ue,placeholder:"View",triggerClassName:"w-[120px] h-9 text-sm border-border/50"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:56,columnNumber:13},this),e.jsxDEV(S,{value:n.toString(),onChange:a=>o(Number(a||"3")),options:pe,placeholder:"Period",triggerClassName:"w-[85px] h-9 text-sm border-border/50"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:63,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:55,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:53,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground hidden sm:inline",suppressHydrationWarning:!0,children:["Updated ",d()]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:75,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(_,{variant:"outline",size:"sm",onClick:r,className:"h-8 gap-1.5",children:[e.jsxDEV(ee,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:85,columnNumber:15},this),e.jsxDEV("span",{className:"hidden sm:inline",children:"Refresh"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:86,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:79,columnNumber:13},this),e.jsxDEV(_,{variant:"outline",size:"sm",onClick:u,className:"h-8 gap-1.5",children:[e.jsxDEV(le,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:94,columnNumber:15},this),e.jsxDEV("span",{className:"hidden sm:inline",children:"Export"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:95,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:88,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:78,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:74,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:51,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:49,columnNumber:5},this)}function P({isLoading:s,message:n="Updating charts..."}){return s?e.jsxDEV("div",{className:"absolute inset-0 z-10 bg-background/50 backdrop-blur-sm flex items-center justify-center rounded-lg",children:e.jsxDEV("div",{className:"flex flex-col items-center gap-2",children:[e.jsxDEV("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/chart-loading-overlay.tsx",lineNumber:15,columnNumber:9},this),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/chart-loading-overlay.tsx",lineNumber:16,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/chart-loading-overlay.tsx",lineNumber:14,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/chart-loading-overlay.tsx",lineNumber:13,columnNumber:5},this):null}function Ne({onChartRangeChange:s,onHistoryRangeChange:n,onRefresh:i,onShowKeyboardHelp:l}){m.useEffect(()=>{const o=r=>{if(!(r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement)){if(r.key==="?"&&r.shiftKey){r.preventDefault(),l==null||l();return}r.key==="m"||r.key==="M"?(r.preventDefault(),s("monthly")):r.key==="w"||r.key==="W"?(r.preventDefault(),s("average")):r.key==="1"?(r.preventDefault(),n(1)):r.key==="2"?(r.preventDefault(),n(3)):r.key==="3"?(r.preventDefault(),n(6)):(r.key==="r"||r.key==="R")&&(r.preventDefault(),i())}};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[s,n,i,l])}function L(s){return new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}function y(s,n){if(n===0)return"N/A";const i=(s-n)/n*100;return`${i>=0?"+":""}${i.toFixed(1)}%`}function ge(){const{data:s}=F(),{data:n}=O();return{exportDashboardCSV:m.useCallback(()=>{if(!s){x.error("Export failed",{description:"Dashboard data is not available yet"});return}const l=[{metric:"Total Users",current:s.totalUsers.toLocaleString(),previous:s.previousTotalUsers.toLocaleString(),change:y(s.totalUsers,s.previousTotalUsers)},{metric:"League Participants",current:s.leagueParticipants.toLocaleString(),previous:s.previousLeagueParticipants.toLocaleString(),change:y(s.leagueParticipants,s.previousLeagueParticipants)},{metric:"Conversion Rate",current:`${s.conversionRate}%`,previous:"N/A",change:"N/A"},{metric:"Total Revenue",current:L(s.totalRevenue),previous:L(s.previousRevenue),change:y(s.totalRevenue,s.previousRevenue)}];n&&n.length>0&&(l.push({metric:"",current:"",previous:"",change:""}),l.push({metric:"--- Sport Breakdown ---",current:"",previous:"",change:""}),n.forEach(t=>{l.push({metric:`${t.sport} - Users`,current:t.users.toLocaleString(),previous:"N/A",change:"N/A"}),l.push({metric:`${t.sport} - Paying Members`,current:t.payingMembers.toLocaleString(),previous:"N/A",change:"N/A"}),l.push({metric:`${t.sport} - Revenue`,current:L(t.revenue),previous:"N/A",change:"N/A"}),l.push({metric:`${t.sport} - Matches`,current:t.matches.toLocaleString(),previous:"N/A",change:"N/A"})}));const r=[["Metric","Current Period","Previous Period","Change"].join(","),...l.map(t=>[t.metric,t.current,t.previous,t.change].join(","))].join(`
`),u=new Blob([r],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),a=URL.createObjectURL(u);d.setAttribute("href",a),d.setAttribute("download",`dashboard-export-${new Date().toISOString().split("T")[0]}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),x.success("Export completed",{description:"Dashboard data exported as CSV"})},[s,n])}}const be=m.lazy(()=>E(()=>import("./user-growth-chart-DOLsrAZl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(s=>({default:s.UserGrowthChart}))),De=m.lazy(()=>E(()=>import("./sport-comparison-chart-B_jOq_x3.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9,10,11,12,15,16,17,18,19,20,21])).then(s=>({default:s.SportComparisonChart}))),fe=m.lazy(()=>E(()=>import("./match-activity-chart-DN_nEaV9.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,9,10,11,12,13,15])).then(s=>({default:s.MatchActivityChart})));function U(){return e.jsxDEV(D,{className:"w-full h-[420px] rounded-lg"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:28,columnNumber:10},this)}const T=300;function xe(){const[s,n]=m.useState("monthly"),[i,l]=m.useState(3),[o,r]=m.useState(new Date),[u,d]=m.useState(!1),[a,t]=m.useState(!1),c=se(),V=m.useCallback(()=>{c.invalidateQueries({queryKey:ne.dashboard.all}),r(new Date),x.success("Dashboard refreshed",{description:"All data has been updated"})},[c]),j=m.useCallback(h=>{t(!0),n(h);const z={monthly:"Monthly view",average:"Weekly average view"};x.info("Chart range updated",{description:`Switched to ${z[h]}`}),setTimeout(()=>t(!1),T)},[]),k=m.useCallback(h=>{t(!0),l(h),x.info("Historical range updated",{description:`Showing ${h} month${h>1?"s":""} of data`}),setTimeout(()=>t(!1),T)},[]);Ne({onChartRangeChange:j,onHistoryRangeChange:k,onRefresh:V,onShowKeyboardHelp:()=>d(!0)});const{exportDashboardCSV:K}=ge();return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ie,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:86,columnNumber:7},this),e.jsxDEV(N.div,{initial:"hidden",animate:"visible",variants:ae,className:"flex flex-1 flex-col",children:[e.jsxDEV(N.div,{variants:b,transition:g,className:"px-6 md:px-8 py-8 border-b border-border/50",children:[e.jsxDEV("h1",{className:"text-2xl font-semibold tracking-tight",children:"Dashboard"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:91,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:"Monitor key metrics and performance"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:92,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:90,columnNumber:9},this),e.jsxDEV(N.div,{variants:b,transition:g,className:"px-6 md:px-8 py-6",children:e.jsxDEV(ce,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:99,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:98,columnNumber:9},this),e.jsxDEV(N.div,{variants:b,transition:g,children:e.jsxDEV(he,{chartRange:s,historyRange:i,lastUpdated:o,showKeyboardHelp:u,onChartRangeChange:j,onHistoryRangeChange:k,onRefresh:V,onExport:K,onKeyboardHelpChange:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:104,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:103,columnNumber:9},this),e.jsxDEV(N.div,{variants:b,transition:g,className:"px-6 md:px-8 pb-6",children:e.jsxDEV("div",{className:"grid gap-6 lg:grid-cols-2 items-stretch relative",children:[e.jsxDEV(P,{isLoading:a},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:111,columnNumber:13},this),e.jsxDEV("div",{className:"min-h-[420px]",children:e.jsxDEV(m.Suspense,{fallback:e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:114,columnNumber:35},this),children:e.jsxDEV(be,{chartRange:s,historyRange:i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:115,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:114,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:113,columnNumber:13},this),e.jsxDEV("div",{className:"min-h-[420px]",children:e.jsxDEV(m.Suspense,{fallback:e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:120,columnNumber:35},this),children:e.jsxDEV(De,{chartRange:s,historyRange:i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:121,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:120,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:119,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:110,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:108,columnNumber:9},this),e.jsxDEV(N.div,{variants:b,transition:g,className:"px-6 md:px-8 pb-8",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(P,{isLoading:a},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:130,columnNumber:13},this),e.jsxDEV(m.Suspense,{fallback:e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:131,columnNumber:33},this),children:e.jsxDEV(fe,{chartRange:s,historyRange:i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:132,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:131,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:129,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:128,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:88,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:85,columnNumber:10},this)}const je=Object.freeze(Object.defineProperty({__proto__:null,component:xe},Symbol.toStringTag,{value:"Module"}));export{v as f,je as i};
