import{c as k,r as n,u as B,a as T,j as e,C as E,b as A,L as j,d as _,e as O,f as z,g as M,B as p,h as U,I as V,i as H,t as w,k as W,l as $,m as K}from"./index-24J_mi6z.js";import{A as G,a as J}from"./alert-CarQXpt7.js";import{E as Q}from"./eye-BEFr_6AA.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Y=k("circle-alert",X);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ee=k("eye-off",Z);function se({className:C,...P}){const[u,D]=n.useState(""),[c,h]=n.useState(""),[d,R]=n.useState(!1),[l,o]=n.useState(null),[r,x]=n.useState(!1),[b,y]=n.useState(!1),f=B(),g=n.useRef(null),{data:t,isPending:N}=T();n.useEffect(()=>{t!=null&&t.user&&!N&&(y(!0),f({to:"/dashboard",replace:!0}))},[t,N,f]),n.useEffect(()=>()=>{g.current&&g.current.abort()},[]),n.useEffect(()=>{const s=document.getElementById("email");s&&!t&&s.focus()},[t]);const S=async s=>{try{await W.put($.user.trackLogin,{userId:s},{timeout:3e3})}catch(i){console.warn("Failed to track login activity:",i)}},I=()=>u.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)?c?c.length<6?{type:"validation",message:"Password must be at least 6 characters"}:null:{type:"validation",message:"Password is required"}:{type:"validation",message:"Please enter a valid email address"}:{type:"validation",message:"Email is required"},L=s=>{if(s!=null&&s.message){const i=s.message.toLowerCase();if(i.includes("invalid")||i.includes("credential"))return{type:"auth",message:"Invalid email or password"};if(i.includes("network")||i.includes("fetch"))return{type:"network",message:"Network connection failed. Please check your internet connection."};if(i.includes("timeout"))return{type:"network",message:"Request timed out. Please try again."};if(i.includes("429")||i.includes("rate limit"))return{type:"server",message:"Too many login attempts. Please wait a moment and try again."};if(i.includes("500")||i.includes("502")||i.includes("503"))return{type:"server",message:"Server temporarily unavailable. Please try again shortly."}}return(s==null?void 0:s.status)===401||(s==null?void 0:s.status)===403?{type:"auth",message:"Invalid email or password"}:(s==null?void 0:s.status)===429?{type:"server",message:"Too many login attempts. Please wait before trying again."}:(s==null?void 0:s.status)>=500?{type:"server",message:"Server error. Please try again later."}:(s==null?void 0:s.code)==="ECONNABORTED"||(s==null?void 0:s.code)==="ERR_NETWORK"?{type:"network",message:"Connection failed. Please check your internet connection."}:{type:"unknown",message:(s==null?void 0:s.message)||"An unexpected error occurred. Please try again."}},F=async s=>{s.preventDefault(),o(null);const i=I();if(i){o(i);return}g.current=new AbortController,x(!0);try{const{data:a,error:m}=await H.signIn.email({email:u.trim(),password:c});if(m){const v=L(m);o(v),w.error(v.message);return}if(!(a!=null&&a.user))throw new Error("No user data returned");a.user.id&&S(a.user.id),w.success("Login successful! Redirecting..."),y(!0),f({to:"/dashboard"})}catch(a){const m=L(a);o(m),w.error(m.message)}finally{x(!1),g.current=null}},q=()=>{var s;o(null),D(""),h(""),(s=document.getElementById("email"))==null||s.focus()};return N||b?e.jsxDEV(E,{children:e.jsxDEV(A,{className:"flex items-center justify-center py-12",children:e.jsxDEV("div",{className:"flex flex-col items-center gap-3",children:[e.jsxDEV(j,{className:"h-8 w-8 animate-spin text-primary"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:271,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:b?"Redirecting to dashboard...":"Loading..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:272,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:270,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:269,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:268,columnNumber:7},this):e.jsxDEV("div",{className:_("flex flex-col gap-6",C),...P,children:e.jsxDEV(E,{children:[e.jsxDEV(O,{className:"text-center",children:[e.jsxDEV(z,{className:"text-xl",children:"Welcome back"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:285,columnNumber:11},this),e.jsxDEV(M,{children:"Login with your email and password"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:286,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:284,columnNumber:9},this),e.jsxDEV(A,{children:[l&&e.jsxDEV(G,{variant:"destructive",className:"mb-6",children:[e.jsxDEV(Y,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:292,columnNumber:15},this),e.jsxDEV(J,{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:l.message},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:294,columnNumber:17},this),l.type==="network"&&e.jsxDEV(p,{variant:"outline",size:"sm",onClick:q,className:"ml-2",children:"Retry"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:296,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:293,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:291,columnNumber:13},this),e.jsxDEV("form",{onSubmit:F,noValidate:!0,children:e.jsxDEV("div",{className:"grid gap-6",children:e.jsxDEV("div",{className:"grid gap-6",children:[e.jsxDEV("div",{className:"grid gap-3",children:[e.jsxDEV(U,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:313,columnNumber:19},this),e.jsxDEV(V,{id:"email",type:"email",value:u,onChange:s=>D(s.target.value),required:!0,placeholder:"Enter your email",disabled:r,autoComplete:"email",className:"focus-visible:ring-3 focus-visible:ring-[#FF690090] focus-visible:ring-offset-0","aria-invalid":(l==null?void 0:l.type)==="validation"?"true":"false"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:314,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:312,columnNumber:17},this),e.jsxDEV("div",{className:"grid gap-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV(U,{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:329,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:328,columnNumber:19},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(V,{id:"password",type:d?"text":"password",value:c,onChange:s=>h(s.target.value),required:!0,placeholder:"Enter your password",disabled:r,autoComplete:"current-password",className:"focus-visible:ring-3 focus-visible:ring-[#FF691090] focus-visible:ring-offset-0 pr-10","aria-invalid":(l==null?void 0:l.type)==="validation"?"true":"false"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:339,columnNumber:21},this),e.jsxDEV(p,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>R(!d),disabled:r,tabIndex:-1,"aria-label":d?"Hide password":"Show password",children:d?e.jsxDEV(ee,{className:"h-4 w-4","aria-hidden":"true"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:362,columnNumber:25},this):e.jsxDEV(Q,{className:"h-4 w-4","aria-hidden":"true"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:364,columnNumber:25},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:351,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:338,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:327,columnNumber:17},this),e.jsxDEV(p,{type:"submit",className:"w-full",disabled:r,children:r?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(j,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:372,columnNumber:23},this),"Logging in..."]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:371,columnNumber:21},this):"Login"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:369,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:311,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:310,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:309,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:288,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:283,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/login-form.tsx",lineNumber:282,columnNumber:5},this)}function ae(){return e.jsxDEV("div",{className:"bg-muted flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10",children:e.jsxDEV("div",{className:"flex w-full max-w-sm flex-col gap-6",children:[e.jsxDEV(K,{to:"/",className:"flex items-center gap-2 self-center font-medium",children:[e.jsxDEV("img",{src:"/dl-logo.svg",alt:"Deuce League Logo",className:"size-8",width:100,height:100},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/login.tsx?tsr-split=component",lineNumber:8,columnNumber:11},this),e.jsxDEV("span",{className:"text-2xl font-bold italic text-orange-500 tracking-tight",children:"DEUCE"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/login.tsx?tsr-split=component",lineNumber:9,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/login.tsx?tsr-split=component",lineNumber:7,columnNumber:9},this),e.jsxDEV(se,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/login.tsx?tsr-split=component",lineNumber:13,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/login.tsx?tsr-split=component",lineNumber:6,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/login.tsx?tsr-split=component",lineNumber:5,columnNumber:10},this)}export{ae as component};
