import{aZ as F,E as z,r as U,j as s,aQ as B,aR as W,B as y,d as C,q as _,aS as q,aj as J,ak as X,al as Y,am as Z,a_ as $,a$ as Q,b0 as G,an as H,b1 as K,aW as w,ao as T}from"./index-24J_mi6z.js";import{s as x}from"./subDays-BLJ7C8yZ.js";import{D as ee,a as se,b as ne,f as ae}from"./dropdown-menu-ziHghIVr.js";import{I as R}from"./IconDownload-DvOtba7Q.js";import{I}from"./IconFileText-0N2tpbjs.js";function O(e,n,r){return F(e,-1,r)}/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M8 11h8v7h-8z",key:"svg-2"}],["path",{d:"M8 15h8",key:"svg-3"}],["path",{d:"M11 11v7",key:"svg-4"}]],re=z("outline","file-spreadsheet","FileSpreadsheet",te),v=[{label:"Today",getValue:()=>({from:new Date,to:new Date})},{label:"Yesterday",getValue:()=>({from:x(new Date,1),to:x(new Date,1)})},{label:"Last 7 days",getValue:()=>({from:x(new Date,6),to:new Date})},{label:"Last 14 days",getValue:()=>({from:x(new Date,13),to:new Date})},{label:"Last 30 days",getValue:()=>({from:x(new Date,29),to:new Date})},{label:"Last 90 days",getValue:()=>({from:x(new Date,89),to:new Date})},{label:"This month",getValue:()=>({from:$(new Date),to:new Date})},{label:"Last month",getValue:()=>({from:$(O(new Date)),to:Q(O(new Date))})},{label:"This year",getValue:()=>({from:G(new Date),to:new Date})},{label:"Custom",getValue:()=>null}];function he({value:e,onChange:n,placeholder:r="Select date range",className:l,align:i="start",showPresets:t=!0,disabled:o=!1,fromDate:m,toDate:d=new Date,numberOfMonths:D=2}){const[c,h]=U.useState(!1),[p,f]=U.useState(),L=a=>{if(f(a),a==="Custom")return;const g=v.find(N=>N.label===a);if(g){const N=g.getValue();N&&(n==null||n(N))}},j=a=>{f("Custom"),n==null||n(a)},u=()=>e!=null&&e.from?e.to?w(e.from,"yyyy-MM-dd")===w(e.to,"yyyy-MM-dd")?w(e.from,"MMM d, yyyy"):`${w(e.from,"MMM d, yyyy")} - ${w(e.to,"MMM d, yyyy")}`:w(e.from,"MMM d, yyyy"):r,b=()=>{f(void 0),n==null||n(void 0)};return s.jsxDEV(B,{open:c,onOpenChange:h,children:[s.jsxDEV(W,{asChild:!0,children:s.jsxDEV(y,{id:"date-range-picker",variant:"outline",className:C("w-[280px] justify-start text-left font-normal",!e&&"text-muted-foreground",l),disabled:o,children:[s.jsxDEV(_,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:121,columnNumber:11},this),u()]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:111,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:110,columnNumber:7},this),s.jsxDEV(q,{className:"w-auto p-0",align:i,children:s.jsxDEV("div",{className:"flex",children:[t&&s.jsxDEV("div",{className:"border-r p-3 w-[150px]",children:[s.jsxDEV(J,{value:p,onValueChange:L,children:[s.jsxDEV(X,{className:"w-full",children:s.jsxDEV(Y,{placeholder:"Select preset"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:131,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:130,columnNumber:17},this),s.jsxDEV(Z,{children:v.map(a=>s.jsxDEV(H,{value:a.label,children:a.label},a.label,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:135,columnNumber:21},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:133,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:129,columnNumber:15},this),s.jsxDEV("div",{className:"mt-3 space-y-1",children:v.slice(0,-1).map(a=>s.jsxDEV(y,{variant:"ghost",size:"sm",className:C("w-full justify-start text-xs",p===a.label&&"bg-accent"),onClick:()=>L(a.label),children:a.label},a.label,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:143,columnNumber:19},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:141,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:128,columnNumber:13},this),s.jsxDEV("div",{className:"p-3",children:[s.jsxDEV(K,{mode:"range",defaultMonth:e==null?void 0:e.from,selected:e,onSelect:j,numberOfMonths:D,fromDate:m,toDate:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:160,columnNumber:13},this),s.jsxDEV("div",{className:"flex justify-end gap-2 pt-3 border-t",children:[s.jsxDEV(y,{variant:"ghost",size:"sm",onClick:b,children:"Clear"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:170,columnNumber:15},this),s.jsxDEV(y,{size:"sm",onClick:()=>h(!1),children:"Apply"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:177,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:169,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:159,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:126,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:125,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/date-range-picker.tsx",lineNumber:109,columnNumber:5},this)}function A(e,n){return n.split(".").reduce((r,l)=>{if(r&&typeof r=="object")return r[l]},e)}function le(e,n){const r=n.map(i=>`"${i.header.replace(/"/g,'""')}"`).join(","),l=e.map(i=>n.map(t=>{const o=A(i,t.key),m=t.formatter?t.formatter(o,i):o;return m==null?'""':`"${String(m).replace(/"/g,'""')}"`}).join(","));return[r,...l].join(`
`)}function ie(e,n,r){const l=r.replace(/[^a-zA-Z0-9]/g,"_").substring(0,31),i=n.map(o=>`<Cell ss:StyleID="header"><Data ss:Type="String">${P(o.header)}</Data></Cell>`).join(""),t=e.map(o=>`<Row>${n.map(d=>{const D=A(o,d.key),c=d.formatter?d.formatter(D,o):D;if(c==null)return'<Cell><Data ss:Type="String"></Data></Cell>';const p=typeof c=="number"&&!isNaN(c)?"Number":"String",f=String(c);return`<Cell><Data ss:Type="${p}">${P(f)}</Data></Cell>`}).join("")}</Row>`).join(`
`);return`<?xml version="1.0" encoding="UTF-8"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
  xmlns:o="urn:schemas-microsoft-com:office:office"
  xmlns:x="urn:schemas-microsoft-com:office:excel"
  xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">
  <Styles>
    <Style ss:ID="header">
      <Font ss:Bold="1"/>
      <Interior ss:Color="#CCCCCC" ss:Pattern="Solid"/>
    </Style>
  </Styles>
  <Worksheet ss:Name="${l}">
    <Table>
      <Row>${i}</Row>
      ${t}
    </Table>
  </Worksheet>
</Workbook>`}function P(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function k(e,n,r){const l=new Blob([e],{type:r}),i=URL.createObjectURL(l),t=document.createElement("a");t.href=i,t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(i)}function fe({data:e,columns:n,filename:r="export",formats:l=["csv","excel"],disabled:i=!1,onExportStart:t,onExportComplete:o,onExportError:m,className:d,variant:D="outline",size:c="default"}){const[h,p]=U.useState(!1),f=async u=>{if(e.length===0){m==null||m(new Error("No data to export"));return}p(!0),t==null||t();try{const b=new Date().toISOString().split("T")[0],a=`${r}_${b}`;switch(u){case"csv":{const g=le(e,n);k(g,`${a}.csv`,"text/csv;charset=utf-8");break}case"excel":{const g=ie(e,n,r);k(g,`${a}.xls`,"application/vnd.ms-excel");break}case"json":{const g=e.map(M=>{const S={};return n.forEach(V=>{const E=A(M,V.key);S[V.header]=V.formatter?V.formatter(E,M):E}),S}),N=JSON.stringify(g,null,2);k(N,`${a}.json`,"application/json");break}}o==null||o(u)}catch(b){m==null||m(b instanceof Error?b:new Error("Export failed"))}finally{p(!1)}},L={csv:s.jsxDEV(I,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:200,columnNumber:10},this),excel:s.jsxDEV(re,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:201,columnNumber:12},this),json:s.jsxDEV(I,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:202,columnNumber:11},this)},j={csv:"Export as CSV",excel:"Export as Excel",json:"Export as JSON"};return l.length===1?s.jsxDEV(y,{variant:D,size:c,className:d,disabled:i||h||e.length===0,onClick:()=>f(l[0]),children:[h?s.jsxDEV(T,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:222,columnNumber:11},this):s.jsxDEV(R,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:224,columnNumber:11},this),j[l[0]]]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:214,columnNumber:7},this):s.jsxDEV(ee,{children:[s.jsxDEV(se,{asChild:!0,children:s.jsxDEV(y,{variant:D,size:c,className:d,disabled:i||h||e.length===0,children:[h?s.jsxDEV(T,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:242,columnNumber:13},this):s.jsxDEV(R,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:244,columnNumber:13},this),"Export"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:235,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:234,columnNumber:7},this),s.jsxDEV(ne,{align:"end",children:l.map(u=>s.jsxDEV(ae,{onClick:()=>f(u),children:[L[u],j[u]]},u,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:251,columnNumber:11},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:249,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/shared/export-button.tsx",lineNumber:233,columnNumber:5},this)}export{he as D,fe as E};
