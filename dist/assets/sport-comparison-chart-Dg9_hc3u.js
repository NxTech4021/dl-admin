import{r as a,j as e,C as c,e as u,f,g as h,b as d,d as x}from"./index-BkrdirJj.js";import{C as E,a as V,X as U,Y as M,b as C,c as k,B as S}from"./chart-C62sWv_H.js";import{S as l}from"./skeleton-DlnWNXWc.js";import{S as R}from"./use-queries-m7g6rbxN.js";import{f as b}from"./index-Bmeo2fSu.js";import{B as $}from"./BarChart-DFrRim5I.js";import"./external-CBw6adHz.js";import"./coerce-D7_fDuSg.js";import"./league-schema-BPwUAuXp.js";import"./season-schema-B9VBdruD.js";import"./division-schema-C1GhWsht.js";import"./site-header-Kxze_Hjr.js";import"./use-notifications-DAD8UARx.js";import"./animated-container-D3g4z90-.js";import"./animation-variants-Don9j8OV.js";import"./user-check-Eabs4_Gw.js";import"./filter-select-BmR9Q8ze.js";const z={payingMembers:{label:"Paying Members",color:"var(--chart-sport-members)"},revenue:{label:"Revenue (RM)",color:"var(--chart-sport-revenue)"}};function B(){return e.jsxDEV(c,{className:"h-full flex flex-col border border-border",children:[e.jsxDEV(u,{className:"pb-0 pt-2 px-5 shrink-0",children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(l,{className:"h-5 w-36 mb-1"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:47,columnNumber:13},this),e.jsxDEV(l,{className:"h-3 w-48"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:48,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:46,columnNumber:11},this),e.jsxDEV(l,{className:"h-8 w-28"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:50,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:45,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:44,columnNumber:7},this),e.jsxDEV(d,{className:"flex-1 flex flex-col pt-4 px-5 pb-5 min-h-0",children:[e.jsxDEV("div",{className:"flex items-center gap-6 mb-5",children:[e.jsxDEV(l,{className:"h-4 w-28"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:55,columnNumber:11},this),e.jsxDEV(l,{className:"h-4 w-28"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:56,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:54,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 min-h-[280px]",children:e.jsxDEV(l,{className:"h-full w-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:59,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:58,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:53,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:43,columnNumber:5},this)}function se({chartRange:D="monthly",historyRange:g=3}){const[n,p]=a.useState("payingMembers"),{data:r,isLoading:w,error:L}=R(),N=(s,o)=>o==="revenue"?b(s,"currency"):b(s,"number"),v=s=>{if(!r)return[0,100];const o=r.map(A=>A[s]),m=Math.max(...o);if(!isFinite(m)||m<=0)return[0,100];const i=m*1.1;let t;return i<=10?t=Math.ceil(i/2)*2:i<=50?t=Math.ceil(i/10)*10:i<=200?t=Math.ceil(i/25)*25:i<=1e3?t=Math.ceil(i/100)*100:t=Math.ceil(i/500)*500,[0,t]},y=a.useMemo(()=>(r==null?void 0:r.reduce((s,o)=>s+o.payingMembers,0))??0,[r]),j=a.useMemo(()=>(r==null?void 0:r.reduce((s,o)=>s+o.revenue,0))??0,[r]);return w?e.jsxDEV(B,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:115,columnNumber:12},this):L||!r||r.length===0?e.jsxDEV(c,{className:"h-full flex flex-col border border-border",children:[e.jsxDEV(u,{className:"pb-0 pt-2 px-5 shrink-0",children:[e.jsxDEV(f,{className:"text-base font-medium",children:"Sport Comparison"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV(h,{className:"text-xs",children:"No data available"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:123,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:121,columnNumber:9},this),e.jsxDEV(d,{className:"flex-1 flex items-center justify-center px-5 min-h-0",children:e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"No sport comparison data available"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:126,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:125,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:120,columnNumber:7},this):e.jsxDEV(c,{className:"h-full flex flex-col border border-border",children:[e.jsxDEV(u,{className:"pb-4 pt-2 px-5 shrink-0",children:e.jsxDEV("div",{className:"flex items-start justify-between gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(f,{className:"text-base font-medium",children:"Sport Comparison"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:139,columnNumber:13},this),e.jsxDEV(h,{className:"text-xs",children:[D==="average"?"Weekly average":"Monthly"," for past ",g,"mo"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:140,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:138,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-1.5",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Members"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:146,columnNumber:15},this),e.jsxDEV("span",{className:"text-sm font-medium tabular-nums",children:y.toLocaleString()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:147,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:145,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-1.5",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Revenue"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:150,columnNumber:15},this),e.jsxDEV("span",{className:"text-sm font-medium tabular-nums",children:N(j,"revenue")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:151,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:149,columnNumber:13},this),e.jsxDEV("div",{className:"inline-flex items-center rounded-md bg-muted/60 p-0.5 shrink-0 border border-border/50",children:[e.jsxDEV("button",{onClick:()=>p("payingMembers"),className:x("inline-flex items-center justify-center rounded px-3 py-1.5 text-xs font-medium transition-all cursor-pointer h-8 touch-manipulation",n==="payingMembers"?"bg-background text-foreground shadow-sm border border-border/50":"text-foreground/70 hover:text-foreground"),children:"Members"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:154,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>p("revenue"),className:x("inline-flex items-center justify-center rounded px-3 py-1.5 text-xs font-medium transition-all cursor-pointer h-8 touch-manipulation",n==="revenue"?"bg-background text-foreground shadow-sm border border-border/50":"text-foreground/70 hover:text-foreground"),children:"Revenue"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:165,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:153,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:144,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:137,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:136,columnNumber:7},this),e.jsxDEV(d,{className:"flex-1 flex flex-col px-5 pb-5 min-h-0",children:e.jsxDEV("div",{className:"flex-1 min-h-[280px]",children:e.jsxDEV(E,{config:z,className:"h-full w-full",children:e.jsxDEV($,{accessibilityLayer:!0,data:r,margin:{left:10,right:10,top:10,bottom:25},children:[e.jsxDEV(V,{vertical:!1,strokeDasharray:"3 3",stroke:"var(--border)",strokeOpacity:.5},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:192,columnNumber:15},this),e.jsxDEV(U,{dataKey:"sport",tickLine:!1,axisLine:!1,tickMargin:8,tick:{fontSize:11},label:{value:"Sport",position:"bottom",offset:10,style:{fontSize:11,fill:"hsl(var(--muted-foreground))"}}},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:198,columnNumber:15},this),e.jsxDEV(M,{tickLine:!1,axisLine:!1,tickMargin:8,domain:v(n),tickFormatter:s=>n==="revenue"?s>=1e3?`${(s/1e3).toFixed(0)}k`:`${s}`:s.toString(),tick:{fontSize:11},width:45,label:{value:n==="payingMembers"?"Members":"Revenue (RM)",angle:-90,position:"insideLeft",offset:0,style:{fontSize:11,fill:"hsl(var(--muted-foreground))",textAnchor:"middle"}}},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:211,columnNumber:15},this),e.jsxDEV(C,{cursor:{fill:"hsl(var(--muted))",fillOpacity:.3},content:e.jsxDEV(k,{className:"w-[160px]",labelFormatter:s=>`${s}`,formatter:(s,o,m)=>{const i=m==null?void 0:m.payload;return[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:i==null?void 0:i.fill}},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:242,columnNumber:27},this),e.jsxDEV("span",{className:"text-sm font-medium tabular-nums",children:N(s,n)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:246,columnNumber:27},this)]},o,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:241,columnNumber:25},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:n==="payingMembers"?"Members":"Revenue"},`${o}-label`,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:250,columnNumber:25},this)]},indicator:"dot"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:235,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:232,columnNumber:15},this),e.jsxDEV(S,{dataKey:n,fill:`var(--color-${n})`,radius:[3,3,0,0],animationDuration:500,animationEasing:"ease-out"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:259,columnNumber:15},this)]},n,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:186,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:185,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:184,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:181,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/sport-comparison-chart.tsx",lineNumber:135,columnNumber:5},this)}export{se as SportComparisonChart};
