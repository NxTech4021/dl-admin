const x={"men's singles":1,"mens singles":1,"men singles":1,"women's singles":2,"womens singles":2,"women singles":2,"ladies singles":2,"men's doubles":3,"mens doubles":3,"men doubles":3,"women's doubles":4,"womens doubles":4,"women doubles":4,"ladies doubles":4,"mixed doubles":5,mixed:5};function y(o){if(!o)return 999;const s=o.toLowerCase().trim();return x[s]??999}function R(o){const s=o.map(n=>n!=null?Number(n):0).filter(n=>!isNaN(n));if(s.length===0||s.every(n=>n===0))return"Free";const m=s.some(n=>n===0),l=s.filter(n=>n>0);if(l.length===0)return"Free";const i=Math.min(...l),r=Math.max(...l),t=n=>`RM ${n.toFixed(2)}`;return m&&l.length>0?i===r?`Free - ${t(r)}`:`Free - ${t(r)}`:i===r?t(i):`${t(i)} - ${t(r)}`}function B(o){var m,l,i,r;if(!o||o.length===0)return[];const s=new Map;for(const t of o){const n=t.name,u=s.get(n);u?u.push(t):s.set(n,[t])}const g=[];for(const[t,n]of s){const u=[...new Set(n.map(e=>e.status).filter(Boolean))],F=n.filter(e=>e.category!=null&&e.category.id!=null).map(e=>({id:e.category.id,name:e.category.name??null,seasonId:e.id})).sort((e,a)=>y(e.name)-y(a.name)),c=new Map;for(const e of n)for(const a of e.leagues||[])c.has(a.id)||c.set(a.id,{id:a.id,name:a.name,sportType:a.sportType});const h=n.reduce((e,a)=>e+(a.registeredUserCount||0),0),w=n.map(e=>e.entryFee),D=R(w),d=n.map(e=>e.regiDeadline).filter(Boolean).map(e=>new Date(e)),M=d.length>0?new Date(Math.min(...d.map(e=>e.getTime()))):null,p=n.map(e=>e.startDate).filter(Boolean).map(e=>new Date(e)),f=n.map(e=>e.endDate).filter(Boolean).map(e=>new Date(e)),b={start:p.length>0?new Date(Math.min(...p.map(e=>e.getTime()))):null,end:f.length>0?new Date(Math.max(...f.map(e=>e.getTime()))):null},T=((m=n[0])==null?void 0:m.sportType)||((r=(i=(l=n[0])==null?void 0:l.leagues)==null?void 0:i[0])==null?void 0:r.sportType)||null;g.push({groupKey:t,name:t,seasons:n,aggregated:{totalPlayers:h,entryFeeDisplay:D,statuses:u,categories:F,leagues:Array.from(c.values()),earliestDeadline:M,dateRange:b,sportType:T}})}return g}export{B as g};
