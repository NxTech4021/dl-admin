const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/emoji-picker-react.esm-Cw-ZEtAL.js","assets/index-D98YVPTv.js","assets/index-6F8IYIcK.css"])))=>i.map(i=>d[i]);
import{c as Y,aj as os,ak as ds,al as us,am as Ee,an as Ue,ao as je,ap as Ve,aq as Ce,ar as Be,as as Ge,r as i,a9 as ne,j as e,at as He,au as qe,F as hs,av as Ke,a0 as gs,a1 as Ns,a2 as fs,a3 as xs,a4 as Ds,d as S,a as me,u as de,k as ee,l as se,t as $,K as be,N as pe,P as Ye,Q as We,aw as ae,R as bs,S as Qe,I as Xe,B as R,L as Ze,U as ie,ax as oe,ay as ps,p as ws,az as Ls,aA as we,V as ys,aB as vs,aC as Je,_ as As,aD as Es,M as Se,o as es,aE as Us}from"./index-D98YVPTv.js";import{k as js,l as Vs,n as Le,M as Cs,o as Ss,u as ss,P as ks,p as Ms,q as Ts,L as _s,j as Rs,m as C,r as ue,s as ns,S as ke}from"./site-header-S87R6eOd.js";import{T as Me,n as Te,o as _e,p as Re,w as ye,q as ts,r as as,s as Is,t as Fs}from"./use-notifications-Djew7tEo.js";import{A as P,a as O,b as z}from"./avatar-B8O5htyi.js";import{S as X}from"./skeleton-AhcMI11W.js";import{A as $s,a as Ps,b as Os,c as zs,d as Bs,e as Gs,f as Hs,g as qs}from"./alert-dialog-_LIJmeHR.js";import{D as Ks}from"./dollar-sign-C2r4wf3b.js";import{C as Ys}from"./circle-CuvHn_--.js";import{T as ge,U as Ws}from"./user-D9VR4BX1.js";import{s as Qs}from"./subDays-CyEN_IXW.js";import{P as Ne}from"./index-CsaKPHII.js";import{M as ls}from"./mail-BugwLlay.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fe=Y("circle-check-big",Xs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ie=Y("circle-x",Zs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],en=Y("map-pin",Js);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],Fe=Y("message-square-plus",sn);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],is=Y("phone",nn);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],an=Y("reply",tn);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],mn=Y("smile",ln);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rn=Y("square-pen",cn);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],dn=Y("video",on);function un(s,t,n){const l=os(),m=(n==null?void 0:n.locale)??l.locale??ds,a=js(s,t);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a}),[f,N]=us(n==null?void 0:n.in,...a>0?[t,s]:[s,t]),p=Vs((n==null?void 0:n.roundingMethod)??"round"),b=N.getTime()-f.getTime(),x=b/Ce,r=Ee(N)-Ee(f),h=(b-r)/Ce,c=n==null?void 0:n.unit;let g;if(c?g=c:x<1?g="second":x<60?g="minute":x<Ue?g="hour":h<je?g="day":h<Ve?g="month":g="year",g==="second"){const d=p(b/1e3);return m.formatDistance("xSeconds",d,o)}else if(g==="minute"){const d=p(x);return m.formatDistance("xMinutes",d,o)}else if(g==="hour"){const d=p(x/60);return m.formatDistance("xHours",d,o)}else if(g==="day"){const d=p(h/Ue);return m.formatDistance("xDays",d,o)}else if(g==="month"){const d=p(h/je);return d===12&&c!=="month"?m.formatDistance("xYears",1,o):m.formatDistance("xMonths",d,o)}else{const d=p(h/Ve);return m.formatDistance("xYears",d,o)}}function ve(s,t){return un(s,Le(s),t)}function hn(s,t){return Be(Ge(s,s),Le(s))}function gn(s,t){return Be(Ge(s,s),Qs(Le(s),1))}function $e(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function Nn(...s){return t=>{let n=!1;const l=s.map(m=>{const a=$e(m,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let m=0;m<l.length;m++){const a=l[m];typeof a=="function"?a():$e(s[m],null)}}}}function fn(...s){return i.useCallback(Nn(...s),s)}class xn extends i.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const l=n.offsetParent,m=Ss(l)&&l.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=m-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Dn({children:s,isPresent:t,anchorX:n,root:l}){const m=i.useId(),a=i.useRef(null),o=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=i.useContext(Cs),N=fn(a,s==null?void 0:s.ref);return i.useInsertionEffect(()=>{const{width:p,height:b,top:x,left:r,right:h}=o.current;if(t||!a.current||!p||!b)return;const c=n==="left"?`left: ${r}`:`right: ${h}`;a.current.dataset.motionPopId=m;const g=document.createElement("style");f&&(g.nonce=f);const d=l??document.head;return d.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${m}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${b}px !important;
            ${c}px !important;
            top: ${x}px !important;
          }
        `),()=>{d.contains(g)&&d.removeChild(g)}},[t]),ne.jsx(xn,{isPresent:t,childRef:a,sizeRef:o,children:i.cloneElement(s,{ref:N})})}const bn=({children:s,initial:t,isPresent:n,onExitComplete:l,custom:m,presenceAffectsLayout:a,mode:o,anchorX:f,root:N})=>{const p=ss(pn),b=i.useId();let x=!0,r=i.useMemo(()=>(x=!1,{id:b,initial:t,isPresent:n,custom:m,onExitComplete:h=>{p.set(h,!0);for(const c of p.values())if(!c)return;l&&l()},register:h=>(p.set(h,!1),()=>p.delete(h))}),[n,p,l]);return a&&x&&(r={...r}),i.useMemo(()=>{p.forEach((h,c)=>p.set(c,!1))},[n]),i.useEffect(()=>{!n&&!p.size&&l&&l()},[n]),o==="popLayout"&&(s=ne.jsx(Dn,{isPresent:n,anchorX:f,root:N,children:s})),ne.jsx(ks.Provider,{value:r,children:s})};function pn(){return new Map}const ce=s=>s.key||"";function Pe(s){const t=[];return i.Children.forEach(s,n=>{i.isValidElement(n)&&t.push(n)}),t}const H=({children:s,custom:t,initial:n=!0,onExitComplete:l,presenceAffectsLayout:m=!0,mode:a="sync",propagate:o=!1,anchorX:f="left",root:N})=>{const[p,b]=Ms(o),x=i.useMemo(()=>Pe(s),[s]),r=o&&!p?[]:x.map(ce),h=i.useRef(!0),c=i.useRef(x),g=ss(()=>new Map),[d,L]=i.useState(x),[D,y]=i.useState(x);Ts(()=>{h.current=!1,c.current=x;for(let A=0;A<D.length;A++){const E=ce(D[A]);r.includes(E)?g.delete(E):g.get(E)!==!0&&g.set(E,!1)}},[D,r.length,r.join("-")]);const w=[];if(x!==d){let A=[...x];for(let E=0;E<D.length;E++){const V=D[E],u=ce(V);r.includes(u)||(A.splice(E,0,V),w.push(V))}return a==="wait"&&w.length&&(A=w),y(Pe(A)),L(x),null}a==="wait"&&D.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:j}=i.useContext(_s);return ne.jsx(ne.Fragment,{children:D.map(A=>{const E=ce(A),V=o&&!p?!1:x===D||r.includes(E),u=()=>{if(g.has(E))g.set(E,!0);else return;let v=!0;g.forEach(k=>{k||(v=!1)}),v&&(j==null||j(),y(c.current),o&&(b==null||b()),l&&l())};return ne.jsx(bn,{isPresent:V,initial:!h.current||n?void 0:!1,custom:t,presenceAffectsLayout:m,mode:a,root:N,onExitComplete:V?void 0:u,anchorX:f,children:A},E)})})},wn=["online","away","busy","offline"],Oe={background:{online:"bg-green-500",away:"bg-yellow-500",busy:"bg-red-500",offline:"bg-gray-500"},text:{online:"text-green-600",away:"text-yellow-600",busy:"text-red-600",offline:"text-gray-600"},border:{online:"border-green-500",away:"border-yellow-500",busy:"border-red-500",offline:"border-gray-500"},ring:{online:"ring-green-500",away:"ring-yellow-500",busy:"ring-red-500",offline:"ring-gray-500"}},xe={AVATAR_SIZES:{MEDIUM:"w-10 h-10",LARGE:"w-12 h-12"}},J=(s,t="background")=>Oe[t][s]||Oe[t].offline,re=s=>s.charAt(0).toUpperCase()+s.slice(1),De={FADE_IN:"animate-in fade-in-0 duration-200",PULSE:"animate-pulse"},le={USER_STATUS:"online",AVATAR_FALLBACK:"?",UNKNOWN_USER:"Unknown User",EMPTY_MESSAGES:"No messages yet"};function Ln({user:s,onStatusChange:t,onSettingsClick:n,onLogoutClick:l,collapsed:m=!1}){const[a,o]=i.useState(le.USER_STATUS),[f,N]=i.useState(!1),p=(s==null?void 0:s.name)||(s==null?void 0:s.displayName)||le.UNKNOWN_USER,b=(s==null?void 0:s.email)||"",x=(s==null?void 0:s.image)||(s==null?void 0:s.photoURL)||"",r=p.charAt(0).toUpperCase()||le.AVATAR_FALLBACK,h=i.useCallback(c=>{o(c),t==null||t(c),console.log("User status changed to:",c)},[t]);return i.useCallback(()=>{N(!1),n==null||n()},[n]),i.useCallback(()=>{N(!1),l==null||l()},[l]),m?e.jsxDEV(Me,{children:e.jsxDEV(Te,{children:[e.jsxDEV(_e,{asChild:!0,children:e.jsxDEV("div",{className:"flex justify-center p-3",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(P,{className:xe.AVATAR_SIZES.MEDIUM,children:[e.jsxDEV(O,{src:x,alt:p},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:70,columnNumber:19},this),e.jsxDEV(z,{className:"text-sm font-medium",children:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:71,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:69,columnNumber:17},this),e.jsxDEV("span",{className:`absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full border-2 border-background ${J(a)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:76,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:68,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:67,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:66,columnNumber:11},this),e.jsxDEV(Re,{side:"right",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"font-medium",children:p},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:84,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground capitalize",children:re(a)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:85,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:83,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:82,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:65,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:64,columnNumber:7},this):e.jsxDEV(He,{open:f,onOpenChange:N,children:[e.jsxDEV(Me,{children:e.jsxDEV(Te,{children:[e.jsxDEV(_e,{asChild:!0,children:e.jsxDEV(qe,{asChild:!0,children:e.jsxDEV("div",{className:`flex items-center gap-3 p-3 cursor-pointer hover:bg-muted/50 rounded-lg transition-colors ${De.FADE_IN}`,children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(P,{className:xe.AVATAR_SIZES.MEDIUM,children:[e.jsxDEV(O,{src:x,alt:p},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:106,columnNumber:21},this),e.jsxDEV(z,{className:"text-sm font-medium",children:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:107,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:105,columnNumber:19},this),e.jsxDEV("span",{className:`absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full border-2 border-background ${J(a)} ${a==="online"?De.PULSE:""}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:112,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:104,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"font-medium text-sm truncate",children:p},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:119,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2 mt-1",children:e.jsxDEV(hs,{variant:"outline",className:`text-xs px-2 py-0.5 ${J(a,"text")} border-current`,children:re(a)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:123,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:122,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:118,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:102,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:101,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:100,columnNumber:11},this),e.jsxDEV(Re,{children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:p},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:136,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:b},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:137,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:135,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:134,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:99,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:98,columnNumber:7},this),e.jsxDEV(Ke,{className:`w-80 p-0 ${De.FADE_IN}`,align:"start",children:[e.jsxDEV("div",{className:"flex items-center gap-3 p-4 bg-muted/50",children:[e.jsxDEV(P,{className:xe.AVATAR_SIZES.LARGE,children:[e.jsxDEV(O,{src:x,alt:p},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:147,columnNumber:13},this),e.jsxDEV(z,{className:"text-lg font-medium",children:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:148,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:146,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"font-semibold text-base truncate",children:p},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:153,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground truncate",children:b},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:154,columnNumber:13},this),(s==null?void 0:s.username)&&e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["@",s.username]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:156,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:152,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:145,columnNumber:9},this),e.jsxDEV(Rs,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:161,columnNumber:9},this),e.jsxDEV("div",{className:"p-4 space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Status"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:166,columnNumber:13},this),e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${J(a)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:167,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:165,columnNumber:11},this),e.jsxDEV(gs,{value:a,onValueChange:h,children:[e.jsxDEV(Ns,{className:"w-full",children:e.jsxDEV(fs,{children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${J(a)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:176,columnNumber:19},this),e.jsxDEV("span",{className:"capitalize",children:re(a)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:179,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:175,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:174,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:173,columnNumber:13},this),e.jsxDEV(xs,{children:wn.map(c=>e.jsxDEV(Ds,{value:c,children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${J(c)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:187,columnNumber:21},this),e.jsxDEV("span",{className:"capitalize",children:re(c)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:190,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:186,columnNumber:19},this)},c,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:185,columnNumber:17},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:172,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:164,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:143,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:97,columnNumber:5},this)}const yn=({className:s,...t})=>e.jsxDEV("div",{className:S("flex flex-row items-center space-x-2 px-2.5 py-1.5",s),...t,children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:12,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex flex-col flex-grow space-y-1",children:[e.jsxDEV("div",{className:"w-[75%] h-2 rounded bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:16,columnNumber:9},void 0),e.jsxDEV("div",{className:"w-[50%] h-2 rounded bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:17,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:15,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:7,columnNumber:5},void 0),vn=(s,t)=>{const[n,l]=i.useState(!1);return i.useEffect(()=>{const m=window.matchMedia("(min-width: 768px)"),a=o=>l(o.matches);return m.addEventListener("change",a),a(m),()=>m.removeEventListener("change",a)},[]),n},An=(s,t=6)=>{if(!s)return"";const n=s.trim().split(/\s+/);return n.length<=t?s:n.slice(0,t).join(" ")+"..."},En=({conversation:s,currentUserId:t})=>{var p,b,x,r,h,c;const n=(s==null?void 0:s.type)==="group",l=n?(s==null?void 0:s.participants)||[]:((p=s==null?void 0:s.participants)==null?void 0:p.filter(g=>g.id!==t))||[],m=n?(s==null?void 0:s.displayName)||(s==null?void 0:s.name)||"Group Chat":((b=l[0])==null?void 0:b.name)||((x=l[0])==null?void 0:x.displayName)||le.UNKNOWN_USER,a=((r=s==null?void 0:s.lastMessage)==null?void 0:r.content)||"",o=An(a,6),f=(h=s==null?void 0:s.lastMessage)==null?void 0:h.createdAt,N=n&&((c=s==null?void 0:s.participants)==null?void 0:c.some(g=>g.status==="online"));return{group:n,displayName:m,displayText:o,participants:l,lastActivity:f,hasOnlineInGroup:N}},Un={dashboard:{chat:"/chat"}},jn=s=>s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2),Vn=s=>{const t=s.trim().split(" ");return t.length===1?t[0].slice(0,2).toUpperCase():t.slice(0,2).map(n=>n.charAt(0)).join("").toUpperCase()},Cn=({selected:s,conversation:t,onCloseMobile:n})=>{const{data:l}=me(),m=l==null?void 0:l.user,a=de(),o=vn(),{group:f,displayName:N,displayText:p,participants:b,lastActivity:x,hasOnlineInGroup:r}=En({conversation:t,currentUserId:m==null?void 0:m.id}),h=b[0],{name:c,photoURL:g,status:d}=h||{},L=i.useCallback(async()=>{try{!o&&n&&n(),a({to:`${Un.dashboard.chat}?id=${t.id}`})}catch(w){console.error(w)}},[t.id,o,n,a]),D=e.jsxDEV("div",{className:"relative flex-shrink-0",children:[e.jsxDEV(P,{className:"h-12 w-12",children:[e.jsxDEV(O,{src:t.avatarUrl||t.photoURL,alt:N},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:146,columnNumber:9},void 0),e.jsxDEV(z,{className:"text-sm bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:Vn(N)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:150,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:145,columnNumber:7},void 0),r&&e.jsxDEV("span",{className:"absolute bottom-0.5 right-0.5 h-3 w-3 rounded-full bg-green-500 ring-2 ring-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:155,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:144,columnNumber:5},void 0),y=e.jsxDEV("div",{className:"relative flex-shrink-0",children:[e.jsxDEV(P,{className:"h-12 w-12",children:[e.jsxDEV(O,{src:g||(h==null?void 0:h.photoURL),alt:N},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:163,columnNumber:9},void 0),e.jsxDEV(z,{className:"text-sm bg-muted font-medium",children:jn(N)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:167,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:162,columnNumber:7},void 0),d==="online"&&e.jsxDEV("span",{className:"absolute bottom-0.5 right-0.5 h-3 w-3 rounded-full bg-green-500 ring-2 ring-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:172,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:161,columnNumber:5},void 0);return e.jsxDEV(C.div,{onClick:L,whileTap:{scale:.98},transition:{duration:.1},className:S("flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors",s?"bg-muted":"hover:bg-muted/50"),children:[f?D:y,e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"font-semibold text-[15px] truncate",children:N},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:193,columnNumber:11},void 0),e.jsxDEV("span",{className:"text-xs text-muted-foreground/70 flex-shrink-0 ml-2",children:x?ve(new Date(x),{addSuffix:!1}):""},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:196,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:192,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-0.5",children:[e.jsxDEV("span",{className:"text-sm text-muted-foreground truncate",children:p||le.EMPTY_MESSAGES},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:205,columnNumber:11},void 0),e.jsxDEV(H,{children:t.unreadCount>0&&e.jsxDEV(C.span,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},transition:{type:"spring",stiffness:500,damping:25},className:"h-5 min-w-5 px-1.5 rounded-full bg-brand-light text-white text-xs font-medium flex items-center justify-center flex-shrink-0 ml-2",children:t.unreadCount>99?"99+":t.unreadCount},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:210,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:204,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:191,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:178,columnNumber:5},void 0)};function Sn(s){const[t,n]=i.useState([]),[l,m]=i.useState(!0),[a,o]=i.useState(null),{socket:f,isConnected:N}=ye(),p=i.useCallback(async()=>{var r,h,c,g;if(!s)return m(!1),[];try{m(!0),o(null);const d=await ee.get(se.chat.getThreads(s));let L=[];return d.data&&(d.data.success&&d.data.data?L=d.data.data:Array.isArray(d.data)?L=d.data:d.data.threads&&Array.isArray(d.data.threads)&&(L=d.data.threads)),n(L),L}catch(d){console.error("Error fetching threads:",d);const L=((h=(r=d.response)==null?void 0:r.data)==null?void 0:h.message)||((g=(c=d.response)==null?void 0:c.data)==null?void 0:g.error)||d.message||"Failed to fetch threads";return o(L),$.error("Failed to load chat threads"),n([]),[]}finally{m(!1)}},[s]);i.useEffect(()=>{if(!f||!N)return;const r=g=>{n(d=>[g.thread,...d]),$.success("New conversation started!")},h=g=>{n(d=>d.map(L=>L.id===g.threadId?{...L,messages:[g.lastMessage],updatedAt:new Date().toISOString()}:L))},c=g=>{n(d=>{const L=d.findIndex(w=>w.id===g.threadId);if(L===-1)return d;const D=[...d],y=D[L];return D[L]={...y,messages:[g],updatedAt:new Date().toISOString()},D.splice(L,1),D.unshift(D[L]?y:D[L]),[{...y,messages:[g],updatedAt:new Date().toISOString()},...d.filter(w=>w.id!==g.threadId)]})};return f.on("new_thread",r),f.on("thread_updated",h),f.on("new_message",c),()=>{f.off("new_thread",r),f.off("thread_updated",h),f.off("new_message",c)}},[f,N]),i.useEffect(()=>{p()},[p]);const b=i.useCallback((r,h)=>{n(c=>c.some(L=>L.id===r)?[{...c.find(L=>L.id===r),messages:[h],updatedAt:new Date().toISOString()},...c.filter(L=>L.id!==r)]:c)},[]),x=i.useCallback(r=>{n(h=>h.some(c=>c.id===r.id)?h:[r,...h])},[]);return{threads:t,loading:l,error:a,refetch:p,updateThreadLastMessage:b,addThreadOptimistically:x}}function kn(s){const[t,n]=i.useState([]),[l,m]=i.useState(!1),[a,o]=i.useState(null),{socket:f,isConnected:N,joinThread:p,leaveThread:b}=ye(),x=i.useRef(null),r=i.useCallback(async()=>{var d,L,D,y;if(!s){n([]);return}try{m(!0),o(null);const w=await ee.get(se.chat.getMessages(s));w.data?w.data.success&&w.data.data?n(Array.isArray(w.data.data)?w.data.data:[]):Array.isArray(w.data)?n(w.data):w.data.messages&&Array.isArray(w.data.messages)?n(w.data.messages):n([]):n([])}catch(w){console.error("Error fetching messages:",w);const j=((L=(d=w.response)==null?void 0:d.data)==null?void 0:L.message)||((y=(D=w.response)==null?void 0:D.data)==null?void 0:y.error)||w.message||"Failed to fetch messages";o(j),n([])}finally{m(!1)}},[s]),h=i.useCallback(async(d,L,D)=>{var y,w,j,A;if(s)try{const E={senderId:L,content:d};D&&(E.repliesToId=D);const V=await ee.post(se.chat.sendMessage(s),E);let u=null;if(V.data&&(V.data.success&&V.data.data?u=V.data.data:V.data.message?u=V.data.message:V.data.id&&(u=V.data)),u)return n(v=>[...v,u]),u}catch(E){console.error("Error sending message:",E);const V=((w=(y=E.response)==null?void 0:y.data)==null?void 0:w.message)||((A=(j=E.response)==null?void 0:j.data)==null?void 0:A.error)||E.message||"Failed to send message";throw $.error(V),E}},[s]),c=i.useCallback(async d=>{var D,y,w,j;if(!s)return;const L=[...t];try{return n(A=>A.map(E=>E.id===d?{...E,isDeleted:!0,deletedAt:new Date().toISOString(),content:"This message has been deleted"}:E)),await ee.delete(se.chat.deleteMessage(d)),$.success("Message deleted successfully"),!0}catch(A){n(L);const E=((y=(D=A.response)==null?void 0:D.data)==null?void 0:y.message)||((j=(w=A.response)==null?void 0:w.data)==null?void 0:j.error)||A.message||"Failed to delete message";throw $.error(E),A}},[s,t]);i.useEffect(()=>{if(!f||!N)return;const d=w=>{w.threadId===s&&n(j=>j.some(A=>A.id===w.id)?j:[...j,w])},L=w=>{w.threadId===s&&n(j=>j.map(A=>A.id===w.messageId?{...A,isDeleted:!0,deletedAt:new Date().toISOString(),content:"This message has been deleted"}:A))},D=w=>{},y=w=>{w.threadId===s&&n(j=>j.map(A=>A.id===w.messageId?{...A,readBy:[...A.readBy||[],{id:`${w.messageId}-${w.readerId}`,userId:w.readerId,messageId:w.messageId,readAt:new Date().toISOString(),user:{id:w.readerId,name:w.readerName}}]}:A))};return f.on("new_message",d),f.on("message_deleted",L),f.on("message_sent",D),f.on("message_read",y),()=>{f.off("new_message",d),f.off("message_deleted",L),f.off("message_sent",D),f.off("message_read",y)}},[f,N,s]),i.useEffect(()=>{if(!(!s||!N))return x.current&&x.current!==s&&b(x.current),p(s),x.current=s,()=>{s&&(b(s),x.current=null)}},[s,N,p,b]);const g=i.useCallback(async d=>{try{await ee.post(se.chat.markAsRead(d))}catch{}},[]);return i.useEffect(()=>{r()},[r]),{messages:t,loading:l,error:a,sendMessage:h,deleteMessage:c,markAsRead:g,refetch:r}}function ms(s){const[t,n]=i.useState([]),{socket:l,isConnected:m,sendTyping:a}=ye(),{data:o}=me(),f=o==null?void 0:o.user,N=i.useRef(void 0);i.useEffect(()=>()=>{N.current&&(clearTimeout(N.current),N.current=void 0),n([])},[s]),i.useEffect(()=>{if(!l||!m||!s)return;const b=x=>{x.threadId===s&&x.senderId!==(f==null?void 0:f.id)&&n(r=>x.isTyping?r.some(c=>c.userId===x.senderId)?r:[...r,{userId:x.senderId,userName:"Someone"}]:r.filter(h=>h.userId!==x.senderId))};return l.on("typing_status",b),()=>{l.off("typing_status",b)}},[l,m,s,f==null?void 0:f.id]);const p=i.useCallback(b=>{s&&(a(s,b),b?(N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{a(s,!1)},3e3)):N.current&&(clearTimeout(N.current),N.current=void 0))},[s,a]);return{typingUsers:t,setTyping:p}}function Mn(){const[s,t]=i.useState(!1),[n,l]=i.useState(null);return{createThread:i.useCallback(async a=>{var o,f,N,p;try{t(!0),l(null);const b=await ee.post(se.chat.createThread,a);if(b.data){let x=null;if(b.data.success&&b.data.data?x=b.data.data:b.data.thread?x=b.data.thread:b.data.id&&(x=b.data),x)return $.success("Thread created successfully"),x}throw new Error("Failed to create thread")}catch(b){console.error("Error creating thread:",b);const x=((f=(o=b.response)==null?void 0:o.data)==null?void 0:f.message)||((p=(N=b.response)==null?void 0:N.data)==null?void 0:p.error)||b.message||"Failed to create thread";throw l(x),$.error(x),b}finally{t(!1)}},[]),loading:s,error:n}}function Tn(s){const[t,n]=i.useState([]),[l,m]=i.useState(!1),[a,o]=i.useState(null),f=i.useCallback(async()=>{var N,p,b,x;if(!s){n([]);return}try{m(!0),o(null);const r=await ee.get(se.chat.getAvailableUsers(s));let h=[];r.data&&(r.data.success&&r.data.data?h=r.data.data:Array.isArray(r.data)?h=r.data:r.data.users&&Array.isArray(r.data.users)&&(h=r.data.users));const c=h.filter(g=>g.id!==s);n(c)}catch(r){console.error("Error fetching available users:",r);const h=((p=(N=r.response)==null?void 0:N.data)==null?void 0:p.message)||((x=(b=r.response)==null?void 0:b.data)==null?void 0:x.error)||r.message||"Failed to fetch users";o(h),n([])}finally{m(!1)}},[s]);return i.useEffect(()=>{f()},[f]),{users:t,loading:l,error:a,refetch:f}}const _n=(s,t)=>{if(t)return"Active now";if(!s)return"";try{const n=new Date(s);return`Active ${ns(n)} ago`}catch{return""}},Rn=()=>e.jsxDEV("div",{className:"flex items-center gap-3 p-3",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(X,{className:"h-10 w-10 rounded-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:46,columnNumber:7},void 0),e.jsxDEV(X,{className:"absolute bottom-0 right-0 h-3 w-3 rounded-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:47,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:45,columnNumber:5},void 0),e.jsxDEV("div",{className:"flex-1 space-y-1.5",children:[e.jsxDEV(X,{className:"h-4 w-32"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:50,columnNumber:7},void 0),e.jsxDEV(X,{className:"h-3 w-40"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:51,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:49,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:44,columnNumber:3},void 0);function In({open:s,onOpenChange:t,currentUserId:n,onThreadCreated:l,addThreadOptimistically:m}){const a=de(),[o,f]=i.useState(""),[N,p]=i.useState(null),{users:b,loading:x,error:r,refetch:h}=Tn(n),{createThread:c}=Mn(),g=i.useMemo(()=>{if(!o.trim())return b;const D=o.toLowerCase();return b.filter(y=>{var w,j;return y.name.toLowerCase().includes(D)||((w=y.username)==null?void 0:w.toLowerCase().includes(D))||((j=y.email)==null?void 0:j.toLowerCase().includes(D))})},[b,o]),d=async D=>{if(!(!n||N))try{p(D.id);const y={name:void 0,isGroup:!1,userIds:[n,D.id],createdBy:n},w=await c(y);w&&(m&&m(w),p(null),t(!1),f(""),a({to:"/chat",search:{id:w.id}}),l==null||l(),$.success(`Chat with ${D.name} started!`))}catch{$.error("Failed to start chat. Please try again."),p(null)}},L=()=>{N||(t(!1),f(""))};return e.jsxDEV(be,{open:s,onOpenChange:L,children:e.jsxDEV(pe,{className:"max-w-md h-[500px] flex flex-col p-0",children:[e.jsxDEV(Ye,{className:"px-6 pt-6 pb-4",children:[e.jsxDEV(We,{className:"flex items-center gap-2",children:[e.jsxDEV(ae,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:134,columnNumber:13},this),"Start New Chat"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:133,columnNumber:11},this),e.jsxDEV(bs,{children:"Click on a user to start chatting"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:137,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:132,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 space-y-4 flex-1 flex flex-col overflow-hidden",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Qe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:145,columnNumber:13},this),e.jsxDEV(Xe,{placeholder:"Search users...",value:o,onChange:D=>f(D.target.value),className:"pl-9",disabled:!!N},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:146,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:144,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV(ue,{className:"h-full",children:x?e.jsxDEV("div",{className:"space-y-2",children:Array.from({length:5}).map((D,y)=>e.jsxDEV(Rn,{},y,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:161,columnNumber:21},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:159,columnNumber:17},this):r?e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV("div",{className:"text-4xl mb-2",children:"âš ï¸"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:166,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm mb-2",children:"Failed to load users"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:167,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs mb-3",children:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:168,columnNumber:19},this),e.jsxDEV(R,{size:"sm",variant:"outline",onClick:h,children:"Try Again"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:169,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:165,columnNumber:17},this):g.length===0?e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV("div",{className:"text-4xl mb-2",children:o?"ðŸ”":"ðŸ‘¥"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:175,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm mb-1",children:o?"No users found":"No available users"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:178,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs",children:o?"Try a different search term":"All users already have conversations with you"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:181,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:174,columnNumber:17},this):e.jsxDEV("div",{className:"space-y-1",children:g.map(D=>{const y=N===D.id,w=_n(D.lastActiveAt,D.isOnline);return e.jsxDEV("div",{onClick:()=>!N&&d(D),className:S("flex items-center gap-3 p-3 rounded-md transition-colors",!N&&"cursor-pointer hover:bg-muted/50",N&&N!==D.id&&"opacity-50",y&&"bg-muted border border-brand-light/20"),children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(P,{className:"h-10 w-10",children:[e.jsxDEV(O,{src:D.image,alt:D.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:208,columnNumber:29},this),e.jsxDEV(z,{children:D.name.charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:209,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:207,columnNumber:27},this),e.jsxDEV("div",{className:S("absolute bottom-0 right-0 h-3 w-3 rounded-full border-2 border-background",D.isOnline?"bg-green-500":"bg-gray-400"),"aria-label":D.isOnline?"Online":"Offline"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:215,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:206,columnNumber:25},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"text-sm font-medium truncate",children:D.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:226,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsxDEV("span",{className:"truncate",children:D.username?`@${D.username}`:D.email},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:232,columnNumber:29},this),w&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"text-muted-foreground/50",children:"â€¢"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:239,columnNumber:33},this),e.jsxDEV("span",{className:S("flex-shrink-0",D.isOnline?"text-green-600 dark:text-green-500":"text-muted-foreground/70"),children:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:240,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:238,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:231,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:224,columnNumber:25},this),y&&e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxDEV(Ze,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:253,columnNumber:29},this),e.jsxDEV("span",{children:"Creating chat..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:254,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:252,columnNumber:27},this)]},D.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:195,columnNumber:23},this)})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:189,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:157,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:156,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:142,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 py-4 border-t flex justify-end",children:e.jsxDEV(R,{variant:"outline",onClick:L,disabled:!!N,children:N?"Creating...":"Cancel"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:268,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:267,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:131,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:130,columnNumber:5},this)}const Fn=()=>{const[s,t]=i.useState(!1);return i.useEffect(()=>{const n=window.matchMedia("(min-width: 768px)"),l=m=>t(m.matches);return n.addEventListener("change",l),l(n),()=>n.removeEventListener("change",l)},[]),s},$n=()=>{const[s,t]=i.useState(!1),[n,l]=i.useState(!1);return{collapseDesktop:s,onCollapseDesktop:()=>t(m=>!m),onCloseDesktop:()=>t(!1),openMobile:n,onOpenMobile:()=>l(!0),onCloseMobile:()=>l(!1)}},Pn=(s=!1)=>{const[t,n]=i.useState(s);return{value:t,onTrue:()=>n(!0),onFalse:()=>n(!1),onToggle:()=>n(l=>!l)}};function ze({loading:s,user:t,conversations:n,selectedConversationId:l,onConversationSelect:m,onThreadCreated:a,forceMobileList:o=!1,addThreadOptimistically:f}){de();const N=Fn(),{openMobile:p,onOpenMobile:b,onCloseMobile:x}=$n(),{value:r,onTrue:h,onFalse:c}=Pn(!1),[g,d]=i.useState(""),[L,D]=i.useState(n);i.useEffect(()=>{if(!g.trim())D(n);else{const M=n.filter(U=>{var K;const F=U.displayName||"",W=((K=U.participants)==null?void 0:K.map(q=>q.displayName||q.name||"").join(" "))||"";return(F+" "+W).toLowerCase().includes(g.toLowerCase())});D(M)}},[g,n]),i.useEffect(()=>{g.trim()||D(n)},[n,g]);const y=i.useCallback(()=>{N||x(),h()},[N,x,h]),w=i.useCallback(M=>{d(M)},[]),j=i.useCallback(()=>{d("")},[]),A=i.useCallback(async()=>{await(a==null?void 0:a())},[a]),E=()=>e.jsxDEV(R,{onClick:b,variant:"ghost",className:"fixed left-0 top-[68px] md:top-[84px] z-50 h-11 w-11 rounded-r-lg bg-primary text-primary-foreground shadow-lg hover:bg-primary/90 md:hidden transition-all","aria-label":"Open chat navigation",children:e.jsxDEV(ie,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:174,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:168,columnNumber:5},this),V=()=>e.jsxDEV(e.Fragment,{children:Array.from({length:8},(M,U)=>e.jsxDEV(yn,{},`skeleton-${U}`,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:181,columnNumber:9},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:179,columnNumber:5},this),u=()=>e.jsxDEV(C.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.3,ease:[.4,0,.2,1]},className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsxDEV(Fe,{className:"w-6 h-6 text-muted-foreground/60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:194,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:193,columnNumber:7},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-2",children:g?"No conversations found":"No conversations yet"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:196,columnNumber:7},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground/70",children:g?"Try a different search term":"Start a new conversation"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:199,columnNumber:7},this),!g&&e.jsxDEV(R,{variant:"outline",size:"sm",className:"mt-4",onClick:y,children:[e.jsxDEV(Fe,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:211,columnNumber:11},this),"New Message"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:205,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:187,columnNumber:5},this),v=()=>e.jsxDEV(e.Fragment,{children:L.length>0?e.jsxDEV(C.div,{initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.04}}},children:L.map(M=>e.jsxDEV(C.div,{variants:{hidden:{opacity:0,x:-8},visible:{opacity:1,x:0}},transition:{duration:.25,ease:[.4,0,.2,1]},children:e.jsxDEV(Cn,{conversation:M,selected:M.id===l,onCloseMobile:o?void 0:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:238,columnNumber:15},this)},M.id,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:230,columnNumber:13},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:221,columnNumber:9},this):u()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:219,columnNumber:5},this),k=()=>e.jsxDEV("div",{className:"flex items-center justify-between px-4 min-h-[68px] border-b",children:[e.jsxDEV(Ln,{user:t},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:254,columnNumber:7},this),e.jsxDEV(R,{size:"icon",variant:"ghost",onClick:y,className:"rounded-full h-9 w-9",children:e.jsxDEV(rn,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:261,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:255,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:253,columnNumber:5},this),T=()=>e.jsxDEV("div",{className:"px-3 py-2",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Qe,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:269,columnNumber:9},this),e.jsxDEV(Xe,{value:g,onChange:M=>w(M.target.value),placeholder:"Search",className:"pl-10 h-9 rounded-full bg-muted/50 border-0 focus-visible:ring-0 text-sm","aria-label":"Search conversations"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:270,columnNumber:9},this),e.jsxDEV(H,{children:g&&e.jsxDEV(C.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},children:e.jsxDEV(R,{variant:"ghost",size:"sm",className:"absolute right-1.5 top-1/2 -translate-y-1/2 h-6 w-6 p-0 text-muted-foreground hover:text-foreground rounded-full",onClick:j,"aria-label":"Clear search",children:"Ã—"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:285,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:279,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:277,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:268,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:267,columnNumber:5},this),I=()=>e.jsxDEV("div",{className:"h-full flex flex-col",children:[k(),T(),e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV(ue,{className:"h-full",children:s?V():v()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:311,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:310,columnNumber:7},this),e.jsxDEV(In,{open:r,onOpenChange:c,currentUserId:t==null?void 0:t.id,onThreadCreated:A,addThreadOptimistically:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:316,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:302,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[!N&&!o&&E(),N||o?e.jsxDEV("div",{className:"h-full w-full flex flex-col",children:I()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:332,columnNumber:9},this):e.jsxDEV(ts,{open:p,onOpenChange:x,children:e.jsxDEV(as,{side:"left",className:"p-0 border-r-0 w-[320px]",children:I()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:337,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:336,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:328,columnNumber:5},this)}function On({participants:s=[],conversation:t,onDetailsClick:n,onBack:l}){var h;const m=(t==null?void 0:t.type)==="group",a=s.find(c=>!c.isCurrentUser),o=c=>{const g=c.trim().split(" ");return g.length===1?g[0].slice(0,2).toUpperCase():g.slice(0,2).map(d=>d.charAt(0)).join("").toUpperCase()},f=c=>{switch(c){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"busy":return"bg-red-500";case"offline":default:return"bg-gray-400"}},N=c=>c?`Last seen ${ns(new Date(c),{addSuffix:!0})}`:"Last seen recently",p=((h=t==null?void 0:t.participants)==null?void 0:h.length)||s.length,b=((t==null?void 0:t.participants)||s).filter(c=>c.status==="online").length,x=e.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(P,{className:"h-9 w-9 md:h-10 md:w-10",children:[e.jsxDEV(O,{src:(t==null?void 0:t.photoURL)||(t==null?void 0:t.avatarUrl),alt:(t==null?void 0:t.displayName)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:91,columnNumber:11},this),e.jsxDEV(z,{className:"text-sm bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:o((t==null?void 0:t.displayName)||(t==null?void 0:t.name)||"Group")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:95,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:90,columnNumber:9},this),b>0&&e.jsxDEV("div",{className:"absolute bottom-0 right-0 h-3 w-3 bg-green-500 rounded-full border-2 border-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:102,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:89,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h3",{className:"text-sm md:text-[15px] font-semibold truncate",children:(t==null?void 0:t.displayName)||(t==null?void 0:t.name)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:108,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-1 text-[10px] md:text-xs text-muted-foreground",children:[e.jsxDEV(ie,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:112,columnNumber:11},this),e.jsxDEV("span",{children:[p," members",b>0&&e.jsxDEV("span",{className:"ml-1",children:["â€¢ ",b," online"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:116,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:113,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:111,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:107,columnNumber:7},this),e.jsxDEV(oe,{className:"h-4 w-4 text-muted-foreground/50 flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:125,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:87,columnNumber:5},this),r=e.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(P,{className:"h-9 w-9 md:h-10 md:w-10",children:[e.jsxDEV(O,{src:(a==null?void 0:a.photoURL)||(a==null?void 0:a.avatarUrl)||(t==null?void 0:t.photoURL),alt:(a==null?void 0:a.name)||(a==null?void 0:a.displayName)||(t==null?void 0:t.displayName)||"User"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:134,columnNumber:11},this),e.jsxDEV(z,{children:((a==null?void 0:a.name)||(a==null?void 0:a.displayName)||(t==null?void 0:t.displayName)||"U").charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:138,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:133,columnNumber:9},this),e.jsxDEV("div",{className:S("absolute bottom-0 right-0 h-3 w-3 rounded-full border-2 border-background",f(a==null?void 0:a.status))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:144,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:132,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h3",{className:"text-sm md:text-[15px] font-semibold truncate",children:(a==null?void 0:a.name)||(a==null?void 0:a.displayName)||(t==null?void 0:t.displayName)||"Unknown User"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:152,columnNumber:9},this),e.jsxDEV("p",{className:"text-[10px] md:text-xs text-muted-foreground truncate",children:(a==null?void 0:a.status)==="offline"?N(a.lastActivity):e.jsxDEV("span",{className:"capitalize",children:(a==null?void 0:a.status)||"online"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:159,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:155,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:151,columnNumber:7},this),e.jsxDEV(oe,{className:"h-4 w-4 text-muted-foreground/50 flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:168,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:130,columnNumber:5},this);return e.jsxDEV("div",{className:"flex items-center gap-2 w-full",children:[l&&e.jsxDEV(C.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.2},className:"md:hidden",children:e.jsxDEV(R,{variant:"ghost",size:"icon",onClick:c=>{c.stopPropagation(),l()},className:"h-11 w-11 rounded-full flex-shrink-0","aria-label":"Back to conversations",children:e.jsxDEV(ps,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:192,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:182,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:176,columnNumber:9},this),e.jsxDEV("div",{className:S("flex items-center gap-2 md:gap-3 flex-1 py-1 px-2 -mx-2 rounded-xl transition-colors",n&&"cursor-pointer hover:bg-muted/50 active:bg-muted/70"),onClick:n,role:n?"button":void 0,tabIndex:n?0:void 0,onKeyDown:n?c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),n())}:void 0,children:m?x:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:198,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:173,columnNumber:5},this)}function zn({message:s,participants:t,currentUserId:n}){return i.useMemo(()=>{var f;const m=t.find(N=>N.id===s.senderId)||{firstName:"Unknown",avatarUrl:""},a=s.senderId===n,o=s.contentType==="image";return{me:a,senderDetails:{firstName:((f=m.displayName)==null?void 0:f.split(" ")[0])||m.firstName,avatarUrl:m.photoURL||m.avatarUrl},hasImage:o}},[s,t,n])}function Bn(s){switch(s==null?void 0:s.toUpperCase()){case"PICKLEBALL":return{label:"Pickleball",badgeColor:"#7C3AED",badgeBg:"#F3E8FF",buttonColor:"#7C3AED"};case"TENNIS":return{label:"Tennis",badgeColor:"#059669",badgeBg:"#ECFDF5",buttonColor:"#059669"};case"PADEL":return{label:"Padel",badgeColor:"#2563EB",badgeBg:"#EFF6FF",buttonColor:"#2563EB"};default:return{label:s||"Sport",badgeColor:"#6B7280",badgeBg:"#F3F4F6",buttonColor:"#6B7280"}}}function Gn({message:s,senderDetails:t}){var V;const n=s.matchData,{firstName:l,avatarUrl:m}=t,a=s.createdAt,o=i.useMemo(()=>Bn(n==null?void 0:n.sportType),[n==null?void 0:n.sportType]),f=u=>{try{const v=new Date(u);return we(v,"d MMM yyyy")}catch{return u}},N=u=>u?u.includes(" - ")?u.split(" - ")[0].trim():u.trim():"12:00 PM",p=u=>{if(!u)return"TBD";if(u.includes("M"))return u;const[v,k]=u.split(":"),T=parseInt(v),I=T>=12?"PM":"AM";return`${T%12||12}:${k} ${I}`},b=(u,v)=>{const k=N(u),[T,I]=k.split(" "),[M,U]=T.split(":").map(Number);let F=I==="PM"&&M!==12?M+12:M;I==="AM"&&M===12&&(F=0);const W=F*60+U+v*60,Q=Math.floor(W/60)%24,K=W%60,q=Q%12||12,_=Q>=12?"PM":"AM";return`${q}:${String(K).padStart(2,"0")} ${_}`},x=()=>{const u=n==null?void 0:n.fee,v=n==null?void 0:n.feeAmount;if(u==="FREE"||!u)return"Free";if(u==="SPLIT"&&v){const k=parseFloat(v),T=parseInt((n==null?void 0:n.numberOfPlayers)||"2",10);return`RM${T>0?(k/T).toFixed(2):"0.00"}/player`}return u==="FIXED"&&v?`RM${parseFloat(v).toFixed(2)}/player`:"Free"},r=()=>(n==null?void 0:n.matchType)==="SINGLES"||(n==null?void 0:n.numberOfPlayers)==="2"?"Singles":"Doubles",h=()=>(n==null?void 0:n.matchType)==="SINGLES"||(n==null?void 0:n.numberOfPlayers)==="2"?2:4,c=(n==null?void 0:n.participants)||[],g=c.filter(u=>u.invitationStatus==="ACCEPTED"||!u.invitationStatus),d=h(),L=n!=null&&n.time?N(n.time):"12:00 PM",D=p(L),y=b(L,(n==null?void 0:n.duration)||2),w=(n==null?void 0:n.isFriendly)||(n==null?void 0:n.isFriendlyRequest),j=r(),A=u=>{var v;return u.name?u.name:u.username?u.username:`User ${((v=u.userId)==null?void 0:v.slice(-6))||"???"}`},E=u=>{switch(u){case"ACCEPTED":return{icon:fe,color:"text-emerald-500",bg:"bg-emerald-50"};case"DECLINED":return{icon:Ie,color:"text-red-500",bg:"bg-red-50"};case"PENDING":return{icon:Ys,color:"text-amber-500",bg:"bg-amber-50"};default:return{icon:fe,color:"text-emerald-500",bg:"bg-emerald-50"}}};return e.jsxDEV("div",{className:"group flex gap-3 py-2 px-4 md:px-6",children:[e.jsxDEV(P,{className:"h-8 w-8 flex-shrink-0 mt-0.5 border border-border/50",children:[e.jsxDEV(O,{src:m,alt:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:155,columnNumber:9},this),e.jsxDEV(z,{className:"text-[11px] bg-muted font-medium text-muted-foreground",children:((V=l==null?void 0:l.charAt(0))==null?void 0:V.toUpperCase())||"?"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:156,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:154,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-col flex-1 min-w-0 max-w-[420px]",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsxDEV("span",{className:"text-[13px] text-muted-foreground",children:[e.jsxDEV("span",{className:"font-semibold text-foreground",children:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:165,columnNumber:13},this),w?" sent a friendly match request":" posted a league match"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:164,columnNumber:11},this),e.jsxDEV("span",{className:"text-[11px] text-muted-foreground/50 ml-auto tabular-nums",children:ve(new Date(a),{addSuffix:!0})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:168,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:163,columnNumber:9},this),e.jsxDEV("div",{className:"rounded-xl border bg-card overflow-hidden shadow-[0_1px_2px_rgba(0,0,0,0.05),0_1px_4px_rgba(0,0,0,0.04)]",style:{borderColor:`${o.badgeColor}25`},children:[e.jsxDEV("div",{className:"px-3.5 py-2.5 flex items-center justify-between border-b border-border/40",children:[e.jsxDEV("span",{className:"font-semibold text-[13px] text-foreground",children:[j," ",w?"Friendly":"League Match"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:180,columnNumber:13},this),e.jsxDEV("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded-full",style:{backgroundColor:`${o.badgeColor}15`,color:o.badgeColor},children:o.label},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:179,columnNumber:11},this),e.jsxDEV("div",{className:"px-3.5 py-3 flex gap-4",children:[e.jsxDEV("div",{className:"flex-1 space-y-1.5",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(en,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:199,columnNumber:17},this),e.jsxDEV("span",{className:"truncate",children:(n==null?void 0:n.location)||"TBD"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:200,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:198,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(ws,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("span",{children:f(n==null?void 0:n.date)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:202,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(Ls,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:207,columnNumber:17},this),e.jsxDEV("span",{children:[D," â€“ ",y]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:208,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:206,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(Ks,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:211,columnNumber:17},this),e.jsxDEV("span",{children:x()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:212,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:210,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:197,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col items-end gap-1.5 shrink-0",children:[e.jsxDEV("div",{className:S("flex items-center gap-1 text-[10px] font-medium px-2 py-0.5 rounded",n!=null&&n.courtBooked?"bg-emerald-50 text-emerald-600":"bg-red-50 text-red-500"),children:[e.jsxDEV("span",{children:n!=null&&n.courtBooked?"Court booked":"No court"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:227,columnNumber:17},this),n!=null&&n.courtBooked?e.jsxDEV(fe,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:229,columnNumber:19},this):e.jsxDEV(Ie,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:231,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:219,columnNumber:15},this),(n==null?void 0:n.isFriendlyRequest)&&(n==null?void 0:n.requestStatus)&&e.jsxDEV("div",{className:S("flex items-center gap-1 text-[10px] font-medium px-2 py-0.5 rounded",n.requestStatus==="ACCEPTED"&&"bg-emerald-50 text-emerald-600",n.requestStatus==="DECLINED"&&"bg-red-50 text-red-500",n.requestStatus==="EXPIRED"&&"bg-gray-100 text-gray-500",n.requestStatus==="PENDING"&&"bg-amber-50 text-amber-600"),children:[n.requestStatus==="ACCEPTED"&&"Accepted",n.requestStatus==="DECLINED"&&"Declined",n.requestStatus==="EXPIRED"&&"Expired",n.requestStatus==="PENDING"&&"Pending"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:237,columnNumber:17},this),(n==null?void 0:n.status)&&n.status!=="SCHEDULED"&&e.jsxDEV("div",{className:S("text-[10px] font-medium px-2 py-0.5 rounded",n.status==="COMPLETED"&&"bg-blue-50 text-blue-600",n.status==="CANCELLED"&&"bg-gray-100 text-gray-500",n.status==="ONGOING"&&"bg-amber-50 text-amber-600"),children:n.status},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:255,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:217,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:195,columnNumber:11},this),e.jsxDEV("div",{className:"px-3.5 py-2.5 border-t border-border/40 bg-muted/20",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("div",{className:"flex items-center gap-1.5 text-[11px] text-muted-foreground font-medium",children:[e.jsxDEV(ie,{className:"h-3.5 w-3.5 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:273,columnNumber:17},this),e.jsxDEV("span",{children:"Players"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:274,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:272,columnNumber:15},this),e.jsxDEV("span",{className:"text-[10px] text-muted-foreground tabular-nums",children:[g.length,"/",d]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:276,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:271,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-1",children:[c.map((u,v)=>{const k=E(u.invitationStatus),T=k.icon;return e.jsxDEV("div",{className:"flex items-center gap-2 py-1 px-2 rounded-md bg-background/60",children:[e.jsxDEV(P,{className:"h-5 w-5 border border-border/30",children:[e.jsxDEV(O,{src:u.image,alt:A(u)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:291,columnNumber:23},this),e.jsxDEV(z,{className:"text-[8px] bg-muted font-medium",children:A(u).charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:292,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:290,columnNumber:21},this),e.jsxDEV("div",{className:"flex-1 min-w-0 flex items-center gap-1.5",children:[e.jsxDEV("span",{className:"text-[12px] font-medium text-foreground truncate",children:A(u)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:297,columnNumber:23},this),u.role==="CREATOR"&&e.jsxDEV("span",{className:"text-[9px] text-muted-foreground bg-muted px-1.5 py-0.5 rounded font-medium",children:"Host"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:301,columnNumber:25},this),u.team&&e.jsxDEV("span",{className:"text-[9px] text-muted-foreground",children:["T",u.team==="team1"?"1":"2"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:306,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:296,columnNumber:21},this),e.jsxDEV(T,{className:S("h-3.5 w-3.5",k.color)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:311,columnNumber:21},this)]},u.id||u.userId||v,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:286,columnNumber:19},this)}),c.length<d&&Array.from({length:d-c.length}).map((u,v)=>e.jsxDEV("div",{className:"flex items-center gap-2 py-1 px-2 rounded-md border border-dashed border-border/50",children:[e.jsxDEV("div",{className:"h-5 w-5 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(ie,{className:"h-2.5 w-2.5 text-muted-foreground/40"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:324,columnNumber:23},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:323,columnNumber:21},this),e.jsxDEV("span",{className:"text-[11px] text-muted-foreground/50 italic",children:"Waiting for player..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:326,columnNumber:21},this)]},`empty-${v}`,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:319,columnNumber:19},this))]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:281,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:270,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:174,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:161,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:152,columnNumber:5},this)}const Hn=i.memo(Gn);function qn({message:s,participants:t,onOpenLightbox:n,onReply:l,onDelete:m}){var Q,K,q,_,Ae;const{data:a}=me(),o=a==null?void 0:a.user,[f,N]=i.useState(!1),[p,b]=i.useState(s.reactions||[]),[x,r]=i.useState(!1),{me:h,senderDetails:c,hasImage:g}=zn({message:s,participants:t,currentUserId:(o==null?void 0:o.id)||""}),{firstName:d,avatarUrl:L}=c,D=s.content||s.body||"",y=s.createdAt,w=s.isDeleted||!1,j=i.useMemo(()=>{if(s.messageType==="MATCH"&&s.matchData){if(typeof s.matchData=="string")try{return JSON.parse(s.matchData)}catch{return null}return s.matchData}return s.matchData&&typeof s.matchData=="object"?s.matchData:null},[s.messageType,s.matchData]);if(j!==null&&!w)return e.jsxDEV(Hn,{message:{...s,matchData:j},senderDetails:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:93,columnNumber:7},this);const E=()=>{l&&!w&&l(s)},V=()=>{N(!0)},u=()=>{m&&m(s.id),N(!1)},v=G=>{b(te=>{const he=te.find(B=>B.emoji===G);return he?he.isSelected?he.count===1?te.filter(B=>B.emoji!==G):te.map(B=>B.emoji===G?{...B,count:B.count-1,isSelected:!1}:B):te.map(B=>B.emoji===G?{...B,count:B.count+1,isSelected:!0}:B):[...te,{emoji:G,count:1,isSelected:!0}]})},T=((K=(Q=s.repliesTo)==null?void 0:Q.sender)==null?void 0:K.id)===(o==null?void 0:o.id)?"You":((_=(q=s.repliesTo)==null?void 0:q.sender)==null?void 0:_.name)||"User",I=s.repliesTo&&e.jsxDEV("div",{className:S("mb-2 pb-2 text-xs border-b",h?"border-white/20":"border-border"),children:[e.jsxDEV("span",{className:S("font-medium",h?"text-white/80":"text-foreground/70"),children:T},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:157,columnNumber:7},this),e.jsxDEV("p",{className:S("line-clamp-2 mt-0.5",h?"text-white/60":"text-muted-foreground"),children:s.repliesTo.isDeleted?e.jsxDEV("span",{className:"italic flex items-center gap-1",children:[e.jsxDEV(ge,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:173,columnNumber:13},this),"Message deleted"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:172,columnNumber:11},this):s.repliesTo.content},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:165,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:151,columnNumber:5},this),M=!h&&e.jsxDEV("div",{className:"mb-1",children:e.jsxDEV("p",{className:"text-xs text-muted-foreground font-medium",children:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:185,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:184,columnNumber:5},this),U=w?e.jsxDEV("div",{className:S("flex items-center gap-2 px-4 py-2.5 italic text-sm",h?"rounded-[20px] rounded-br-[6px] bg-brand-light/40 text-white/70":"rounded-[20px] rounded-bl-[6px] bg-muted/40 text-muted-foreground"),children:[e.jsxDEV(ge,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:199,columnNumber:7},this),e.jsxDEV("span",{children:"Message deleted"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:200,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:190,columnNumber:5},this):e.jsxDEV("div",{className:S("relative w-fit max-w-full transition-all duration-200",g?"p-0 bg-transparent rounded-2xl overflow-hidden":"px-4 py-2.5",h?["rounded-[20px] rounded-br-[6px]","bg-brand-light text-white"]:["rounded-[20px] rounded-bl-[6px]","bg-muted text-foreground"]),children:[I,g?e.jsxDEV(C.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.3},children:e.jsxDEV("img",{src:D,alt:"attachment",width:400,height:220,className:"min-h-[220px] w-full object-cover rounded-2xl cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>n==null?void 0:n(D)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:228,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:223,columnNumber:9},this):e.jsxDEV("p",{className:"text-sm whitespace-pre-wrap break-words leading-relaxed",children:D},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:238,columnNumber:9},this),e.jsxDEV(H,{children:p.length>0&&e.jsxDEV(C.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},className:"flex flex-wrap gap-1 mt-1.5 -mb-0.5",children:p.map(G=>e.jsxDEV(C.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>v(G.emoji),className:S("inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-xs transition-colors duration-150",h?"bg-white/15 hover:bg-white/25":"bg-muted-foreground/10 hover:bg-muted-foreground/20",G.isSelected&&"ring-1 ring-current/30"),children:[e.jsxDEV("span",{children:G.emoji},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:266,columnNumber:17},this),e.jsxDEV("span",{className:"font-medium",children:G.count},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:267,columnNumber:17},this)]},G.emoji,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:253,columnNumber:15},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:246,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:244,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:203,columnNumber:5},this),F=e.jsxDEV("div",{className:S("flex items-center mt-1",h?"justify-end":"justify-start"),children:e.jsxDEV("span",{className:"text-[10px] text-muted-foreground/60 px-1",children:ve(new Date(y),{addSuffix:!0})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:284,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:278,columnNumber:5},this),W=e.jsxDEV(H,{children:x&&!w&&e.jsxDEV(C.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.1},className:S("absolute -top-8 z-10 flex items-center gap-0.5","bg-background/95 backdrop-blur-sm rounded-full px-1 py-0.5 shadow-md border",h?"right-0":"left-0"),children:[e.jsxDEV(R,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-muted rounded-full",onClick:E,title:"Reply to message",children:e.jsxDEV(an,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:311,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:304,columnNumber:11},this),h&&e.jsxDEV(R,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-destructive/10 hover:text-destructive rounded-full",onClick:V,title:"Delete message",children:e.jsxDEV(ge,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:321,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:314,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:293,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:291,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:S("group flex gap-2 py-1 px-4 md:px-6",h?"flex-row-reverse":"flex-row",w&&"opacity-50"),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[!h&&e.jsxDEV(P,{className:"h-8 w-8 flex-shrink-0 mt-auto mb-1",children:[e.jsxDEV(O,{src:L,alt:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:343,columnNumber:13},this),e.jsxDEV(z,{className:"text-xs bg-muted font-medium",children:((Ae=d==null?void 0:d.charAt(0))==null?void 0:Ae.toUpperCase())||"?"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:344,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:342,columnNumber:11},this),e.jsxDEV("div",{className:S("flex flex-col flex-1 min-w-0 max-w-[75%]",h?"items-end":"items-start"),children:[M,e.jsxDEV("div",{className:"relative",children:[W,U]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:359,columnNumber:11},this),F]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:351,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:331,columnNumber:7},this),e.jsxDEV($s,{open:f,onOpenChange:N,children:e.jsxDEV(Ps,{children:[e.jsxDEV(Os,{children:[e.jsxDEV(zs,{children:"Delete Message"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:371,columnNumber:13},this),e.jsxDEV(Bs,{children:"Are you sure you want to delete this message? This action cannot be undone."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:372,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:370,columnNumber:11},this),e.jsxDEV(Gs,{children:[e.jsxDEV(Hs,{children:"Cancel"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:378,columnNumber:13},this),e.jsxDEV(qs,{onClick:u,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:379,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:377,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:369,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:368,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:330,columnNumber:5},this)}const Kn=i.memo(qn),Yn={initial:{y:0,opacity:.4},animate:s=>({y:[-1,1,-1],opacity:[.4,.8,.4],transition:{y:{duration:.6,repeat:1/0,ease:"easeInOut",delay:s*.12},opacity:{duration:.6,repeat:1/0,ease:"easeInOut",delay:s*.12}}})};function Wn({threadId:s}){const{data:t}=me(),n=t==null?void 0:t.user,{typingUsers:l}=ms(s),m=l.filter(o=>o.userId!==(n==null?void 0:n.id)),a=()=>m.length===1?`${m[0].userName} is typing`:m.length===2?`${m[0].userName} and ${m[1].userName} are typing`:`${m[0].userName} and ${m.length-1} others are typing`;return e.jsxDEV(H,{children:m.length>0&&e.jsxDEV(C.div,{initial:{opacity:0,y:8,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:8,height:0},transition:{duration:.2,ease:[.4,0,.2,1]},className:"px-4 py-2.5 overflow-hidden",children:e.jsxDEV("div",{className:"flex items-center gap-2.5",children:[e.jsxDEV("div",{className:"flex gap-0.5 items-center h-4",children:[0,1,2].map(o=>e.jsxDEV(C.div,{custom:o,variants:Yn,initial:"initial",animate:"animate",className:"w-1.5 h-1.5 bg-muted-foreground/60 rounded-full"},o,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:65,columnNumber:17},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:63,columnNumber:13},this),e.jsxDEV(C.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm text-muted-foreground/70",children:a()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:75,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:61,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:54,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:52,columnNumber:5},this)}const Qn=()=>e.jsxDEV("div",{className:"flex gap-3 px-4 py-2",children:[e.jsxDEV(X,{className:"h-8 w-8 rounded-full flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:39,columnNumber:5},void 0),e.jsxDEV("div",{className:"flex-1 space-y-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(X,{className:"h-3 w-16"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:42,columnNumber:9},void 0),e.jsxDEV(X,{className:"h-3 w-20"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:43,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:41,columnNumber:7},void 0),e.jsxDEV(X,{className:"h-4 w-48"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:45,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:40,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:38,columnNumber:3},void 0),Xn=({date:s})=>{const t=new Date(s),n=()=>hn(t)?"Today":gn(t)?"Yesterday":we(t,"MMMM d, yyyy");return e.jsxDEV("div",{className:"flex items-center justify-center py-3",children:e.jsxDEV("span",{className:"px-3 py-1 rounded-full bg-muted/60 text-xs font-medium text-muted-foreground",children:n()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:61,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:60,columnNumber:5},void 0)};function Zn({messages:s=[],participants:t=[],loading:n=!1,threadId:l,onReply:m,onDelete:a}){const o=i.useRef(null),[f,N]=i.useState(!0),[p,b]=i.useState(!1),x=s.reduce((c,g)=>{const d=we(new Date(g.createdAt),"yyyy-MM-dd");return c[d]||(c[d]=[]),c[d].push(g),c},{});i.useEffect(()=>{if(f&&o.current){const c=o.current.querySelector("[data-radix-scroll-area-viewport]");c&&(c.scrollTop=c.scrollHeight)}},[s,f]);const r=c=>{const{scrollTop:g,scrollHeight:d,clientHeight:L}=c.currentTarget,D=d-g-L<100;N(D),b(!D&&s.length>10)},h=()=>{if(o.current){const c=o.current.querySelector("[data-radix-scroll-area-viewport]");c&&c.scrollTo({top:c.scrollHeight,behavior:"smooth"})}};return n&&s.length===0?e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV("div",{className:"space-y-4 p-4",children:Array.from({length:5}).map((c,g)=>e.jsxDEV(Qn,{},g,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:123,columnNumber:13},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:121,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:120,columnNumber:7},this):s.length===0?e.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:e.jsxDEV(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},className:"text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(ae,{className:"w-8 h-8 text-muted-foreground/50"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:140,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:139,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-medium text-foreground/80 mb-2",children:"Start a conversation"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:142,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto",children:"Send a message to begin chatting"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:145,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:133,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:132,columnNumber:7},this):e.jsxDEV("div",{className:"flex-1 relative overflow-hidden bg-background",children:[e.jsxDEV(ue,{ref:o,className:"h-full",onScrollCapture:r,children:e.jsxDEV("div",{className:"min-h-full flex flex-col justify-end py-2",children:[Object.entries(x).map(([c,g])=>e.jsxDEV("div",{children:[e.jsxDEV(Xn,{date:g[0].createdAt},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:163,columnNumber:15},this),e.jsxDEV(H,{mode:"popLayout",children:g.map((d,L)=>e.jsxDEV(C.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.25,delay:L<3?L*.05:0,ease:[.4,0,.2,1]},layout:!0,children:e.jsxDEV(Kn,{message:d,participants:t,onReply:m,onDelete:a},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:178,columnNumber:21},this)},d.id,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:166,columnNumber:19},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:164,columnNumber:15},this)]},c,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:162,columnNumber:13},this)),e.jsxDEV(Wn,{threadId:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:191,columnNumber:11},this),e.jsxDEV(H,{children:n&&e.jsxDEV(C.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"flex items-center justify-center py-4",children:[e.jsxDEV(Ze,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:"Sending..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:196,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:194,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:160,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:155,columnNumber:7},this),e.jsxDEV(H,{children:p&&e.jsxDEV(C.button,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},transition:{duration:.2,ease:"easeOut"},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:h,className:"absolute bottom-4 right-4 bg-primary text-primary-foreground rounded-full p-2.5 shadow-lg hover:bg-primary/90 transition-colors","aria-label":"Scroll to bottom",children:e.jsxDEV("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:231,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:225,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:214,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:212,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:154,columnNumber:5},this)}const Jn=i.lazy(()=>As(()=>import("./emoji-picker-react.esm-Cw-ZEtAL.js"),__vite__mapDeps([0,1,2]))),Z=new Map;function et({selectedConversationId:s,disabled:t=!1,onSendMessage:n,replyingTo:l,onCancelReply:m}){var V;const[a,o]=i.useState(""),[f,N]=i.useState(!1),[p,b]=i.useState(!1),[x,r]=i.useState(!1),h=i.useRef(null),c=i.useRef(void 0),g=i.useRef(void 0),{setTyping:d}=ms(s);i.useEffect(()=>{const u=g.current;if(u&&u!==s&&(a.trim()?Z.set(u,a):Z.delete(u)),s&&s!==u){const v=Z.get(s)||"";o(v),setTimeout(()=>{h.current&&(h.current.style.height="auto",h.current.style.height=`${Math.min(h.current.scrollHeight,120)}px`)},0)}g.current=s},[s]),i.useEffect(()=>{s&&a.trim()?Z.set(s,a):s&&!a.trim()&&Z.delete(s)},[a,s]),i.useEffect(()=>{l&&h.current&&h.current.focus()},[l]);const L=i.useCallback(async()=>{if(!a.trim()||!n||f)return;const u=a.trim();o(""),N(!0),d(!1),s&&Z.delete(s);try{await n(u),setTimeout(()=>{var v;(v=h.current)==null||v.focus()},0)}catch(v){console.error("Failed to send message:",v),o(u),s&&Z.set(s,u)}finally{N(!1)}},[a,n,f,d,s]),D=i.useCallback(u=>{const v=u.metaKey||u.ctrlKey;if(v&&(u.key==="a"||u.key==="A")){u.stopPropagation();const k=u.currentTarget;k.setSelectionRange(0,k.value.length),u.preventDefault();return}if(v){u.stopPropagation();return}if(u.key==="Enter"&&!u.shiftKey){u.preventDefault(),L();return}if(u.key==="Escape"&&l&&m){u.preventDefault(),m();return}},[L,l,m]),y=i.useCallback(()=>{const u=h.current;u&&(u.style.height="auto",u.style.height=`${Math.min(u.scrollHeight,120)}px`)},[]),w=i.useCallback(u=>{const v=u.target.value;o(v),y(),v.trim()&&s?(d(!0),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{d(!1)},1e3)):d(!1)},[y,s,d]),j=i.useCallback(u=>{const v=u.emoji,k=h.current;if(k){const T=k.selectionStart,I=k.selectionEnd,M=a.slice(0,T)+v+a.slice(I);o(M),setTimeout(()=>{k.focus(),k.setSelectionRange(T+v.length,T+v.length)},0)}else o(T=>T+v);b(!1),y()},[a,y]);i.useEffect(()=>()=>{c.current&&clearTimeout(c.current),d(!1)},[s,d]);const A=t||!s||f,E=()=>{var u;return e.jsxDEV(H,{children:l&&e.jsxDEV(C.div,{initial:{opacity:0,y:20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:20,height:0},transition:{duration:.25,ease:[.4,0,.2,1]},className:"border-t bg-muted/20 px-4 py-3 overflow-hidden",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(C.div,{initial:{scaleY:0},animate:{scaleY:1},transition:{duration:.2,delay:.1},className:"w-1 bg-primary rounded-full h-12 flex-shrink-0 mt-1 origin-top"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:247,columnNumber:15},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[e.jsxDEV("p",{className:"text-xs font-medium text-primary",children:["Replying to ",((u=l.sender)==null?void 0:u.name)||"User"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:256,columnNumber:19},this),e.jsxDEV(C.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsxDEV(R,{size:"sm",variant:"ghost",onClick:m,className:"h-6 w-6 p-0 flex-shrink-0 hover:bg-muted-foreground/20 rounded-full",children:e.jsxDEV(Je,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:266,columnNumber:23},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:260,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:259,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:255,columnNumber:17},this),e.jsxDEV("div",{className:"bg-background/60 rounded-xl px-3 py-2 border border-border/50",children:e.jsxDEV("p",{className:"text-sm text-muted-foreground line-clamp-3",children:l.content||"Message"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:272,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:271,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:254,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:245,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:238,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:236,columnNumber:7},this)};return e.jsxDEV("div",{className:"bg-background",children:[E(),e.jsxDEV("div",{className:"border-t bg-background px-3 md:px-4 py-2 md:py-3",children:e.jsxDEV("div",{className:"flex items-end gap-2",children:[e.jsxDEV("div",{className:"flex-1 relative",children:[e.jsxDEV(ys,{ref:h,value:a,onChange:w,onKeyDown:D,onFocus:()=>r(!0),onBlur:()=>r(!1),placeholder:l?`Reply to ${((V=l.sender)==null?void 0:V.name)||"message"}...`:s?"Message":"Select a conversation",className:S("min-h-[44px] max-h-[120px] py-2.5 md:py-3 px-3 md:px-4 pr-10 md:pr-12","resize-none rounded-[22px]","bg-muted/50 border-0 focus:bg-muted","transition-colors focus-visible:ring-0 focus-visible:ring-offset-0","text-sm md:text-base"),disabled:A,rows:1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:294,columnNumber:13},this),e.jsxDEV(He,{open:p,onOpenChange:b,children:[e.jsxDEV(qe,{asChild:!0,children:e.jsxDEV(R,{variant:"ghost",size:"icon",className:"absolute right-2 bottom-1.5 h-8 w-8 rounded-full hover:bg-background/50",disabled:A,children:e.jsxDEV(mn,{className:"h-5 w-5 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:328,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:322,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:321,columnNumber:15},this),e.jsxDEV(Ke,{className:"w-auto p-0 border-none shadow-lg",side:"top",align:"end",sideOffset:8,children:e.jsxDEV(C.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.2,ease:"easeOut"},children:e.jsxDEV(i.Suspense,{fallback:e.jsxDEV("div",{className:"w-80 h-96 flex items-center justify-center",children:"Loading..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:342,columnNumber:39},this),children:e.jsxDEV(Jn,{onEmojiClick:j,autoFocusSearch:!1,height:400,width:350,previewConfig:{showPreview:!1},skinTonesDisabled:!0,searchDisabled:!1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:343,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:342,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:337,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:331,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:320,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:293,columnNumber:11},this),e.jsxDEV(C.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxDEV(R,{onClick:L,disabled:A||!a.trim(),size:"icon",className:S("h-11 w-11 rounded-full flex-shrink-0","bg-brand-light hover:bg-brand-light/90 text-white","disabled:opacity-40 disabled:cursor-not-allowed"),children:e.jsxDEV(vs,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:375,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:365,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:361,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:291,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:290,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:285,columnNumber:5},this)}function cs(s){const[t,n]=i.useState(!0),l=i.useCallback(()=>{n(!0)},[]),m=i.useCallback(()=>{n(!1)},[]),a=i.useCallback(()=>{n(o=>!o)},[]);return{value:t,onTrue:l,onFalse:m,onToggle:a,setValue:n}}function rs({participant:s,open:t,onClose:n}){var l;return e.jsxDEV(be,{open:t,onOpenChange:n,children:e.jsxDEV(pe,{className:"max-w-xs p-6 relative flex gap-4",children:[e.jsxDEV(Es,{asChild:!0,children:e.jsxDEV("button",{className:"absolute top-2 right-2 p-1 rounded hover:bg-muted/50",children:e.jsxDEV(Je,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:17,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:16,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:15,columnNumber:9},this),e.jsxDEV(P,{className:"h-24 w-24",children:[e.jsxDEV(O,{src:s.avatarUrl,alt:s.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:22,columnNumber:11},this),e.jsxDEV(z,{children:(l=s.name)==null?void 0:l.charAt(0)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:23,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:21,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col flex-1 justify-between",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("p",{className:"text-xs text-primary",children:s.role},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:28,columnNumber:13},this),e.jsxDEV("p",{className:"text-lg font-medium",children:s.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:29,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsxDEV(Se,{className:"h-4 w-4 flex-shrink-0 mr-1"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:31,columnNumber:15},this),s.address]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:30,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:27,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2 pt-3",children:[e.jsxDEV(R,{size:"icon",variant:"ghost",className:"bg-red-100 hover:bg-red-200",children:e.jsxDEV(is,{className:"h-4 w-4 text-red-600"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:42,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:37,columnNumber:13},this),e.jsxDEV(R,{size:"icon",variant:"ghost",className:"bg-sky-100 hover:bg-sky-200",children:e.jsxDEV(Se,{className:"h-4 w-4 text-sky-600"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:50,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:45,columnNumber:13},this),e.jsxDEV(R,{size:"icon",variant:"ghost",className:"bg-primary/10 hover:bg-primary/20",children:e.jsxDEV(ls,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:58,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:53,columnNumber:13},this),e.jsxDEV(R,{size:"icon",variant:"ghost",className:"bg-secondary/10 hover:bg-secondary/20",children:e.jsxDEV(dn,{className:"h-4 w-4 text-secondary"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:66,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:61,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:36,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:26,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:14,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:13,columnNumber:5},this)}rs.propTypes={onClose:Ne.func,open:Ne.bool,participant:Ne.object};const st=s=>s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2),nt=s=>{const t=s.trim().split(" ");return t.length===1?t[0].slice(0,2).toUpperCase():t.slice(0,2).map(n=>n.charAt(0)).join("").toUpperCase()};function tt({participants:s,conversation:t}){const[n,l]=i.useState(null),m=cs(),a=i.useCallback(r=>{l(r)},[]),o=()=>l(null),f=s.length,N=s.filter(r=>r.status==="online").length,p=e.jsxDEV("div",{className:"flex flex-col items-center py-5 px-3 border-b border-border",children:[e.jsxDEV(P,{className:"h-20 w-20 mb-3",children:[e.jsxDEV(O,{src:(t==null?void 0:t.photoURL)||(t==null?void 0:t.avatarUrl),alt:(t==null?void 0:t.displayName)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV(z,{className:"text-lg bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:nt((t==null?void 0:t.displayName)||(t==null?void 0:t.name)||"Group")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:79,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:74,columnNumber:7},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-center mb-1",children:(t==null?void 0:t.displayName)||(t==null?void 0:t.name)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:87,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsxDEV(ie,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:93,columnNumber:9},this),e.jsxDEV("span",{children:[f," members",N>0&&e.jsxDEV("span",{className:"ml-1",children:["â€¢ ",N," online"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:97,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:92,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:72,columnNumber:5},this),b=e.jsxDEV(R,{variant:"ghost",onClick:m.onToggle,className:"flex items-center justify-between w-full h-10 px-3 text-xs font-medium text-muted-foreground bg-muted/50",children:[e.jsxDEV("span",{children:["Members (",f,")"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:110,columnNumber:7},this),m.value?e.jsxDEV(es,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:112,columnNumber:9},this):e.jsxDEV(oe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:114,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:105,columnNumber:5},this),x=e.jsxDEV(ue,{className:"h-[224px]",children:e.jsxDEV("ul",{className:"divide-y divide-border",children:s.map(r=>e.jsxDEV("li",{onClick:()=>a(r),className:"flex items-center gap-3 px-3 py-2 cursor-pointer hover:bg-muted/70",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(P,{className:"h-8 w-8",children:[e.jsxDEV(O,{src:r.photoURL||r.avatarUrl,alt:r.name||r.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:130,columnNumber:17},this),e.jsxDEV(z,{children:st(r.name||r.displayName||"User")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:134,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:129,columnNumber:15},this),e.jsxDEV("span",{className:S("absolute bottom-0 right-0 h-2.5 w-2.5 rounded-full border border-background",r.status==="online"?"bg-green-500":r.status==="offline"?"bg-gray-400":"bg-yellow-500")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:139,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:128,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-sm font-medium truncate",children:r.name||r.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:153,columnNumber:17},this),r.isCurrentUser&&e.jsxDEV("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-1.5 py-0.5 rounded-full",children:"You"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:157,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:152,columnNumber:15},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground truncate",children:r.role||"Member"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:162,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:151,columnNumber:13},this)]},r.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:123,columnNumber:11},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:121,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:120,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[p,b,e.jsxDEV("div",{className:S("transition-all overflow-hidden",m.value?"max-h-[224px]":"max-h-0"),children:m.value&&x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:177,columnNumber:7},this),n&&e.jsxDEV(be,{open:!!n,onOpenChange:o,children:e.jsxDEV(pe,{children:[e.jsxDEV(Ye,{children:e.jsxDEV(We,{children:n.name||n.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:190,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:189,columnNumber:13},this),e.jsxDEV(rs,{participant:n,open:!!n,onClose:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:192,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:188,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:187,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:173,columnNumber:5},this)}const at=s=>s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2);function lt({participant:s,conversation:t}){const n=cs(),l=(s==null?void 0:s.name)||(s==null?void 0:s.displayName)||"Unknown User",m=(s==null?void 0:s.photoURL)||"unknown",a=(s==null?void 0:s.role)||"User",o=(s==null?void 0:s.phoneNumber)||"No phone number",f=(s==null?void 0:s.email)||"No email provided",N=(s==null?void 0:s.status)||"offline",p=e.jsxDEV("div",{className:"flex flex-col items-center py-5 px-3 border-b border-border",children:[e.jsxDEV("div",{className:"relative mb-3",children:[e.jsxDEV(P,{className:"h-20 w-20",children:[e.jsxDEV(O,{src:m,alt:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:37,columnNumber:11},this),e.jsxDEV(z,{className:"text-lg",children:at(l)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:38,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:36,columnNumber:9},this),e.jsxDEV("div",{className:S("absolute bottom-1 right-1 h-4 w-4 rounded-full border-2 border-background",J(N))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:43,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:35,columnNumber:7},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-center mb-1",children:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:49,columnNumber:7},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-1 capitalize",children:N},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:50,columnNumber:7},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:a},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:51,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:34,columnNumber:5},this),b=e.jsxDEV(R,{variant:"ghost",onClick:n.onToggle,className:"flex items-center justify-between w-full h-10 px-3 text-xs font-medium text-muted-foreground bg-muted/50",children:[e.jsxDEV("span",{children:"Information"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:61,columnNumber:7},this),n.value?e.jsxDEV(es,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:63,columnNumber:9},this):e.jsxDEV(oe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:65,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:56,columnNumber:5},this),x=e.jsxDEV("div",{className:S("overflow-hidden transition-all duration-200",n.value?"max-h-40":"max-h-0"),children:e.jsxDEV("div",{className:"flex flex-col px-3 py-2.5 space-y-3 text-sm",children:[e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(Ws,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:79,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Role"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:81,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm",children:a},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:82,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:80,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:78,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(ls,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:87,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col min-w-0",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Email"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:89,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm truncate",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:86,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(is,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:95,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Phone"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:97,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm",children:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:98,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:96,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:77,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:71,columnNumber:5},this);return e.jsxDEV("div",{children:[p,b,x]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:106,columnNumber:5},this)}function it({open:s,onOpenChange:t,conversation:n,participants:l}){if(!n)return null;const m=n.type==="group";return e.jsxDEV(ts,{open:s,onOpenChange:t,children:e.jsxDEV(as,{side:"right",className:"w-[380px] p-0 overflow-y-auto",children:[e.jsxDEV(Is,{className:"sr-only",children:e.jsxDEV(Fs,{children:m?"Group Details":"Contact Details"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:28,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:27,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col h-full",children:m?e.jsxDEV(tt,{participants:l,conversation:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:35,columnNumber:13},this):e.jsxDEV(lt,{participant:l.find(a=>!a.isCurrentUser),conversation:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:40,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:33,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:26,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:25,columnNumber:5},this)}function bt(){const s=de(),{id:t}=Us({from:"/_authenticated/chat/"}),{data:n}=me(),l=n==null?void 0:n.user,[m,a]=i.useState(null),[o,f]=i.useState(!1),{threads:N,loading:p,error:b,refetch:x,updateThreadLastMessage:r}=Sn(l==null?void 0:l.id),{messages:h,loading:c,sendMessage:g,deleteMessage:d,error:L}=kn(t||void 0);i.useEffect(()=>{b&&(console.error("Threads error:",b),$.error("Failed to load conversations")),L&&(console.error("Messages error:",L),$.error("Failed to load messages"))},[b,L]),i.useEffect(()=>{a(null)},[t]);const D=N.map(U=>{var q;const F=U.isGroup?U.name||"Unnamed Group":U.members.filter(_=>_.userId!==(l==null?void 0:l.id)).map(_=>_.user.name).join(", ")||"Unknown",W=U.isGroup?U.avatarUrl:(q=U.members.find(_=>_.userId!==(l==null?void 0:l.id)))==null?void 0:q.user.image,Q=U.members.map(_=>({id:_.userId,name:_.user.name,username:_.user.username,email:_.user.email,phoneNumber:_.user.phoneNumber,image:_.user.image,displayName:_.user.name,photoURL:_.user.image,status:"online",role:_.role,isCurrentUser:_.userId===(l==null?void 0:l.id)})),K=U.messages.length>0?{content:U.messages[0].content,createdAt:U.messages[0].createdAt,sender:{name:U.messages[0].sender.name}}:null;return{id:U.id,type:U.isGroup?"group":"direct",displayName:F,name:U.name,photoURL:W,avatarUrl:U.avatarUrl,isGroup:U.isGroup,participants:Q,messages:[],lastMessage:K,unreadCount:0}}),y=t?D.find(U=>U.id===t):null,w=(y==null?void 0:y.participants)||[];i.useEffect(()=>{f(!1)},[t]);const j=i.useCallback(()=>{f(!0)},[]),A=i.useCallback(U=>{a(U)},[]),E=i.useCallback(()=>{a(null)},[]),V=i.useCallback(async U=>{if(!d){$.error("Delete functionality not available");return}try{await d(U),$.success("Message deleted successfully")}catch(F){console.error("Failed to delete message:",F)}},[d]),u=i.useCallback(async U=>{if(!(l!=null&&l.id)||!t){$.error("Unable to send message. Please select a conversation.");return}try{const F=await g(U,l.id,m==null?void 0:m.id);a(null),F&&r(t,F)}catch(F){console.error("Failed to send message:",F),$.error("Failed to send message. Please try again.")}},[g,l==null?void 0:l.id,t,m,r]),v=i.useCallback(U=>{s({to:"/chat",search:{id:U}})},[s]),k=i.useCallback(()=>{s({to:"/chat",search:{id:""}})},[s]);if(p&&N.length===0)return e.jsxDEV("div",{className:"absolute inset-0 flex flex-col",children:[e.jsxDEV(ke,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:155,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:e.jsxDEV(C.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-brand-light to-brand-dark flex items-center justify-center",children:e.jsxDEV(ae,{className:"w-8 h-8 text-white"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:166,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:165,columnNumber:15},this),e.jsxDEV(C.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute -inset-2 border-2 border-brand-light/30 border-t-brand-light rounded-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:168,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:164,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground font-medium",children:"Loading conversations..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:176,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:157,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:156,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:154,columnNumber:12},this);const T=()=>e.jsxDEV(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.32,.72,0,1]},className:"flex-1 flex items-center justify-center px-4 md:px-8",children:e.jsxDEV("div",{className:"text-center max-w-sm",children:[e.jsxDEV("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(ae,{className:"w-10 h-10 text-muted-foreground/40"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:195,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:194,columnNumber:9},this),e.jsxDEV("h2",{className:"text-lg md:text-xl font-semibold text-foreground mb-2",children:"No conversation selected"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:197,columnNumber:9},this),e.jsxDEV("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Choose a chat from the sidebar to start messaging"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:200,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:193,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:183,columnNumber:34},this),I=()=>e.jsxDEV("div",{className:"flex items-center px-3 md:px-4 py-2 md:py-3 min-h-[60px] md:min-h-[68px] border-b bg-background sticky top-0 z-10",children:t&&y?e.jsxDEV(On,{participants:w,conversation:y,onDetailsClick:j,onBack:k},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:206,columnNumber:56},this):e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(ae,{className:"w-5 h-5 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:208,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:207,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-[15px] font-semibold",children:"Messages"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:211,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:[D.length," conversation",D.length!==1?"s":""]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:212,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:210,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:206,columnNumber:212},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:205,columnNumber:30},this),M=()=>!t||!y?T():e.jsxDEV("div",{className:"flex flex-col w-full h-full overflow-hidden",children:[e.jsxDEV(Zn,{messages:h,participants:w,loading:c,threadId:t,onReply:A,onDelete:V},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:223,columnNumber:9},this),e.jsxDEV(et,{selectedConversationId:t,disabled:!t||c,onSendMessage:u,replyingTo:m,onCancelReply:E},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:225,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:222,columnNumber:12},this);return e.jsxDEV("div",{className:"absolute inset-0 flex flex-col",children:[e.jsxDEV(ke,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:229,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 flex min-h-0",children:[e.jsxDEV("div",{className:"hidden md:block md:w-[340px] flex-shrink-0 border-r border-border/40 bg-background overflow-y-auto",children:e.jsxDEV(ze,{conversations:D,loading:p,selectedConversationId:t,user:l,onConversationSelect:v,onThreadCreated:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:233,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:232,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 flex flex-col min-w-0 min-h-0 bg-background",children:[e.jsxDEV(H,{mode:"wait",children:t?e.jsxDEV(C.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:[.32,.72,0,1]},className:"flex-1 flex flex-col min-h-0 md:hidden",children:[I(),M()]},t,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:258,columnNumber:11},this):e.jsxDEV(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2,ease:[.32,.72,0,1]},className:"flex-1 flex flex-col min-h-0 md:hidden",children:e.jsxDEV(ze,{conversations:D,loading:p,selectedConversationId:t,user:l,onConversationSelect:v,onThreadCreated:x,forceMobileList:!0},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:255,columnNumber:17},this)},"conversation-list",!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:242,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:239,columnNumber:11},this),e.jsxDEV("div",{className:"hidden md:flex flex-1 flex flex-col min-h-0",children:e.jsxDEV(H,{mode:"wait",children:e.jsxDEV(C.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:[.32,.72,0,1]},className:"flex-1 flex flex-col min-h-0",children:[I(),M()]},t||"empty",!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:279,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:278,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:277,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:238,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:230,columnNumber:7},this),e.jsxDEV(it,{open:o,onOpenChange:f,conversation:y,participants:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:300,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:228,columnNumber:10},this)}export{bt as component};
