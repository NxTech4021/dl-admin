const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/user-growth-chart-la-PCkGe.js","assets/index-DyY9s1i7.js","assets/index-EswfcjYM.css","assets/chart-NfNJEn68.js","assets/skeleton-C8dggbFW.js","assets/use-queries-CGyvEvtD.js","assets/external-DCTon813.js","assets/schemas-B5fuxOj7.js","assets/compat-Blf4Bw1-.js","assets/coerce-C-pLok-C.js","assets/league-schema-CW4CwVLH.js","assets/season-schema-DVFNm_2a.js","assets/division-schema-gPrDsMOQ.js","assets/LineChart-B3Vvm3ti.js","assets/sport-comparison-chart-458DxeM9.js","assets/BarChart-BLuCOoyg.js","assets/site-header-Dzv4kaRt.js","assets/use-notifications-BbMTfb7w.js","assets/user-check-D0w7DJns.js","assets/filter-select-BZU1j76K.js","assets/match-activity-chart-B4Nd4_xB.js","assets/index-BF9ZerkK.js"])))=>i.map(i=>d[i]);
import{c as T,j as e,_ as Y,C as y,U as B,w as G,N as W,P as q,Q,R as J,V as X,e as M,b as I,d as k,f as Z,B as C,ai as ee,r as m,t as b,aj as se,$ as U}from"./index-DyY9s1i7.js";import{m as A,S as ne}from"./site-header-Dzv4kaRt.js";import{S as N}from"./skeleton-C8dggbFW.js";import{H as $,I as F,J as ie}from"./use-queries-CGyvEvtD.js";import{U as ae,T as O}from"./user-check-D0w7DJns.js";import{F as _}from"./filter-select-BZU1j76K.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],te=T("download",re);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],oe=T("trending-down",le);function x(s,i="number"){const n=typeof s=="string"?parseFloat(s):s;if(isNaN(n))return i==="currency"?"RM0":i==="percentage"?"0.0%":"0";switch(i){case"currency":return new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",minimumFractionDigits:0,maximumFractionDigits:0}).format(n);case"percentage":return`${n.toFixed(1)}%`;case"number":default:return new Intl.NumberFormat("en-US").format(n)}}const H={hidden:{opacity:0,y:8},visible:{opacity:1,y:0}};function f({children:s,delay:i=0,className:n}){return e.jsxDEV(A.div,{initial:"hidden",animate:"visible",variants:H,transition:{duration:.4,delay:i,ease:[.4,0,.2,1]},className:n,children:s},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/animated-container.tsx",lineNumber:24,columnNumber:5},this)}function R({children:s,staggerDelay:i=.05,className:n}){return e.jsxDEV(A.div,{initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:i}}},className:n,children:s},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/animated-container.tsx",lineNumber:53,columnNumber:5},this)}function p({children:s,className:i}){return e.jsxDEV(A.div,{variants:H,transition:{duration:.3,ease:[.4,0,.2,1]},className:i,children:s},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/animated-container.tsx",lineNumber:77,columnNumber:5},this)}function me(s,i){if(i===0)return{trend:"neutral",percentage:0};const n=(s-i)/i*100;return{trend:n>0?"up":n<0?"down":"neutral",percentage:Math.abs(n)}}function g(){return e.jsxDEV(y,{className:"relative overflow-hidden h-full flex flex-col border-border/40",children:[e.jsxDEV(M,{className:"flex flex-row items-center justify-between space-y-0 pb-3 px-5 pt-5",children:[e.jsxDEV(N,{className:"h-3 w-20"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:51,columnNumber:9},this),e.jsxDEV(N,{className:"h-4 w-4 rounded"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:52,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:50,columnNumber:7},this),e.jsxDEV(I,{className:"flex-1 px-5 pb-5",children:[e.jsxDEV(N,{className:"h-9 w-24 mb-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:55,columnNumber:9},this),e.jsxDEV(N,{className:"h-3 w-28"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:56,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:54,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:49,columnNumber:5},this)}function D({title:s,value:i,previousValue:n,icon:l,format:o="number",onClick:a,isLoading:u}){if(u)return e.jsxDEV(g,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:72,columnNumber:12},this);const d=typeof i=="string"?parseFloat(i):i,r=n?me(d,n):null;return e.jsxDEV(y,{className:k("relative overflow-hidden h-full flex flex-col border-border/40",a&&"cursor-pointer"),onClick:a,onKeyDown:t=>{a&&(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),a())},role:a?"button":void 0,tabIndex:a?0:void 0,"aria-label":a?`${s}: ${x(i,o)}. Click for details.`:void 0,children:[e.jsxDEV(M,{className:"flex flex-row items-center justify-between space-y-0 pb-3 px-5 pt-5",children:[e.jsxDEV(Z,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:s},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:98,columnNumber:9},this),e.jsxDEV(l,{className:"h-4 w-4 text-muted-foreground/60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:101,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:97,columnNumber:7},this),e.jsxDEV(I,{className:"flex-1 px-5 pb-5",children:[e.jsxDEV("div",{className:"text-3xl font-semibold tracking-tight tabular-nums",children:x(i,o)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:104,columnNumber:9},this),r&&e.jsxDEV("div",{className:"flex items-center gap-1.5 mt-2 text-xs text-muted-foreground",children:[r.trend==="up"?e.jsxDEV(O,{className:"h-3 w-3 text-emerald-600"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:110,columnNumber:15},this):r.trend==="down"?e.jsxDEV(oe,{className:"h-3 w-3 text-red-500"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:112,columnNumber:15},this):null,e.jsxDEV("span",{className:k(r.trend==="up"&&"text-emerald-600",r.trend==="down"&&"text-red-500"),children:r.percentage>0&&`${r.percentage.toFixed(1)}%`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:114,columnNumber:13},this),e.jsxDEV("span",{children:"vs last period"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:122,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:108,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:103,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:81,columnNumber:5},this)}function de(){const[s,i]=Y.useState(null),{data:n,isLoading:l}=$(),{data:o,isLoading:a}=F(),u=l||a,r=s?(t=>{if(!n)return null;switch(t){case"totalUsers":return{title:"Total Users",value:n.totalUsers,previousValue:n.previousTotalUsers,description:"All registered users across all sports",breakdown:(o==null?void 0:o.map(c=>({label:`${c.sport} users`,value:c.users})))||[]};case"leagueParticipants":return{title:"League Participants",value:n.leagueParticipants,previousValue:n.previousLeagueParticipants,description:"Users actively participating in league matches",breakdown:(o==null?void 0:o.map(c=>({label:`${c.sport} participants`,value:c.payingMembers})))||[]};case"conversionRate":return{title:"Conversion Rate",value:n.conversionRate,description:"Percentage of users who become paying members",breakdown:[{label:"Total paying members",value:n.leagueParticipants},{label:"Total users",value:n.totalUsers},{label:"Conversion rate",value:`${n.conversionRate}%`}]};case"totalRevenue":return{title:"Total Revenue",value:n.totalRevenue,previousValue:n.previousRevenue,description:"Combined revenue from all sports and membership fees",breakdown:(o==null?void 0:o.map(c=>({label:`${c.sport} revenue`,value:`RM${c.revenue.toLocaleString()}`})))||[]}}})(s):null;return u?e.jsxDEV(R,{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",staggerDelay:.05,children:[e.jsxDEV(p,{children:e.jsxDEV(g,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:197,columnNumber:22},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:197,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(g,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:198,columnNumber:22},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:198,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(g,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:199,columnNumber:22},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:199,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(g,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:200,columnNumber:22},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:200,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:196,columnNumber:7},this):n?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(R,{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",staggerDelay:.05,children:[e.jsxDEV(p,{children:e.jsxDEV(D,{title:"Total Users",value:n.totalUsers,previousValue:n.previousTotalUsers,icon:B,format:"number",onClick:()=>i("totalUsers")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:220,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:219,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(D,{title:"League Participants",value:n.leagueParticipants,previousValue:n.previousLeagueParticipants,icon:ae,format:"number",onClick:()=>i("leagueParticipants")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:230,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:229,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(D,{title:"Conversion Rate",value:n.conversionRate,icon:O,format:"percentage",onClick:()=>i("conversionRate")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:240,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:239,columnNumber:9},this),e.jsxDEV(p,{children:e.jsxDEV(D,{title:"Total Revenue",value:n.totalRevenue,previousValue:n.previousRevenue,icon:G,format:"currency",onClick:()=>i("totalRevenue")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:249,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:248,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:218,columnNumber:7},this),e.jsxDEV(W,{open:!!s,onOpenChange:t=>!t&&i(null),children:e.jsxDEV(q,{className:"sm:max-w-[500px]",children:[e.jsxDEV(Q,{children:[e.jsxDEV(J,{children:r==null?void 0:r.title},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:263,columnNumber:13},this),e.jsxDEV(X,{children:r==null?void 0:r.description},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:264,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:262,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-6 py-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Current Value"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:268,columnNumber:15},this),e.jsxDEV("span",{className:"text-2xl font-bold",children:x((r==null?void 0:r.value)||0,s==="totalRevenue"?"currency":s==="conversionRate"?"percentage":"number")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:269,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:267,columnNumber:13},this),(r==null?void 0:r.previousValue)&&e.jsxDEV("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border/40",children:[e.jsxDEV("span",{className:"text-sm font-medium text-muted-foreground",children:"Previous Period"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:283,columnNumber:17},this),e.jsxDEV("span",{className:"text-lg font-semibold",children:x(r.previousValue,s==="totalRevenue"?"currency":"number")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:286,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:282,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("h4",{className:"text-sm font-medium",children:"Breakdown"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:296,columnNumber:15},this),r==null?void 0:r.breakdown.map((t,c)=>e.jsxDEV("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:[e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:t.label},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:302,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm font-medium",children:typeof t.value=="number"?t.value.toLocaleString():t.value},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:303,columnNumber:19},this)]},c,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:298,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:295,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:266,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:261,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:260,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:217,columnNumber:5},this):e.jsxDEV("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:e.jsxDEV(y,{className:"col-span-full p-6 text-center text-muted-foreground border-border/40",children:"No dashboard data available"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:209,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/kpi-cards.tsx",lineNumber:208,columnNumber:7},this)}const ce=[{value:"monthly",label:"Monthly"},{value:"average",label:"Weekly Avg"}],ue=[{value:"1",label:"1mo"},{value:"3",label:"3mo"},{value:"6",label:"6mo"}];function pe({chartRange:s,historyRange:i,lastUpdated:n,onChartRangeChange:l,onHistoryRangeChange:o,onRefresh:a,onExport:u}){const d=()=>n.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxDEV(f,{delay:.1,children:e.jsxDEV("div",{className:"px-6 md:px-8",children:e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-4 py-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(_,{value:s,onChange:r=>l(r||"monthly"),options:ce,placeholder:"View",triggerClassName:"w-[120px] h-9 text-sm border-border/50"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:55,columnNumber:13},this),e.jsxDEV(_,{value:i.toString(),onChange:r=>o(Number(r||"3")),options:ue,placeholder:"Period",triggerClassName:"w-[85px] h-9 text-sm border-border/50"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:63,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:54,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground hidden sm:inline",suppressHydrationWarning:!0,children:["Updated ",d()]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:73,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(C,{variant:"ghost",size:"sm",onClick:a,className:"h-8 w-8 p-0","aria-label":"Refresh",children:e.jsxDEV(ee,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:85,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:78,columnNumber:15},this),e.jsxDEV(C,{variant:"ghost",size:"sm",onClick:u,className:"h-8 gap-1.5 text-xs",children:[e.jsxDEV(te,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:94,columnNumber:17},this),e.jsxDEV("span",{className:"hidden sm:inline",children:"Export"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:95,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:88,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:77,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:72,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:53,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:51,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/dashboard-chart-filters.tsx",lineNumber:50,columnNumber:5},this)}function S({isLoading:s,message:i="Updating charts..."}){return s?e.jsxDEV("div",{className:"absolute inset-0 z-10 bg-background/50 backdrop-blur-sm flex items-center justify-center rounded-lg",children:e.jsxDEV("div",{className:"flex flex-col items-center gap-2",children:[e.jsxDEV("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/chart-loading-overlay.tsx",lineNumber:15,columnNumber:9},this),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/chart-loading-overlay.tsx",lineNumber:16,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/chart-loading-overlay.tsx",lineNumber:14,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/chart-loading-overlay.tsx",lineNumber:13,columnNumber:5},this):null}function he({onChartRangeChange:s,onHistoryRangeChange:i,onRefresh:n,onShowKeyboardHelp:l}){m.useEffect(()=>{const o=a=>{if(!(a.target instanceof HTMLInputElement||a.target instanceof HTMLTextAreaElement)){if(a.key==="?"&&a.shiftKey){a.preventDefault(),l==null||l();return}a.key==="m"||a.key==="M"?(a.preventDefault(),s("monthly")):a.key==="w"||a.key==="W"?(a.preventDefault(),s("average")):a.key==="1"?(a.preventDefault(),i(1)):a.key==="2"?(a.preventDefault(),i(3)):a.key==="3"?(a.preventDefault(),i(6)):(a.key==="r"||a.key==="R")&&(a.preventDefault(),n())}};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[s,i,n,l])}function w(s){return new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}function v(s,i){if(i===0)return"N/A";const n=(s-i)/i*100;return`${n>=0?"+":""}${n.toFixed(1)}%`}function Ne(){const{data:s}=$(),{data:i}=F();return{exportDashboardCSV:m.useCallback(()=>{if(!s){b.error("Export failed",{description:"Dashboard data is not available yet"});return}const l=[{metric:"Total Users",current:s.totalUsers.toLocaleString(),previous:s.previousTotalUsers.toLocaleString(),change:v(s.totalUsers,s.previousTotalUsers)},{metric:"League Participants",current:s.leagueParticipants.toLocaleString(),previous:s.previousLeagueParticipants.toLocaleString(),change:v(s.leagueParticipants,s.previousLeagueParticipants)},{metric:"Conversion Rate",current:`${s.conversionRate}%`,previous:"N/A",change:"N/A"},{metric:"Total Revenue",current:w(s.totalRevenue),previous:w(s.previousRevenue),change:v(s.totalRevenue,s.previousRevenue)}];i&&i.length>0&&(l.push({metric:"",current:"",previous:"",change:""}),l.push({metric:"--- Sport Breakdown ---",current:"",previous:"",change:""}),i.forEach(t=>{l.push({metric:`${t.sport} - Users`,current:t.users.toLocaleString(),previous:"N/A",change:"N/A"}),l.push({metric:`${t.sport} - Paying Members`,current:t.payingMembers.toLocaleString(),previous:"N/A",change:"N/A"}),l.push({metric:`${t.sport} - Revenue`,current:w(t.revenue),previous:"N/A",change:"N/A"}),l.push({metric:`${t.sport} - Matches`,current:t.matches.toLocaleString(),previous:"N/A",change:"N/A"})}));const a=[["Metric","Current Period","Previous Period","Change"].join(","),...l.map(t=>[t.metric,t.current,t.previous,t.change].join(","))].join(`
`),u=new Blob([a],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),r=URL.createObjectURL(u);d.setAttribute("href",r),d.setAttribute("download",`dashboard-export-${new Date().toISOString().split("T")[0]}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),b.success("Export completed",{description:"Dashboard data exported as CSV"})},[s,i])}}const ge=m.lazy(()=>U(()=>import("./user-growth-chart-la-PCkGe.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(s=>({default:s.UserGrowthChart}))),be=m.lazy(()=>U(()=>import("./sport-comparison-chart-458DxeM9.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9,10,11,12,15,16,17,18,19])).then(s=>({default:s.SportComparisonChart}))),De=m.lazy(()=>U(()=>import("./match-activity-chart-B4Nd4_xB.js"),__vite__mapDeps([20,1,2,3,21,4,5,6,7,8,9,10,11,12,13,15])).then(s=>({default:s.MatchActivityChart})));function L(){return e.jsxDEV(N,{className:"w-full h-[420px] rounded-lg"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:27,columnNumber:10},this)}const P=300;function fe(){const[s,i]=m.useState("monthly"),[n,l]=m.useState(3),[o,a]=m.useState(new Date),[u,d]=m.useState(!1),[r,t]=m.useState(!1),c=se(),E=m.useCallback(()=>{c.invalidateQueries({queryKey:ie.dashboard.all}),a(new Date),b.success("Dashboard refreshed",{description:"All data has been updated"})},[c]),V=m.useCallback(h=>{t(!0),i(h);const z={monthly:"Monthly view",average:"Weekly average view"};b.info("Chart range updated",{description:`Switched to ${z[h]}`}),setTimeout(()=>t(!1),P)},[]),j=m.useCallback(h=>{t(!0),l(h),b.info("Historical range updated",{description:`Showing ${h} month${h>1?"s":""} of data`}),setTimeout(()=>t(!1),P)},[]);he({onChartRangeChange:V,onHistoryRangeChange:j,onRefresh:E,onShowKeyboardHelp:()=>d(!0)});const{exportDashboardCSV:K}=Ne();return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ne,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:85,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-1 flex-col",children:[e.jsxDEV("div",{className:"px-6 md:px-8 py-8 border-b border-border/50",children:[e.jsxDEV("h1",{className:"text-2xl font-semibold tracking-tight",children:"Dashboard"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:90,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:"Monitor key metrics and performance"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:91,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:89,columnNumber:9},this),e.jsxDEV(f,{delay:.05,className:"px-6 md:px-8 py-6",children:e.jsxDEV(de,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:97,columnNumber:9},this),e.jsxDEV(pe,{chartRange:s,historyRange:n,lastUpdated:o,showKeyboardHelp:u,onChartRangeChange:V,onHistoryRangeChange:j,onRefresh:E,onExport:K,onKeyboardHelpChange:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:102,columnNumber:9},this),e.jsxDEV(f,{delay:.15,className:"px-6 md:px-8 py-6",children:[e.jsxDEV("h2",{className:"text-lg font-medium mb-6",children:"Analytics"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:106,columnNumber:11},this),e.jsxDEV("div",{className:"grid gap-6 lg:grid-cols-2 items-stretch relative",children:[e.jsxDEV(S,{isLoading:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:110,columnNumber:13},this),e.jsxDEV("div",{className:"min-h-[420px]",children:e.jsxDEV(m.Suspense,{fallback:e.jsxDEV(L,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:113,columnNumber:35},this),children:e.jsxDEV(ge,{chartRange:s,historyRange:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:114,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:113,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:112,columnNumber:13},this),e.jsxDEV("div",{className:"min-h-[420px]",children:e.jsxDEV(m.Suspense,{fallback:e.jsxDEV(L,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:119,columnNumber:35},this),children:e.jsxDEV(be,{chartRange:s,historyRange:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:120,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:119,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:118,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:109,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:105,columnNumber:9},this),e.jsxDEV(f,{delay:.25,className:"px-6 md:px-8 pb-8",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(S,{isLoading:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:129,columnNumber:13},this),e.jsxDEV(m.Suspense,{fallback:e.jsxDEV(L,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:130,columnNumber:33},this),children:e.jsxDEV(De,{chartRange:s,historyRange:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:131,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:130,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:128,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:127,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:87,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/dashboard/index.tsx?tsr-split=component",lineNumber:84,columnNumber:10},this)}const Ae=Object.freeze(Object.defineProperty({__proto__:null,component:fe},Symbol.toStringTag,{value:"Module"}));export{x as f,Ae as i};
