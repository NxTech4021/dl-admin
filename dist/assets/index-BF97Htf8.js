const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/emoji-picker-react.esm-D9YsVsbo.js","assets/index-LFPNg1Zt.js","assets/index-D85-HDdI.css"])))=>i.map(i=>d[i]);
import{c as H,ak as rs,al as os,am as us,an as Ce,ao as Se,ap as ke,aq as Me,ar as Te,as as He,at as qe,r as i,aa as ee,j as e,au as be,av as pe,J as ds,aw as we,a2 as hs,a3 as gs,a4 as Ns,a5 as fs,a6 as xs,d as M,a as le,u as ue,k as X,l as Z,t as F,N as Le,P as ye,Q as Ke,R as Ye,M as ne,V as Ds,S as We,I as Qe,B as _,L as Xe,U as te,ax as oe,p as bs,ay as ps,az as ve,W as ws,aA as Ls,aB as Ze,$ as ys,aC as vs,x as _e,o as Je,aD as As}from"./index-LFPNg1Zt.js";import{T as Re,a as Ie,b as Fe,c as $e,u as Ae,S as es,d as ss,e as Es,f as Us}from"./socket-context-BNNiueEL.js";import{c as js,g as Vs,a as Ee,M as Cs,i as Ss,u as ns,P as ks,b as Ms,d as Ts,L as _s,S as Rs,m as C,e as de,f as Is}from"./scroll-area-CzfRc375.js";import{A as $,a as P,b as O}from"./avatar-DnW1gOHZ.js";import{S as J}from"./skeleton-Cpu4r-3W.js";import{A as Fs,a as $s,b as Ps,c as Os,d as zs,e as Gs,f as Bs,g as Hs}from"./alert-dialog-B4l_qdwX.js";import{D as qs}from"./dollar-sign-BY6apIhQ.js";import{C as Ks}from"./circle-BFMJhzQh.js";import{T as ge,U as Ys}from"./user-DB_SBwil.js";import{s as Ws}from"./subDays-DVBkdimp.js";import{P as Ne}from"./index-jacm7RNb.js";import{M as as}from"./mail-C1yPJBHK.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fe=H("circle-check-big",Qs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Pe=H("circle-x",Xs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Js=H("ellipsis",Zs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],sn=H("map-pin",en);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],Oe=H("message-square-plus",nn);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ts=H("phone",an);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],ln=H("reply",tn);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ls=H("smile",mn);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rn=H("square-pen",cn);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],un=H("video",on);function dn(s,a,n){const l=rs(),t=(n==null?void 0:n.locale)??l.locale??os,m=js(s,a);if(isNaN(m))throw new RangeError("Invalid time value");const r=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:m}),[h,D]=us(n==null?void 0:n.in,...m>0?[a,s]:[s,a]),f=Vs((n==null?void 0:n.roundingMethod)??"round"),N=D.getTime()-h.getTime(),g=N/Te,d=Ce(D)-Ce(h),u=(N-d)/Te,c=n==null?void 0:n.unit;let x;if(c?x=c:g<1?x="second":g<60?x="minute":g<Se?x="hour":u<ke?x="day":u<Me?x="month":x="year",x==="second"){const b=f(N/1e3);return t.formatDistance("xSeconds",b,r)}else if(x==="minute"){const b=f(g);return t.formatDistance("xMinutes",b,r)}else if(x==="hour"){const b=f(g/60);return t.formatDistance("xHours",b,r)}else if(x==="day"){const b=f(u/Se);return t.formatDistance("xDays",b,r)}else if(x==="month"){const b=f(u/ke);return b===12&&c!=="month"?t.formatDistance("xYears",1,r):t.formatDistance("xMonths",b,r)}else{const b=f(u/Me);return t.formatDistance("xYears",b,r)}}function Ue(s,a){return dn(s,Ee(s),a)}function hn(s,a){return He(qe(s,s),Ee(s))}function gn(s,a){return He(qe(s,s),Ws(Ee(s),1))}function ze(s,a){if(typeof s=="function")return s(a);s!=null&&(s.current=a)}function Nn(...s){return a=>{let n=!1;const l=s.map(t=>{const m=ze(t,a);return!n&&typeof m=="function"&&(n=!0),m});if(n)return()=>{for(let t=0;t<l.length;t++){const m=l[t];typeof m=="function"?m():ze(s[t],null)}}}}function fn(...s){return i.useCallback(Nn(...s),s)}class xn extends i.Component{getSnapshotBeforeUpdate(a){const n=this.props.childRef.current;if(n&&a.isPresent&&!this.props.isPresent){const l=n.offsetParent,t=Ss(l)&&l.offsetWidth||0,m=this.props.sizeRef.current;m.height=n.offsetHeight||0,m.width=n.offsetWidth||0,m.top=n.offsetTop,m.left=n.offsetLeft,m.right=t-m.width-m.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Dn({children:s,isPresent:a,anchorX:n,root:l}){const t=i.useId(),m=i.useRef(null),r=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=i.useContext(Cs),D=fn(m,s==null?void 0:s.ref);return i.useInsertionEffect(()=>{const{width:f,height:N,top:g,left:d,right:u}=r.current;if(a||!m.current||!f||!N)return;const c=n==="left"?`left: ${d}`:`right: ${u}`;m.current.dataset.motionPopId=t;const x=document.createElement("style");h&&(x.nonce=h);const b=l??document.head;return b.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${N}px !important;
            ${c}px !important;
            top: ${g}px !important;
          }
        `),()=>{b.contains(x)&&b.removeChild(x)}},[a]),ee.jsx(xn,{isPresent:a,childRef:m,sizeRef:r,children:i.cloneElement(s,{ref:D})})}const bn=({children:s,initial:a,isPresent:n,onExitComplete:l,custom:t,presenceAffectsLayout:m,mode:r,anchorX:h,root:D})=>{const f=ns(pn),N=i.useId();let g=!0,d=i.useMemo(()=>(g=!1,{id:N,initial:a,isPresent:n,custom:t,onExitComplete:u=>{f.set(u,!0);for(const c of f.values())if(!c)return;l&&l()},register:u=>(f.set(u,!1),()=>f.delete(u))}),[n,f,l]);return m&&g&&(d={...d}),i.useMemo(()=>{f.forEach((u,c)=>f.set(c,!1))},[n]),i.useEffect(()=>{!n&&!f.size&&l&&l()},[n]),r==="popLayout"&&(s=ee.jsx(Dn,{isPresent:n,anchorX:h,root:D,children:s})),ee.jsx(ks.Provider,{value:d,children:s})};function pn(){return new Map}const ce=s=>s.key||"";function Ge(s){const a=[];return i.Children.forEach(s,n=>{i.isValidElement(n)&&a.push(n)}),a}const B=({children:s,custom:a,initial:n=!0,onExitComplete:l,presenceAffectsLayout:t=!0,mode:m="sync",propagate:r=!1,anchorX:h="left",root:D})=>{const[f,N]=Ms(r),g=i.useMemo(()=>Ge(s),[s]),d=r&&!f?[]:g.map(ce),u=i.useRef(!0),c=i.useRef(g),x=ns(()=>new Map),[b,p]=i.useState(g),[L,U]=i.useState(g);Ts(()=>{u.current=!1,c.current=g;for(let y=0;y<L.length;y++){const A=ce(L[y]);d.includes(A)?x.delete(A):x.get(A)!==!0&&x.set(A,!1)}},[L,d.length,d.join("-")]);const w=[];if(g!==b){let y=[...g];for(let A=0;A<L.length;A++){const V=L[A],o=ce(V);d.includes(o)||(y.splice(A,0,V),w.push(V))}return m==="wait"&&w.length&&(y=w),U(Ge(y)),p(g),null}m==="wait"&&L.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:S}=i.useContext(_s);return ee.jsx(ee.Fragment,{children:L.map(y=>{const A=ce(y),V=r&&!f?!1:g===L||d.includes(A),o=()=>{if(x.has(A))x.set(A,!0);else return;let v=!0;x.forEach(k=>{k||(v=!1)}),v&&(S==null||S(),U(c.current),r&&(N==null||N()),l&&l())};return ee.jsx(bn,{isPresent:V,initial:!u.current||n?void 0:!1,custom:a,presenceAffectsLayout:t,mode:m,root:D,onExitComplete:V?void 0:o,anchorX:h,children:y},A)})})},wn=["online","away","busy","offline"],Be={background:{online:"bg-green-500",away:"bg-yellow-500",busy:"bg-red-500",offline:"bg-gray-500"},text:{online:"text-green-600",away:"text-yellow-600",busy:"text-red-600",offline:"text-gray-600"},border:{online:"border-green-500",away:"border-yellow-500",busy:"border-red-500",offline:"border-gray-500"},ring:{online:"ring-green-500",away:"ring-yellow-500",busy:"ring-red-500",offline:"ring-gray-500"}},xe={AVATAR_SIZES:{MEDIUM:"w-10 h-10",LARGE:"w-12 h-12"}},Q=(s,a="background")=>Be[a][s]||Be[a].offline,re=s=>s.charAt(0).toUpperCase()+s.slice(1),De={FADE_IN:"animate-in fade-in-0 duration-200",PULSE:"animate-pulse"},ae={USER_STATUS:"online",AVATAR_FALLBACK:"?",UNKNOWN_USER:"Unknown User",EMPTY_MESSAGES:"No messages yet"};function Ln({user:s,onStatusChange:a,onSettingsClick:n,onLogoutClick:l,collapsed:t=!1}){const[m,r]=i.useState(ae.USER_STATUS),[h,D]=i.useState(!1),f=(s==null?void 0:s.name)||(s==null?void 0:s.displayName)||ae.UNKNOWN_USER,N=(s==null?void 0:s.email)||"",g=(s==null?void 0:s.image)||(s==null?void 0:s.photoURL)||"",d=f.charAt(0).toUpperCase()||ae.AVATAR_FALLBACK,u=i.useCallback(c=>{r(c),a==null||a(c),console.log("User status changed to:",c)},[a]);return i.useCallback(()=>{D(!1),n==null||n()},[n]),i.useCallback(()=>{D(!1),l==null||l()},[l]),t?e.jsxDEV(Re,{children:e.jsxDEV(Ie,{children:[e.jsxDEV(Fe,{asChild:!0,children:e.jsxDEV("div",{className:"flex justify-center p-3",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV($,{className:xe.AVATAR_SIZES.MEDIUM,children:[e.jsxDEV(P,{src:g,alt:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:70,columnNumber:19},this),e.jsxDEV(O,{className:"text-sm font-medium",children:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:71,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:69,columnNumber:17},this),e.jsxDEV("span",{className:`absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full border-2 border-background ${Q(m)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:76,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:68,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:67,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:66,columnNumber:11},this),e.jsxDEV($e,{side:"right",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"font-medium",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:84,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground capitalize",children:re(m)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:85,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:83,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:82,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:65,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:64,columnNumber:7},this):e.jsxDEV(be,{open:h,onOpenChange:D,children:[e.jsxDEV(Re,{children:e.jsxDEV(Ie,{children:[e.jsxDEV(Fe,{asChild:!0,children:e.jsxDEV(pe,{asChild:!0,children:e.jsxDEV("div",{className:`flex items-center gap-3 p-3 cursor-pointer hover:bg-muted/50 rounded-lg transition-colors ${De.FADE_IN}`,children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV($,{className:xe.AVATAR_SIZES.MEDIUM,children:[e.jsxDEV(P,{src:g,alt:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:106,columnNumber:21},this),e.jsxDEV(O,{className:"text-sm font-medium",children:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:107,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:105,columnNumber:19},this),e.jsxDEV("span",{className:`absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full border-2 border-background ${Q(m)} ${m==="online"?De.PULSE:""}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:112,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:104,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"font-medium text-sm truncate",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:119,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2 mt-1",children:e.jsxDEV(ds,{variant:"outline",className:`text-xs px-2 py-0.5 ${Q(m,"text")} border-current`,children:re(m)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:123,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:122,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:118,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:102,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:101,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:100,columnNumber:11},this),e.jsxDEV($e,{children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:136,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:N},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:137,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:135,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:134,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:99,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:98,columnNumber:7},this),e.jsxDEV(we,{className:`w-80 p-0 ${De.FADE_IN}`,align:"start",children:[e.jsxDEV("div",{className:"flex items-center gap-3 p-4 bg-muted/50",children:[e.jsxDEV($,{className:xe.AVATAR_SIZES.LARGE,children:[e.jsxDEV(P,{src:g,alt:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:147,columnNumber:13},this),e.jsxDEV(O,{className:"text-lg font-medium",children:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:148,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:146,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"font-semibold text-base truncate",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:153,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground truncate",children:N},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:154,columnNumber:13},this),(s==null?void 0:s.username)&&e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["@",s.username]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:156,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:152,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:145,columnNumber:9},this),e.jsxDEV(Rs,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:161,columnNumber:9},this),e.jsxDEV("div",{className:"p-4 space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Status"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:166,columnNumber:13},this),e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${Q(m)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:167,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:165,columnNumber:11},this),e.jsxDEV(hs,{value:m,onValueChange:u,children:[e.jsxDEV(gs,{className:"w-full",children:e.jsxDEV(Ns,{children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${Q(m)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:176,columnNumber:19},this),e.jsxDEV("span",{className:"capitalize",children:re(m)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:179,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:175,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:174,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:173,columnNumber:13},this),e.jsxDEV(fs,{children:wn.map(c=>e.jsxDEV(xs,{value:c,children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${Q(c)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:187,columnNumber:21},this),e.jsxDEV("span",{className:"capitalize",children:re(c)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:190,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:186,columnNumber:19},this)},c,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:185,columnNumber:17},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:172,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:164,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:143,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:97,columnNumber:5},this)}const yn=({className:s,...a})=>e.jsxDEV("div",{className:M("flex flex-row items-center space-x-2 px-2.5 py-1.5",s),...a,children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:12,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex flex-col flex-grow space-y-1",children:[e.jsxDEV("div",{className:"w-[75%] h-2 rounded bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:16,columnNumber:9},void 0),e.jsxDEV("div",{className:"w-[50%] h-2 rounded bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:17,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:15,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:7,columnNumber:5},void 0),vn=(s,a)=>{const[n,l]=i.useState(!1);return i.useEffect(()=>{const t=window.matchMedia("(min-width: 768px)"),m=r=>l(r.matches);return t.addEventListener("change",m),m(t),()=>t.removeEventListener("change",m)},[]),n},An=(s,a=6)=>{if(!s)return"";const n=s.trim().split(/\s+/);return n.length<=a?s:n.slice(0,a).join(" ")+"..."},En=({conversation:s,currentUserId:a})=>{var f,N,g,d,u,c;const n=(s==null?void 0:s.type)==="group",l=n?(s==null?void 0:s.participants)||[]:((f=s==null?void 0:s.participants)==null?void 0:f.filter(x=>x.id!==a))||[],t=n?(s==null?void 0:s.displayName)||(s==null?void 0:s.name)||"Group Chat":((N=l[0])==null?void 0:N.name)||((g=l[0])==null?void 0:g.displayName)||ae.UNKNOWN_USER,m=((d=s==null?void 0:s.lastMessage)==null?void 0:d.content)||"",r=An(m,6),h=(u=s==null?void 0:s.lastMessage)==null?void 0:u.createdAt,D=n&&((c=s==null?void 0:s.participants)==null?void 0:c.some(x=>x.status==="online"));return{group:n,displayName:t,displayText:r,participants:l,lastActivity:h,hasOnlineInGroup:D}},Un={dashboard:{chat:"/chat"}},jn=s=>s.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2),Vn=s=>{const a=s.trim().split(" ");return a.length===1?a[0].slice(0,2).toUpperCase():a.slice(0,2).map(n=>n.charAt(0)).join("").toUpperCase()},Cn=({selected:s,conversation:a,onCloseMobile:n})=>{const{data:l}=le(),t=l==null?void 0:l.user,m=ue(),r=vn(),{group:h,displayName:D,displayText:f,participants:N,lastActivity:g,hasOnlineInGroup:d}=En({conversation:a,currentUserId:t==null?void 0:t.id}),u=N[0],{name:c,photoURL:x,status:b}=u||{},p=i.useCallback(async()=>{try{!r&&n&&n(),m({to:`${Un.dashboard.chat}?id=${a.id}`})}catch(w){console.error(w)}},[a.id,r,n,m]),L=e.jsxDEV("div",{className:"relative flex-shrink-0",children:[e.jsxDEV($,{className:"h-12 w-12",children:[e.jsxDEV(P,{src:a.avatarUrl||a.photoURL,alt:D},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:146,columnNumber:9},void 0),e.jsxDEV(O,{className:"text-sm bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:Vn(D)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:150,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:145,columnNumber:7},void 0),d&&e.jsxDEV("span",{className:"absolute bottom-0.5 right-0.5 h-3 w-3 rounded-full bg-green-500 ring-2 ring-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:155,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:144,columnNumber:5},void 0),U=e.jsxDEV("div",{className:"relative flex-shrink-0",children:[e.jsxDEV($,{className:"h-12 w-12",children:[e.jsxDEV(P,{src:x||(u==null?void 0:u.photoURL),alt:D},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:163,columnNumber:9},void 0),e.jsxDEV(O,{className:"text-sm bg-muted font-medium",children:jn(D)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:167,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:162,columnNumber:7},void 0),b==="online"&&e.jsxDEV("span",{className:"absolute bottom-0.5 right-0.5 h-3 w-3 rounded-full bg-green-500 ring-2 ring-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:172,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:161,columnNumber:5},void 0);return e.jsxDEV(C.div,{onClick:p,whileTap:{scale:.98},transition:{duration:.1},className:M("flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors",s?"bg-muted":"hover:bg-muted/50"),children:[h?L:U,e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"font-semibold text-[15px] truncate",children:D},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:193,columnNumber:11},void 0),e.jsxDEV("span",{className:"text-xs text-muted-foreground/70 flex-shrink-0 ml-2",children:g?Ue(new Date(g),{addSuffix:!1}):""},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:196,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:192,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-0.5",children:[e.jsxDEV("span",{className:"text-sm text-muted-foreground truncate",children:f||ae.EMPTY_MESSAGES},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:205,columnNumber:11},void 0),e.jsxDEV(B,{children:a.unreadCount>0&&e.jsxDEV(C.span,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},transition:{type:"spring",stiffness:500,damping:25},className:"h-5 min-w-5 px-1.5 rounded-full bg-brand-light text-white text-xs font-medium flex items-center justify-center flex-shrink-0 ml-2",children:a.unreadCount>99?"99+":a.unreadCount},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:210,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:204,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:191,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:178,columnNumber:5},void 0)};function Sn(s){const[a,n]=i.useState([]),[l,t]=i.useState(!0),[m,r]=i.useState(null),{socket:h,isConnected:D}=Ae(),f=i.useCallback(async()=>{var N,g,d,u;if(!s){t(!1);return}try{t(!0),r(null);const c=await X.get(Z.chat.getThreads(s));c.data?c.data.success&&c.data.data?n(c.data.data):Array.isArray(c.data)?n(c.data):c.data.threads&&Array.isArray(c.data.threads)?n(c.data.threads):n([]):n([])}catch(c){console.error("Error fetching threads:",c);const x=((g=(N=c.response)==null?void 0:N.data)==null?void 0:g.message)||((u=(d=c.response)==null?void 0:d.data)==null?void 0:u.error)||c.message||"Failed to fetch threads";r(x),F.error("Failed to load chat threads"),n([])}finally{t(!1)}},[s]);return i.useEffect(()=>{if(!h||!D)return;const N=d=>{n(u=>[d.thread,...u]),F.success("New conversation started!")},g=d=>{n(u=>u.map(c=>c.id===d.threadId?{...c,messages:[d.lastMessage],updatedAt:new Date().toISOString()}:c))};return h.on("new_thread",N),h.on("thread_updated",g),()=>{h.off("new_thread",N),h.off("thread_updated",g)}},[h,D]),i.useEffect(()=>{f()},[f]),{threads:a,loading:l,error:m,refetch:f}}function kn(s){const[a,n]=i.useState([]),[l,t]=i.useState(!1),[m,r]=i.useState(null),{socket:h,isConnected:D,joinThread:f,leaveThread:N}=Ae(),g=i.useRef(null),d=i.useCallback(async()=>{var b,p,L,U;if(!s){n([]);return}try{t(!0),r(null);const w=await X.get(Z.chat.getMessages(s));w.data?w.data.success&&w.data.data?n(Array.isArray(w.data.data)?w.data.data:[]):Array.isArray(w.data)?n(w.data):w.data.messages&&Array.isArray(w.data.messages)?n(w.data.messages):n([]):n([])}catch(w){console.error("Error fetching messages:",w);const S=((p=(b=w.response)==null?void 0:b.data)==null?void 0:p.message)||((U=(L=w.response)==null?void 0:L.data)==null?void 0:U.error)||w.message||"Failed to fetch messages";r(S),n([])}finally{t(!1)}},[s]),u=i.useCallback(async(b,p,L)=>{var U,w,S,y;if(s)try{const A={senderId:p,content:b};L&&(A.repliesToId=L);const V=await X.post(Z.chat.sendMessage(s),A);let o=null;if(V.data&&(V.data.success&&V.data.data?o=V.data.data:V.data.message?o=V.data.message:V.data.id&&(o=V.data)),o)return o}catch(A){console.error("Error sending message:",A);const V=((w=(U=A.response)==null?void 0:U.data)==null?void 0:w.message)||((y=(S=A.response)==null?void 0:S.data)==null?void 0:y.error)||A.message||"Failed to send message";throw F.error(V),A}},[s]),c=i.useCallback(async b=>{var L,U,w,S;if(!s)return;const p=[...a];try{return n(y=>y.map(A=>A.id===b?{...A,isDeleted:!0,deletedAt:new Date().toISOString(),content:"This message has been deleted"}:A)),await X.delete(Z.chat.deleteMessage(b)),F.success("Message deleted successfully"),!0}catch(y){n(p);const A=((U=(L=y.response)==null?void 0:L.data)==null?void 0:U.message)||((S=(w=y.response)==null?void 0:w.data)==null?void 0:S.error)||y.message||"Failed to delete message";throw F.error(A),y}},[s,a]);i.useEffect(()=>{if(!h||!D)return;const b=w=>{w.threadId===s&&n(S=>[...S,w])},p=w=>{w.threadId===s&&n(S=>S.map(y=>y.id===w.messageId?{...y,isDeleted:!0,deletedAt:new Date().toISOString(),content:"This message has been deleted"}:y))},L=w=>{},U=w=>{w.threadId===s&&n(S=>S.map(y=>y.id===w.messageId?{...y,readBy:[...y.readBy||[],{id:`${w.messageId}-${w.readerId}`,userId:w.readerId,messageId:w.messageId,readAt:new Date().toISOString(),user:{id:w.readerId,name:w.readerName}}]}:y))};return h.on("new_message",b),h.on("message_deleted",p),h.on("message_sent",L),h.on("message_read",U),()=>{h.off("new_message",b),h.off("message_deleted",p),h.off("message_sent",L),h.off("message_read",U)}},[h,D,s]),i.useEffect(()=>{if(!(!s||!D))return g.current&&g.current!==s&&N(g.current),f(s),g.current=s,()=>{s&&(N(s),g.current=null)}},[s,D,f,N]);const x=i.useCallback(async b=>{try{await X.post(Z.chat.markAsRead(b))}catch{}},[]);return i.useEffect(()=>{d()},[d]),{messages:a,loading:l,error:m,sendMessage:u,deleteMessage:c,markAsRead:x,refetch:d}}function is(s){const[a,n]=i.useState([]),{socket:l,isConnected:t,sendTyping:m}=Ae(),{data:r}=le(),h=r==null?void 0:r.user,D=i.useRef(void 0);i.useEffect(()=>()=>{D.current&&(clearTimeout(D.current),D.current=void 0),n([])},[s]),i.useEffect(()=>{if(!l||!t||!s)return;const N=g=>{g.threadId===s&&g.senderId!==(h==null?void 0:h.id)&&n(d=>g.isTyping?d.some(c=>c.userId===g.senderId)?d:[...d,{userId:g.senderId,userName:"Someone"}]:d.filter(u=>u.userId!==g.senderId))};return l.on("typing_status",N),()=>{l.off("typing_status",N)}},[l,t,s,h==null?void 0:h.id]);const f=i.useCallback(N=>{s&&(m(s,N),N?(D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{m(s,!1)},3e3)):D.current&&(clearTimeout(D.current),D.current=void 0))},[s,m]);return{typingUsers:a,setTyping:f}}function Mn(){const[s,a]=i.useState(!1),[n,l]=i.useState(null);return{createThread:i.useCallback(async m=>{var r,h,D,f;try{a(!0),l(null);const N=await X.post(Z.chat.createThread,m);if(N.data){let g=null;if(N.data.success&&N.data.data?g=N.data.data:N.data.thread?g=N.data.thread:N.data.id&&(g=N.data),g)return F.success("Thread created successfully"),g}throw new Error("Failed to create thread")}catch(N){console.error("Error creating thread:",N);const g=((h=(r=N.response)==null?void 0:r.data)==null?void 0:h.message)||((f=(D=N.response)==null?void 0:D.data)==null?void 0:f.error)||N.message||"Failed to create thread";throw l(g),F.error(g),N}finally{a(!1)}},[]),loading:s,error:n}}function Tn(s){const[a,n]=i.useState([]),[l,t]=i.useState(!1),[m,r]=i.useState(null),h=i.useCallback(async()=>{var D,f,N,g;if(!s){n([]);return}try{t(!0),r(null);const d=await X.get(Z.chat.getAvailableUsers(s));let u=[];d.data&&(d.data.success&&d.data.data?u=d.data.data:Array.isArray(d.data)?u=d.data:d.data.users&&Array.isArray(d.data.users)&&(u=d.data.users));const c=u.filter(x=>x.id!==s);n(c)}catch(d){console.error("Error fetching available users:",d);const u=((f=(D=d.response)==null?void 0:D.data)==null?void 0:f.message)||((g=(N=d.response)==null?void 0:N.data)==null?void 0:g.error)||d.message||"Failed to fetch users";r(u),n([])}finally{t(!1)}},[s]);return i.useEffect(()=>{h()},[h]),{users:a,loading:l,error:m,refetch:h}}const _n=()=>e.jsxDEV("div",{className:"flex items-center gap-3 p-2",children:[e.jsxDEV(J,{className:"h-10 w-10 rounded-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:30,columnNumber:5},void 0),e.jsxDEV("div",{className:"flex-1 space-y-1",children:[e.jsxDEV(J,{className:"h-4 w-32"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:32,columnNumber:7},void 0),e.jsxDEV(J,{className:"h-3 w-24"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:33,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:31,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:29,columnNumber:3},void 0);function Rn({open:s,onOpenChange:a,currentUserId:n,onThreadCreated:l}){const t=ue(),[m,r]=i.useState(""),[h,D]=i.useState(null),{users:f,loading:N,error:g,refetch:d}=Tn(n),{createThread:u}=Mn(),c=i.useMemo(()=>{if(!m.trim())return f;const p=m.toLowerCase();return f.filter(L=>{var U,w;return L.name.toLowerCase().includes(p)||((U=L.username)==null?void 0:U.toLowerCase().includes(p))||((w=L.email)==null?void 0:w.toLowerCase().includes(p))})},[f,m]),x=async p=>{if(!(!n||h))try{D(p.id);const L={name:void 0,isGroup:!1,userIds:[n,p.id],createdBy:n},U=await u(L);U&&(await(l==null?void 0:l()),D(null),a(!1),r(""),t({to:"/chat",search:{id:U.id}}),F.success(`Chat with ${p.name} started!`))}catch{F.error("Failed to start chat. Please try again."),D(null)}},b=()=>{h||(a(!1),r(""))};return e.jsxDEV(Le,{open:s,onOpenChange:b,children:e.jsxDEV(ye,{className:"max-w-md h-[500px] flex flex-col p-0",children:[e.jsxDEV(Ke,{className:"px-6 pt-6 pb-4",children:[e.jsxDEV(Ye,{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:111,columnNumber:13},this),"Start New Chat"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:110,columnNumber:11},this),e.jsxDEV(Ds,{children:"Click on a user to start chatting"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:114,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:109,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 space-y-4 flex-1 flex flex-col overflow-hidden",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(We,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:122,columnNumber:13},this),e.jsxDEV(Qe,{placeholder:"Search users...",value:m,onChange:p=>r(p.target.value),className:"pl-9",disabled:!!h},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:123,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:121,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV(de,{className:"h-full",children:N?e.jsxDEV("div",{className:"space-y-2",children:Array.from({length:5}).map((p,L)=>e.jsxDEV(_n,{},L,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:138,columnNumber:21},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:136,columnNumber:17},this):g?e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV("div",{className:"text-4xl mb-2",children:"âš ï¸"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:143,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm mb-2",children:"Failed to load users"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:144,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs mb-3",children:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:145,columnNumber:19},this),e.jsxDEV(_,{size:"sm",variant:"outline",onClick:d,children:"Try Again"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:146,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:142,columnNumber:17},this):c.length===0?e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV("div",{className:"text-4xl mb-2",children:m?"ðŸ”":"ðŸ‘¥"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:152,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm mb-1",children:m?"No users found":"No available users"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:155,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs",children:m?"Try a different search term":"All users already have conversations with you"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:158,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:151,columnNumber:17},this):e.jsxDEV("div",{className:"space-y-1",children:c.map(p=>{const L=h===p.id;return e.jsxDEV("div",{onClick:()=>!h&&x(p),className:M("flex items-center gap-3 p-3 rounded-md transition-colors",!h&&"cursor-pointer hover:bg-muted/50",h&&h!==p.id&&"opacity-50",L&&"bg-muted border border-brand-light/20"),children:[e.jsxDEV($,{className:"h-10 w-10",children:[e.jsxDEV(P,{src:p.image,alt:p.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:182,columnNumber:27},this),e.jsxDEV(O,{children:p.name.charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:183,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:181,columnNumber:25},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"text-sm font-medium truncate",children:p.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:189,columnNumber:27},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground truncate",children:p.username?`@${p.username}`:p.email},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:192,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:188,columnNumber:25},this),L&&e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxDEV(Xe,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:199,columnNumber:29},this),e.jsxDEV("span",{children:"Creating chat..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:200,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:198,columnNumber:27},this)]},p.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:171,columnNumber:23},this)})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:166,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:134,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:133,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:119,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 py-4 border-t flex justify-end",children:e.jsxDEV(_,{variant:"outline",onClick:b,disabled:!!h,children:h?"Creating...":"Cancel"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:214,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:213,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:108,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:107,columnNumber:5},this)}const In=()=>{const[s,a]=i.useState(!1);return i.useEffect(()=>{const n=window.matchMedia("(min-width: 768px)"),l=t=>a(t.matches);return n.addEventListener("change",l),l(n),()=>n.removeEventListener("change",l)},[]),s},Fn=()=>{const[s,a]=i.useState(!1),[n,l]=i.useState(!1);return{collapseDesktop:s,onCollapseDesktop:()=>a(t=>!t),onCloseDesktop:()=>a(!1),openMobile:n,onOpenMobile:()=>l(!0),onCloseMobile:()=>l(!1)}},$n=(s=!1)=>{const[a,n]=i.useState(s);return{value:a,onTrue:()=>n(!0),onFalse:()=>n(!1),onToggle:()=>n(l=>!l)}};function Pn({loading:s,user:a,conversations:n,selectedConversationId:l,onConversationSelect:t,onThreadCreated:m}){ue();const r=In(),{openMobile:h,onOpenMobile:D,onCloseMobile:f}=Fn(),{value:N,onTrue:g,onFalse:d}=$n(!1),[u,c]=i.useState(""),[x,b]=i.useState(n);i.useEffect(()=>{if(!u.trim())b(n);else{const j=n.filter(E=>{var q;const R=E.displayName||"",K=((q=E.participants)==null?void 0:q.map(G=>G.displayName||G.name||"").join(" "))||"";return(R+" "+K).toLowerCase().includes(u.toLowerCase())});b(j)}},[u,n]),i.useEffect(()=>{u.trim()||b(n)},[n,u]);const p=i.useCallback(()=>{r||f(),g()},[r,f,g]),L=i.useCallback(j=>{c(j)},[]),U=i.useCallback(()=>{c("")},[]),w=i.useCallback(async()=>{await(m==null?void 0:m())},[m]),S=()=>e.jsxDEV(_,{onClick:D,variant:"ghost",className:"fixed left-0 top-[84px] z-10 w-8 h-8 rounded-r-md bg-primary text-primary-foreground shadow-lg hover:bg-primary/90 md:hidden","aria-label":"Open chat navigation",children:e.jsxDEV(te,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:168,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:162,columnNumber:5},this),y=()=>e.jsxDEV(e.Fragment,{children:Array.from({length:8},(j,E)=>e.jsxDEV(yn,{},`skeleton-${E}`,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:175,columnNumber:9},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:173,columnNumber:5},this),A=()=>e.jsxDEV(C.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.3,ease:[.4,0,.2,1]},className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsxDEV(Oe,{className:"w-6 h-6 text-muted-foreground/60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:188,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:187,columnNumber:7},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-2",children:u?"No conversations found":"No conversations yet"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:190,columnNumber:7},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground/70",children:u?"Try a different search term":"Start a new conversation"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:193,columnNumber:7},this),!u&&e.jsxDEV(_,{variant:"outline",size:"sm",className:"mt-4",onClick:p,children:[e.jsxDEV(Oe,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:205,columnNumber:11},this),"New Message"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:199,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:181,columnNumber:5},this),V=()=>e.jsxDEV(e.Fragment,{children:x.length>0?e.jsxDEV(C.div,{initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.04}}},children:x.map(j=>e.jsxDEV(C.div,{variants:{hidden:{opacity:0,x:-8},visible:{opacity:1,x:0}},transition:{duration:.25,ease:[.4,0,.2,1]},children:e.jsxDEV(Cn,{conversation:j,selected:j.id===l,onCloseMobile:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:232,columnNumber:15},this)},j.id,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:224,columnNumber:13},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:215,columnNumber:9},this):A()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:213,columnNumber:5},this),o=()=>e.jsxDEV("div",{className:"flex items-center justify-between px-4 min-h-[68px] border-b",children:[e.jsxDEV(Ln,{user:a},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:248,columnNumber:7},this),e.jsxDEV(_,{size:"icon",variant:"ghost",onClick:p,className:"rounded-full h-9 w-9",children:e.jsxDEV(rn,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:255,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:249,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:247,columnNumber:5},this),v=()=>e.jsxDEV("div",{className:"px-3 py-2",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(We,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:263,columnNumber:9},this),e.jsxDEV(Qe,{value:u,onChange:j=>L(j.target.value),placeholder:"Search",className:"pl-10 h-9 rounded-full bg-muted/50 border-0 focus-visible:ring-0 text-sm","aria-label":"Search conversations"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:264,columnNumber:9},this),e.jsxDEV(B,{children:u&&e.jsxDEV(C.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},children:e.jsxDEV(_,{variant:"ghost",size:"sm",className:"absolute right-1.5 top-1/2 -translate-y-1/2 h-6 w-6 p-0 text-muted-foreground hover:text-foreground rounded-full",onClick:U,"aria-label":"Clear search",children:"Ã—"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:279,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:273,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:271,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:262,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:261,columnNumber:5},this),k=()=>e.jsxDEV("div",{className:"h-full flex flex-col",children:[o(),v(),e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV(de,{className:"h-full",children:s?y():V()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:305,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:304,columnNumber:7},this),e.jsxDEV(Rn,{open:N,onOpenChange:d,currentUserId:a==null?void 0:a.id,onThreadCreated:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:310,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:296,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[!r&&S(),r?e.jsxDEV("div",{className:"h-full w-full flex flex-col",children:k()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:325,columnNumber:9},this):e.jsxDEV(es,{open:h,onOpenChange:f,children:e.jsxDEV(ss,{side:"left",className:"p-0 border-r-0 w-[320px]",children:k()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:330,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:329,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:321,columnNumber:5},this)}function On({participants:s=[],conversation:a,onDetailsClick:n}){var d;const l=(a==null?void 0:a.type)==="group",t=s.find(u=>!u.isCurrentUser),m=u=>{const c=u.trim().split(" ");return c.length===1?c[0].slice(0,2).toUpperCase():c.slice(0,2).map(x=>x.charAt(0)).join("").toUpperCase()},r=u=>{switch(u){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"busy":return"bg-red-500";case"offline":default:return"bg-gray-400"}},h=u=>u?`Last seen ${Is(new Date(u),{addSuffix:!0})}`:"Last seen recently",D=((d=a==null?void 0:a.participants)==null?void 0:d.length)||s.length,f=((a==null?void 0:a.participants)||s).filter(u=>u.status==="online").length,N=e.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV($,{className:"h-10 w-10",children:[e.jsxDEV(P,{src:(a==null?void 0:a.photoURL)||(a==null?void 0:a.avatarUrl),alt:(a==null?void 0:a.displayName)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:87,columnNumber:11},this),e.jsxDEV(O,{className:"text-sm bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:m((a==null?void 0:a.displayName)||(a==null?void 0:a.name)||"Group")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:91,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:86,columnNumber:9},this),f>0&&e.jsxDEV("div",{className:"absolute bottom-0 right-0 h-3 w-3 bg-green-500 rounded-full border-2 border-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:98,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:85,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h3",{className:"text-[15px] font-semibold truncate",children:(a==null?void 0:a.displayName)||(a==null?void 0:a.name)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:104,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsxDEV(te,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:108,columnNumber:11},this),e.jsxDEV("span",{children:[D," members",f>0&&e.jsxDEV("span",{className:"ml-1",children:["â€¢ ",f," online"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:112,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:109,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:107,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:103,columnNumber:7},this),e.jsxDEV(oe,{className:"h-4 w-4 text-muted-foreground/50 flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:121,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:83,columnNumber:5},this),g=e.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV($,{className:"h-10 w-10",children:[e.jsxDEV(P,{src:(t==null?void 0:t.photoURL)||(t==null?void 0:t.avatarUrl)||(a==null?void 0:a.photoURL),alt:(t==null?void 0:t.name)||(t==null?void 0:t.displayName)||(a==null?void 0:a.displayName)||"User"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:130,columnNumber:11},this),e.jsxDEV(O,{children:((t==null?void 0:t.name)||(t==null?void 0:t.displayName)||(a==null?void 0:a.displayName)||"U").charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:134,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:129,columnNumber:9},this),e.jsxDEV("div",{className:M("absolute bottom-0 right-0 h-3 w-3 rounded-full border-2 border-background",r(t==null?void 0:t.status))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:140,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:128,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h3",{className:"text-[15px] font-semibold truncate",children:(t==null?void 0:t.name)||(t==null?void 0:t.displayName)||(a==null?void 0:a.displayName)||"Unknown User"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:148,columnNumber:9},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground truncate",children:(t==null?void 0:t.status)==="offline"?h(t.lastActivity):e.jsxDEV("span",{className:"capitalize",children:(t==null?void 0:t.status)||"online"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:155,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:151,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:147,columnNumber:7},this),e.jsxDEV(oe,{className:"h-4 w-4 text-muted-foreground/50 flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:164,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:126,columnNumber:5},this);return e.jsxDEV("div",{className:M("flex items-center gap-3 w-full py-1 px-2 -mx-2 rounded-xl transition-colors cursor-pointer",n&&"hover:bg-muted/50 active:bg-muted/70"),onClick:n,role:n?"button":void 0,tabIndex:n?0:void 0,onKeyDown:n?u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),n())}:void 0,children:l?N:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:169,columnNumber:5},this)}function zn({message:s,participants:a,currentUserId:n}){return i.useMemo(()=>{var h;const t=a.find(D=>D.id===s.senderId)||{firstName:"Unknown",avatarUrl:""},m=s.senderId===n,r=s.contentType==="image";return{me:m,senderDetails:{firstName:((h=t.displayName)==null?void 0:h.split(" ")[0])||t.firstName,avatarUrl:t.photoURL||t.avatarUrl},hasImage:r}},[s,a,n])}function Gn(s){switch(s==null?void 0:s.toUpperCase()){case"PICKLEBALL":return{label:"Pickleball",badgeColor:"#7C3AED",badgeBg:"#F3E8FF",buttonColor:"#7C3AED"};case"TENNIS":return{label:"Tennis",badgeColor:"#059669",badgeBg:"#ECFDF5",buttonColor:"#059669"};case"PADEL":return{label:"Padel",badgeColor:"#2563EB",badgeBg:"#EFF6FF",buttonColor:"#2563EB"};default:return{label:s||"Sport",badgeColor:"#6B7280",badgeBg:"#F3F4F6",buttonColor:"#6B7280"}}}function Bn({message:s,senderDetails:a}){var V;const n=s.matchData,{firstName:l,avatarUrl:t}=a,m=s.createdAt,r=i.useMemo(()=>Gn(n==null?void 0:n.sportType),[n==null?void 0:n.sportType]),h=o=>{try{const v=new Date(o);return ve(v,"d MMM yyyy")}catch{return o}},D=o=>o?o.includes(" - ")?o.split(" - ")[0].trim():o.trim():"12:00 PM",f=o=>{if(!o)return"TBD";if(o.includes("M"))return o;const[v,k]=o.split(":"),j=parseInt(v),E=j>=12?"PM":"AM";return`${j%12||12}:${k} ${E}`},N=(o,v)=>{const k=D(o),[j,E]=k.split(" "),[R,K]=j.split(":").map(Number);let Y=E==="PM"&&R!==12?R+12:R;E==="AM"&&R===12&&(Y=0);const q=Y*60+K+v*60,G=Math.floor(q/60)%24,T=q%60,ie=G%12||12,me=G>=12?"PM":"AM";return`${ie}:${String(T).padStart(2,"0")} ${me}`},g=()=>{const o=n==null?void 0:n.fee,v=n==null?void 0:n.feeAmount;if(o==="FREE"||!o)return"Free";if(o==="SPLIT"&&v){const k=parseFloat(v),j=parseInt((n==null?void 0:n.numberOfPlayers)||"2",10);return`RM${j>0?(k/j).toFixed(2):"0.00"}/player`}return o==="FIXED"&&v?`RM${parseFloat(v).toFixed(2)}/player`:"Free"},d=()=>(n==null?void 0:n.matchType)==="SINGLES"||(n==null?void 0:n.numberOfPlayers)==="2"?"Singles":"Doubles",u=()=>(n==null?void 0:n.matchType)==="SINGLES"||(n==null?void 0:n.numberOfPlayers)==="2"?2:4,c=(n==null?void 0:n.participants)||[],x=c.filter(o=>o.invitationStatus==="ACCEPTED"||!o.invitationStatus),b=u(),p=n!=null&&n.time?D(n.time):"12:00 PM",L=f(p),U=N(p,(n==null?void 0:n.duration)||2),w=(n==null?void 0:n.isFriendly)||(n==null?void 0:n.isFriendlyRequest),S=d(),y=o=>{var v;return o.name?o.name:o.username?o.username:`User ${((v=o.userId)==null?void 0:v.slice(-6))||"???"}`},A=o=>{switch(o){case"ACCEPTED":return{icon:fe,color:"text-emerald-500",bg:"bg-emerald-50"};case"DECLINED":return{icon:Pe,color:"text-red-500",bg:"bg-red-50"};case"PENDING":return{icon:Ks,color:"text-amber-500",bg:"bg-amber-50"};default:return{icon:fe,color:"text-emerald-500",bg:"bg-emerald-50"}}};return e.jsxDEV("div",{className:"group flex gap-3 py-2 px-4 md:px-6",children:[e.jsxDEV($,{className:"h-8 w-8 flex-shrink-0 mt-0.5 border border-border/50",children:[e.jsxDEV(P,{src:t,alt:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:155,columnNumber:9},this),e.jsxDEV(O,{className:"text-[11px] bg-muted font-medium text-muted-foreground",children:((V=l==null?void 0:l.charAt(0))==null?void 0:V.toUpperCase())||"?"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:156,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:154,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-col flex-1 min-w-0 max-w-[420px]",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsxDEV("span",{className:"text-[13px] text-muted-foreground",children:[e.jsxDEV("span",{className:"font-semibold text-foreground",children:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:165,columnNumber:13},this),w?" sent a friendly match request":" posted a league match"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:164,columnNumber:11},this),e.jsxDEV("span",{className:"text-[11px] text-muted-foreground/50 ml-auto tabular-nums",children:Ue(new Date(m),{addSuffix:!0})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:168,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:163,columnNumber:9},this),e.jsxDEV("div",{className:"rounded-xl border bg-card overflow-hidden",style:{borderColor:`${r.badgeColor}25`},children:[e.jsxDEV("div",{className:"px-3.5 py-2.5 flex items-center justify-between border-b border-border/40",children:[e.jsxDEV("span",{className:"font-semibold text-[13px] text-foreground",children:[S," ",w?"Friendly":"League Match"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:180,columnNumber:13},this),e.jsxDEV("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded-full",style:{backgroundColor:`${r.badgeColor}15`,color:r.badgeColor},children:r.label},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:179,columnNumber:11},this),e.jsxDEV("div",{className:"px-3.5 py-3 flex gap-4",children:[e.jsxDEV("div",{className:"flex-1 space-y-1.5",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(sn,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:199,columnNumber:17},this),e.jsxDEV("span",{className:"truncate",children:(n==null?void 0:n.location)||"TBD"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:200,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:198,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(bs,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("span",{children:h(n==null?void 0:n.date)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:202,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(ps,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:207,columnNumber:17},this),e.jsxDEV("span",{children:[L," â€“ ",U]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:208,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:206,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(qs,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:211,columnNumber:17},this),e.jsxDEV("span",{children:g()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:212,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:210,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:197,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col items-end gap-1.5 shrink-0",children:[e.jsxDEV("div",{className:M("flex items-center gap-1 text-[10px] font-medium px-2 py-0.5 rounded",n!=null&&n.courtBooked?"bg-emerald-50 text-emerald-600":"bg-red-50 text-red-500"),children:[e.jsxDEV("span",{children:n!=null&&n.courtBooked?"Court booked":"No court"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:227,columnNumber:17},this),n!=null&&n.courtBooked?e.jsxDEV(fe,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:229,columnNumber:19},this):e.jsxDEV(Pe,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:231,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:219,columnNumber:15},this),(n==null?void 0:n.isFriendlyRequest)&&(n==null?void 0:n.requestStatus)&&e.jsxDEV("div",{className:M("flex items-center gap-1 text-[10px] font-medium px-2 py-0.5 rounded",n.requestStatus==="ACCEPTED"&&"bg-emerald-50 text-emerald-600",n.requestStatus==="DECLINED"&&"bg-red-50 text-red-500",n.requestStatus==="EXPIRED"&&"bg-gray-100 text-gray-500",n.requestStatus==="PENDING"&&"bg-amber-50 text-amber-600"),children:[n.requestStatus==="ACCEPTED"&&"Accepted",n.requestStatus==="DECLINED"&&"Declined",n.requestStatus==="EXPIRED"&&"Expired",n.requestStatus==="PENDING"&&"Pending"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:237,columnNumber:17},this),(n==null?void 0:n.status)&&n.status!=="SCHEDULED"&&e.jsxDEV("div",{className:M("text-[10px] font-medium px-2 py-0.5 rounded",n.status==="COMPLETED"&&"bg-blue-50 text-blue-600",n.status==="CANCELLED"&&"bg-gray-100 text-gray-500",n.status==="ONGOING"&&"bg-amber-50 text-amber-600"),children:n.status},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:255,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:217,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:195,columnNumber:11},this),e.jsxDEV("div",{className:"px-3.5 py-2.5 border-t border-border/40 bg-muted/20",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("div",{className:"flex items-center gap-1.5 text-[11px] text-muted-foreground font-medium",children:[e.jsxDEV(te,{className:"h-3.5 w-3.5 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:273,columnNumber:17},this),e.jsxDEV("span",{children:"Players"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:274,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:272,columnNumber:15},this),e.jsxDEV("span",{className:"text-[10px] text-muted-foreground tabular-nums",children:[x.length,"/",b]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:276,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:271,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-1",children:[c.map((o,v)=>{const k=A(o.invitationStatus),j=k.icon;return e.jsxDEV("div",{className:"flex items-center gap-2 py-1 px-2 rounded-md bg-background/60",children:[e.jsxDEV($,{className:"h-5 w-5 border border-border/30",children:[e.jsxDEV(P,{src:o.image,alt:y(o)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:291,columnNumber:23},this),e.jsxDEV(O,{className:"text-[8px] bg-muted font-medium",children:y(o).charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:292,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:290,columnNumber:21},this),e.jsxDEV("div",{className:"flex-1 min-w-0 flex items-center gap-1.5",children:[e.jsxDEV("span",{className:"text-[12px] font-medium text-foreground truncate",children:y(o)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:297,columnNumber:23},this),o.role==="CREATOR"&&e.jsxDEV("span",{className:"text-[9px] text-muted-foreground bg-muted px-1.5 py-0.5 rounded font-medium",children:"Host"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:301,columnNumber:25},this),o.team&&e.jsxDEV("span",{className:"text-[9px] text-muted-foreground",children:["T",o.team==="team1"?"1":"2"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:306,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:296,columnNumber:21},this),e.jsxDEV(j,{className:M("h-3.5 w-3.5",k.color)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:311,columnNumber:21},this)]},o.id||o.userId||v,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:286,columnNumber:19},this)}),c.length<b&&Array.from({length:b-c.length}).map((o,v)=>e.jsxDEV("div",{className:"flex items-center gap-2 py-1 px-2 rounded-md border border-dashed border-border/50",children:[e.jsxDEV("div",{className:"h-5 w-5 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(te,{className:"h-2.5 w-2.5 text-muted-foreground/40"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:324,columnNumber:23},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:323,columnNumber:21},this),e.jsxDEV("span",{className:"text-[11px] text-muted-foreground/50 italic",children:"Waiting for player..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:326,columnNumber:21},this)]},`empty-${v}`,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:319,columnNumber:19},this))]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:281,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:270,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:174,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:161,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:152,columnNumber:5},this)}const Hn=i.memo(Bn),qn=["ðŸ‘","â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ˜¢"];function Kn({message:s,participants:a,onOpenLightbox:n,onReply:l,onDelete:t}){var T,ie,me,je,Ve;const{data:m}=le(),r=m==null?void 0:m.user,[h,D]=i.useState(!1),[f,N]=i.useState(!1),[g,d]=i.useState(s.reactions||[]),[u,c]=i.useState(!1),{me:x,senderDetails:b,hasImage:p}=zn({message:s,participants:a,currentUserId:(r==null?void 0:r.id)||""}),{firstName:L,avatarUrl:U}=b,w=s.content||s.body||"",S=s.createdAt,y=s.isDeleted||!1,A=i.useMemo(()=>{if(s.messageType==="MATCH"&&s.matchData){if(typeof s.matchData=="string")try{return JSON.parse(s.matchData)}catch{return null}return s.matchData}return s.matchData&&typeof s.matchData=="object"?s.matchData:null},[s.messageType,s.matchData]);if(A!==null&&!y)return e.jsxDEV(Hn,{message:{...s,matchData:A},senderDetails:b},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:102,columnNumber:7},this);const o=()=>{l&&!y&&l(s)},v=()=>{D(!0)},k=()=>{t&&t(s.id),D(!1)},j=I=>{d(se=>{const he=se.find(z=>z.emoji===I);return he?he.isSelected?he.count===1?se.filter(z=>z.emoji!==I):se.map(z=>z.emoji===I?{...z,count:z.count-1,isSelected:!1}:z):se.map(z=>z.emoji===I?{...z,count:z.count+1,isSelected:!0}:z):[...se,{emoji:I,count:1,isSelected:!0}]}),N(!1)},R=((ie=(T=s.repliesTo)==null?void 0:T.sender)==null?void 0:ie.id)===(r==null?void 0:r.id)?"You":((je=(me=s.repliesTo)==null?void 0:me.sender)==null?void 0:je.name)||"User",K=s.repliesTo&&e.jsxDEV("div",{className:M("mb-2 pb-2 text-xs border-b",x?"border-white/20":"border-border"),children:[e.jsxDEV("span",{className:M("font-medium",x?"text-white/80":"text-foreground/70"),children:R},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:167,columnNumber:7},this),e.jsxDEV("p",{className:M("line-clamp-2 mt-0.5",x?"text-white/60":"text-muted-foreground"),children:s.repliesTo.isDeleted?e.jsxDEV("span",{className:"italic flex items-center gap-1",children:[e.jsxDEV(ge,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:183,columnNumber:13},this),"Message deleted"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:182,columnNumber:11},this):s.repliesTo.content},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:175,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:161,columnNumber:5},this),Y=!x&&e.jsxDEV("div",{className:"mb-1",children:e.jsxDEV("p",{className:"text-xs text-muted-foreground font-medium",children:L},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:195,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:194,columnNumber:5},this),q=y?e.jsxDEV("div",{className:M("flex items-center gap-2 px-4 py-2.5 italic text-sm",x?"rounded-[20px] rounded-br-[6px] bg-brand-light/40 text-white/70":"rounded-[20px] rounded-bl-[6px] bg-muted/40 text-muted-foreground"),children:[e.jsxDEV(ge,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:209,columnNumber:7},this),e.jsxDEV("span",{children:"Message deleted"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:210,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:200,columnNumber:5},this):e.jsxDEV("div",{className:M("relative w-fit max-w-full transition-all duration-200",p?"p-0 bg-transparent rounded-2xl overflow-hidden":"px-4 py-2.5",x?["rounded-[20px] rounded-br-[6px]","bg-brand-light text-white"]:["rounded-[20px] rounded-bl-[6px]","bg-muted text-foreground"]),children:[K,p?e.jsxDEV(C.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.3},children:e.jsxDEV("img",{src:w,alt:"attachment",width:400,height:220,className:"min-h-[220px] w-full object-cover rounded-2xl cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>n==null?void 0:n(w)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:238,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:233,columnNumber:9},this):e.jsxDEV("p",{className:"text-sm whitespace-pre-wrap break-words leading-relaxed",children:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:248,columnNumber:9},this),e.jsxDEV(B,{children:g.length>0&&e.jsxDEV(C.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},className:"flex flex-wrap gap-1 mt-1.5 -mb-0.5",children:g.map(I=>e.jsxDEV(C.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>j(I.emoji),className:M("inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-xs transition-colors duration-150",x?"bg-white/15 hover:bg-white/25":"bg-muted-foreground/10 hover:bg-muted-foreground/20",I.isSelected&&"ring-1 ring-current/30"),children:[e.jsxDEV("span",{children:I.emoji},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:276,columnNumber:17},this),e.jsxDEV("span",{className:"font-medium",children:I.count},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:277,columnNumber:17},this)]},I.emoji,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:263,columnNumber:15},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:256,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:254,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:213,columnNumber:5},this),G=e.jsxDEV("div",{className:M("flex items-center gap-1.5 mt-1",x?"flex-row-reverse":"flex-row"),children:[e.jsxDEV("span",{className:"text-[10px] text-muted-foreground/60 px-1",children:Ue(new Date(S),{addSuffix:!0})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:295,columnNumber:7},this),!y&&e.jsxDEV(B,{children:u&&e.jsxDEV(C.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},transition:{duration:.15,ease:"easeOut"},className:"flex items-center gap-0.5",children:[e.jsxDEV(_,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-muted rounded-full",onClick:o,title:"Reply to message",children:e.jsxDEV(ln,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:318,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:311,columnNumber:15},this),e.jsxDEV(be,{open:f,onOpenChange:N,children:[e.jsxDEV(pe,{asChild:!0,children:e.jsxDEV(_,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-muted rounded-full",title:"React to message",children:e.jsxDEV(ls,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:330,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:324,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:323,columnNumber:17},this),e.jsxDEV(we,{side:"top",align:"center",className:"p-0 border-none bg-transparent shadow-none w-auto",sideOffset:8,children:e.jsxDEV(C.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15,ease:"easeOut"},className:"flex gap-1 p-1.5 bg-popover rounded-full shadow-lg border",children:qn.map(I=>e.jsxDEV(C.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>j(I),className:"w-8 h-8 flex items-center justify-center hover:bg-muted rounded-full text-lg transition-colors",children:I},I,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:347,columnNumber:23},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:339,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:333,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:322,columnNumber:15},this),x&&e.jsxDEV(_,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-destructive/10 hover:text-destructive rounded-full",onClick:v,title:"Delete message",children:e.jsxDEV(ge,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:370,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:363,columnNumber:17},this),e.jsxDEV(_,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-muted rounded-full",title:"More options",children:e.jsxDEV(Js,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:381,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:375,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:303,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:301,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:288,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:M("group flex gap-2 py-1 px-4 md:px-6",x?"flex-row-reverse":"flex-row",y&&"opacity-50"),onMouseEnter:()=>c(!0),onMouseLeave:()=>{c(!1),N(!1)},children:[!x&&e.jsxDEV($,{className:"h-8 w-8 flex-shrink-0 mt-auto mb-1",children:[e.jsxDEV(P,{src:U,alt:L},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:407,columnNumber:13},this),e.jsxDEV(O,{className:"text-xs bg-muted font-medium",children:((Ve=L==null?void 0:L.charAt(0))==null?void 0:Ve.toUpperCase())||"?"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:408,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:406,columnNumber:11},this),e.jsxDEV("div",{className:M("flex flex-col flex-1 min-w-0 max-w-[75%]",x?"items-end":"items-start"),children:[Y,q,G]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:415,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:392,columnNumber:7},this),e.jsxDEV(Fs,{open:h,onOpenChange:D,children:e.jsxDEV($s,{children:[e.jsxDEV(Ps,{children:[e.jsxDEV(Os,{children:"Delete Message"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:431,columnNumber:13},this),e.jsxDEV(zs,{children:"Are you sure you want to delete this message? This action cannot be undone."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:432,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:430,columnNumber:11},this),e.jsxDEV(Gs,{children:[e.jsxDEV(Bs,{children:"Cancel"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:438,columnNumber:13},this),e.jsxDEV(Hs,{onClick:k,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:439,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:437,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:429,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:428,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:391,columnNumber:5},this)}const Yn=i.memo(Kn),Wn={initial:{y:0,opacity:.4},animate:s=>({y:[-1,1,-1],opacity:[.4,.8,.4],transition:{y:{duration:.6,repeat:1/0,ease:"easeInOut",delay:s*.12},opacity:{duration:.6,repeat:1/0,ease:"easeInOut",delay:s*.12}}})};function Qn({threadId:s}){const{data:a}=le(),n=a==null?void 0:a.user,{typingUsers:l}=is(s),t=l.filter(r=>r.userId!==(n==null?void 0:n.id)),m=()=>t.length===1?`${t[0].userName} is typing`:t.length===2?`${t[0].userName} and ${t[1].userName} are typing`:`${t[0].userName} and ${t.length-1} others are typing`;return e.jsxDEV(B,{children:t.length>0&&e.jsxDEV(C.div,{initial:{opacity:0,y:8,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:8,height:0},transition:{duration:.2,ease:[.4,0,.2,1]},className:"px-4 py-2.5 overflow-hidden",children:e.jsxDEV("div",{className:"flex items-center gap-2.5",children:[e.jsxDEV("div",{className:"flex gap-0.5 items-center h-4",children:[0,1,2].map(r=>e.jsxDEV(C.div,{custom:r,variants:Wn,initial:"initial",animate:"animate",className:"w-1.5 h-1.5 bg-muted-foreground/60 rounded-full"},r,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:65,columnNumber:17},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:63,columnNumber:13},this),e.jsxDEV(C.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm text-muted-foreground/70",children:m()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:75,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:61,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:54,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:52,columnNumber:5},this)}const Xn=()=>e.jsxDEV("div",{className:"flex gap-3 px-4 py-2",children:[e.jsxDEV(J,{className:"h-8 w-8 rounded-full flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:39,columnNumber:5},void 0),e.jsxDEV("div",{className:"flex-1 space-y-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(J,{className:"h-3 w-16"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:42,columnNumber:9},void 0),e.jsxDEV(J,{className:"h-3 w-20"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:43,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:41,columnNumber:7},void 0),e.jsxDEV(J,{className:"h-4 w-48"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:45,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:40,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:38,columnNumber:3},void 0),Zn=({date:s})=>{const a=new Date(s),n=()=>hn(a)?"Today":gn(a)?"Yesterday":ve(a,"MMMM d, yyyy");return e.jsxDEV("div",{className:"flex items-center justify-center py-3",children:e.jsxDEV("span",{className:"px-3 py-1 rounded-full bg-muted/60 text-xs font-medium text-muted-foreground",children:n()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:61,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:60,columnNumber:5},void 0)};function Jn({messages:s=[],participants:a=[],loading:n=!1,threadId:l,onReply:t,onDelete:m}){const r=i.useRef(null),[h,D]=i.useState(!0),[f,N]=i.useState(!1),g=s.reduce((c,x)=>{const b=ve(new Date(x.createdAt),"yyyy-MM-dd");return c[b]||(c[b]=[]),c[b].push(x),c},{});i.useEffect(()=>{if(h&&r.current){const c=r.current.querySelector("[data-radix-scroll-area-viewport]");c&&(c.scrollTop=c.scrollHeight)}},[s,h]);const d=c=>{const{scrollTop:x,scrollHeight:b,clientHeight:p}=c.currentTarget,L=b-x-p<100;D(L),N(!L&&s.length>10)},u=()=>{if(r.current){const c=r.current.querySelector("[data-radix-scroll-area-viewport]");c&&c.scrollTo({top:c.scrollHeight,behavior:"smooth"})}};return n&&s.length===0?e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV("div",{className:"space-y-4 p-4",children:Array.from({length:5}).map((c,x)=>e.jsxDEV(Xn,{},x,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:123,columnNumber:13},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:121,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:120,columnNumber:7},this):s.length===0?e.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:e.jsxDEV(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},className:"text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(ne,{className:"w-8 h-8 text-muted-foreground/50"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:140,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:139,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-medium text-foreground/80 mb-2",children:"Start a conversation"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:142,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto",children:"Send a message to begin chatting"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:145,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:133,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:132,columnNumber:7},this):e.jsxDEV("div",{className:"flex-1 relative overflow-hidden bg-background",children:[e.jsxDEV(de,{ref:r,className:"h-full",onScrollCapture:d,children:e.jsxDEV("div",{className:"min-h-full flex flex-col justify-end py-2",children:[Object.entries(g).map(([c,x])=>e.jsxDEV("div",{children:[e.jsxDEV(Zn,{date:x[0].createdAt},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:163,columnNumber:15},this),e.jsxDEV(B,{mode:"popLayout",children:x.map((b,p)=>e.jsxDEV(C.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.25,delay:p<3?p*.05:0,ease:[.4,0,.2,1]},layout:!0,children:e.jsxDEV(Yn,{message:b,participants:a,onReply:t,onDelete:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:178,columnNumber:21},this)},b.id,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:166,columnNumber:19},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:164,columnNumber:15},this)]},c,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:162,columnNumber:13},this)),e.jsxDEV(Qn,{threadId:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:191,columnNumber:11},this),e.jsxDEV(B,{children:n&&e.jsxDEV(C.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"flex items-center justify-center py-4",children:[e.jsxDEV(Xe,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:"Sending..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:196,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:194,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:160,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:155,columnNumber:7},this),e.jsxDEV(B,{children:f&&e.jsxDEV(C.button,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},transition:{duration:.2,ease:"easeOut"},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:u,className:"absolute bottom-4 right-4 bg-primary text-primary-foreground rounded-full p-2.5 shadow-lg hover:bg-primary/90 transition-colors","aria-label":"Scroll to bottom",children:e.jsxDEV("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:231,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:225,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:214,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:212,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:154,columnNumber:5},this)}const ea=i.lazy(()=>ys(()=>import("./emoji-picker-react.esm-D9YsVsbo.js"),__vite__mapDeps([0,1,2]))),W=new Map;function sa({selectedConversationId:s,disabled:a=!1,onSendMessage:n,replyingTo:l,onCancelReply:t}){var V;const[m,r]=i.useState(""),[h,D]=i.useState(!1),[f,N]=i.useState(!1),[g,d]=i.useState(!1),u=i.useRef(null),c=i.useRef(void 0),x=i.useRef(void 0),{setTyping:b}=is(s);i.useEffect(()=>{const o=x.current;if(o&&o!==s&&(m.trim()?W.set(o,m):W.delete(o)),s&&s!==o){const v=W.get(s)||"";r(v),setTimeout(()=>{u.current&&(u.current.style.height="auto",u.current.style.height=`${Math.min(u.current.scrollHeight,120)}px`)},0)}x.current=s},[s]),i.useEffect(()=>{s&&m.trim()?W.set(s,m):s&&!m.trim()&&W.delete(s)},[m,s]),i.useEffect(()=>{l&&u.current&&u.current.focus()},[l]);const p=i.useCallback(async()=>{if(!m.trim()||!n||h)return;const o=m.trim();r(""),D(!0),b(!1),s&&W.delete(s);try{await n(o),setTimeout(()=>{var v;(v=u.current)==null||v.focus()},0)}catch(v){console.error("Failed to send message:",v),r(o),s&&W.set(s,o)}finally{D(!1)}},[m,n,h,b,s]),L=i.useCallback(o=>{const v=o.metaKey||o.ctrlKey;if(v&&(o.key==="a"||o.key==="A")){o.stopPropagation();const k=o.currentTarget;k.setSelectionRange(0,k.value.length),o.preventDefault();return}if(v){o.stopPropagation();return}if(o.key==="Enter"&&!o.shiftKey){o.preventDefault(),p();return}if(o.key==="Escape"&&l&&t){o.preventDefault(),t();return}},[p,l,t]),U=i.useCallback(()=>{const o=u.current;o&&(o.style.height="auto",o.style.height=`${Math.min(o.scrollHeight,120)}px`)},[]),w=i.useCallback(o=>{const v=o.target.value;r(v),U(),v.trim()&&s?(b(!0),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{b(!1)},1e3)):b(!1)},[U,s,b]),S=i.useCallback(o=>{const v=o.emoji,k=u.current;if(k){const j=k.selectionStart,E=k.selectionEnd,R=m.slice(0,j)+v+m.slice(E);r(R),setTimeout(()=>{k.focus(),k.setSelectionRange(j+v.length,j+v.length)},0)}else r(j=>j+v);N(!1),U()},[m,U]);i.useEffect(()=>()=>{c.current&&clearTimeout(c.current),b(!1)},[s,b]);const y=a||!s||h,A=()=>{var o;return e.jsxDEV(B,{children:l&&e.jsxDEV(C.div,{initial:{opacity:0,y:20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:20,height:0},transition:{duration:.25,ease:[.4,0,.2,1]},className:"border-t bg-muted/20 px-4 py-3 overflow-hidden",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(C.div,{initial:{scaleY:0},animate:{scaleY:1},transition:{duration:.2,delay:.1},className:"w-1 bg-primary rounded-full h-12 flex-shrink-0 mt-1 origin-top"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:247,columnNumber:15},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[e.jsxDEV("p",{className:"text-xs font-medium text-primary",children:["Replying to ",((o=l.sender)==null?void 0:o.name)||"User"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:256,columnNumber:19},this),e.jsxDEV(C.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsxDEV(_,{size:"sm",variant:"ghost",onClick:t,className:"h-6 w-6 p-0 flex-shrink-0 hover:bg-muted-foreground/20 rounded-full",children:e.jsxDEV(Ze,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:266,columnNumber:23},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:260,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:259,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:255,columnNumber:17},this),e.jsxDEV("div",{className:"bg-background/60 rounded-xl px-3 py-2 border border-border/50",children:e.jsxDEV("p",{className:"text-sm text-muted-foreground line-clamp-3",children:l.content||"Message"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:272,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:271,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:254,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:245,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:238,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:236,columnNumber:7},this)};return e.jsxDEV("div",{className:"bg-background",children:[A(),e.jsxDEV("div",{className:"border-t bg-background px-4 py-3",children:e.jsxDEV("div",{className:"flex items-end gap-2",children:[e.jsxDEV("div",{className:"flex-1 relative",children:[e.jsxDEV(ws,{ref:u,value:m,onChange:w,onKeyDown:L,onFocus:()=>d(!0),onBlur:()=>d(!1),placeholder:l?`Reply to ${((V=l.sender)==null?void 0:V.name)||"message"}...`:s?"Message":"Select a conversation",className:M("min-h-[44px] max-h-[120px] py-3 px-4 pr-12","resize-none rounded-[22px]","bg-muted/50 border-0 focus:bg-muted","transition-colors focus-visible:ring-0 focus-visible:ring-offset-0"),disabled:y,rows:1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:294,columnNumber:13},this),e.jsxDEV(be,{open:f,onOpenChange:N,children:[e.jsxDEV(pe,{asChild:!0,children:e.jsxDEV(_,{variant:"ghost",size:"icon",className:"absolute right-2 bottom-1.5 h-8 w-8 rounded-full hover:bg-background/50",disabled:y,children:e.jsxDEV(ls,{className:"h-5 w-5 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:327,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:321,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:320,columnNumber:15},this),e.jsxDEV(we,{className:"w-auto p-0 border-none shadow-lg",side:"top",align:"end",sideOffset:8,children:e.jsxDEV(C.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.2,ease:"easeOut"},children:e.jsxDEV(i.Suspense,{fallback:e.jsxDEV("div",{className:"w-80 h-96 flex items-center justify-center",children:"Loading..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:341,columnNumber:39},this),children:e.jsxDEV(ea,{onEmojiClick:S,autoFocusSearch:!1,height:400,width:350,previewConfig:{showPreview:!1},skinTonesDisabled:!0,searchDisabled:!1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:342,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:341,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:336,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:330,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:319,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:293,columnNumber:11},this),e.jsxDEV(C.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxDEV(_,{onClick:p,disabled:y||!m.trim(),size:"icon",className:M("h-11 w-11 rounded-full flex-shrink-0","bg-brand-light hover:bg-brand-light/90 text-white","disabled:opacity-40 disabled:cursor-not-allowed"),children:e.jsxDEV(Ls,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:374,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:364,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:360,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:291,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:290,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:285,columnNumber:5},this)}function ms(s){const[a,n]=i.useState(!0),l=i.useCallback(()=>{n(!0)},[]),t=i.useCallback(()=>{n(!1)},[]),m=i.useCallback(()=>{n(r=>!r)},[]);return{value:a,onTrue:l,onFalse:t,onToggle:m,setValue:n}}function cs({participant:s,open:a,onClose:n}){var l;return e.jsxDEV(Le,{open:a,onOpenChange:n,children:e.jsxDEV(ye,{className:"max-w-xs p-6 relative flex gap-4",children:[e.jsxDEV(vs,{asChild:!0,children:e.jsxDEV("button",{className:"absolute top-2 right-2 p-1 rounded hover:bg-muted/50",children:e.jsxDEV(Ze,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:17,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:16,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:15,columnNumber:9},this),e.jsxDEV($,{className:"h-24 w-24",children:[e.jsxDEV(P,{src:s.avatarUrl,alt:s.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:22,columnNumber:11},this),e.jsxDEV(O,{children:(l=s.name)==null?void 0:l.charAt(0)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:23,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:21,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col flex-1 justify-between",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("p",{className:"text-xs text-primary",children:s.role},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:28,columnNumber:13},this),e.jsxDEV("p",{className:"text-lg font-medium",children:s.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:29,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsxDEV(_e,{className:"h-4 w-4 flex-shrink-0 mr-1"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:31,columnNumber:15},this),s.address]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:30,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:27,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2 pt-3",children:[e.jsxDEV(_,{size:"icon",variant:"ghost",className:"bg-red-100 hover:bg-red-200",children:e.jsxDEV(ts,{className:"h-4 w-4 text-red-600"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:42,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:37,columnNumber:13},this),e.jsxDEV(_,{size:"icon",variant:"ghost",className:"bg-sky-100 hover:bg-sky-200",children:e.jsxDEV(_e,{className:"h-4 w-4 text-sky-600"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:50,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:45,columnNumber:13},this),e.jsxDEV(_,{size:"icon",variant:"ghost",className:"bg-primary/10 hover:bg-primary/20",children:e.jsxDEV(as,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:58,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:53,columnNumber:13},this),e.jsxDEV(_,{size:"icon",variant:"ghost",className:"bg-secondary/10 hover:bg-secondary/20",children:e.jsxDEV(un,{className:"h-4 w-4 text-secondary"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:66,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:61,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:36,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:26,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:14,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:13,columnNumber:5},this)}cs.propTypes={onClose:Ne.func,open:Ne.bool,participant:Ne.object};const na=s=>s.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2),aa=s=>{const a=s.trim().split(" ");return a.length===1?a[0].slice(0,2).toUpperCase():a.slice(0,2).map(n=>n.charAt(0)).join("").toUpperCase()};function ta({participants:s,conversation:a}){const[n,l]=i.useState(null),t=ms(),m=i.useCallback(d=>{l(d)},[]),r=()=>l(null),h=s.length,D=s.filter(d=>d.status==="online").length,f=e.jsxDEV("div",{className:"flex flex-col items-center py-5 px-3 border-b border-border",children:[e.jsxDEV($,{className:"h-20 w-20 mb-3",children:[e.jsxDEV(P,{src:(a==null?void 0:a.photoURL)||(a==null?void 0:a.avatarUrl),alt:(a==null?void 0:a.displayName)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV(O,{className:"text-lg bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:aa((a==null?void 0:a.displayName)||(a==null?void 0:a.name)||"Group")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:79,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:74,columnNumber:7},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-center mb-1",children:(a==null?void 0:a.displayName)||(a==null?void 0:a.name)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:87,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsxDEV(te,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:93,columnNumber:9},this),e.jsxDEV("span",{children:[h," members",D>0&&e.jsxDEV("span",{className:"ml-1",children:["â€¢ ",D," online"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:97,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:92,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:72,columnNumber:5},this),N=e.jsxDEV(_,{variant:"ghost",onClick:t.onToggle,className:"flex items-center justify-between w-full h-10 px-3 text-xs font-medium text-muted-foreground bg-muted/50",children:[e.jsxDEV("span",{children:["Members (",h,")"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:110,columnNumber:7},this),t.value?e.jsxDEV(Je,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:112,columnNumber:9},this):e.jsxDEV(oe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:114,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:105,columnNumber:5},this),g=e.jsxDEV(de,{className:"h-[224px]",children:e.jsxDEV("ul",{className:"divide-y divide-border",children:s.map(d=>e.jsxDEV("li",{onClick:()=>m(d),className:"flex items-center gap-3 px-3 py-2 cursor-pointer hover:bg-muted/70",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV($,{className:"h-8 w-8",children:[e.jsxDEV(P,{src:d.photoURL||d.avatarUrl,alt:d.name||d.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:130,columnNumber:17},this),e.jsxDEV(O,{children:na(d.name||d.displayName||"User")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:134,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:129,columnNumber:15},this),e.jsxDEV("span",{className:M("absolute bottom-0 right-0 h-2.5 w-2.5 rounded-full border border-background",d.status==="online"?"bg-green-500":d.status==="offline"?"bg-gray-400":"bg-yellow-500")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:139,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:128,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-sm font-medium truncate",children:d.name||d.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:153,columnNumber:17},this),d.isCurrentUser&&e.jsxDEV("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-1.5 py-0.5 rounded-full",children:"You"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:157,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:152,columnNumber:15},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground truncate",children:d.role||"Member"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:162,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:151,columnNumber:13},this)]},d.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:123,columnNumber:11},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:121,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:120,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[f,N,e.jsxDEV("div",{className:M("transition-all overflow-hidden",t.value?"max-h-[224px]":"max-h-0"),children:t.value&&g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:177,columnNumber:7},this),n&&e.jsxDEV(Le,{open:!!n,onOpenChange:r,children:e.jsxDEV(ye,{children:[e.jsxDEV(Ke,{children:e.jsxDEV(Ye,{children:n.name||n.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:190,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:189,columnNumber:13},this),e.jsxDEV(cs,{participant:n,open:!!n,onClose:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:192,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:188,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:187,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:173,columnNumber:5},this)}const la=s=>s.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2);function ia({participant:s,conversation:a}){const n=ms(),l=(s==null?void 0:s.name)||(s==null?void 0:s.displayName)||"Unknown User",t=(s==null?void 0:s.photoURL)||"unknown",m=(s==null?void 0:s.role)||"User",r=(s==null?void 0:s.phoneNumber)||"No phone number",h=(s==null?void 0:s.email)||"No email provided",D=(s==null?void 0:s.status)||"offline",f=e.jsxDEV("div",{className:"flex flex-col items-center py-5 px-3 border-b border-border",children:[e.jsxDEV("div",{className:"relative mb-3",children:[e.jsxDEV($,{className:"h-20 w-20",children:[e.jsxDEV(P,{src:t,alt:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:37,columnNumber:11},this),e.jsxDEV(O,{className:"text-lg",children:la(l)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:38,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:36,columnNumber:9},this),e.jsxDEV("div",{className:M("absolute bottom-1 right-1 h-4 w-4 rounded-full border-2 border-background",Q(D))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:43,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:35,columnNumber:7},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-center mb-1",children:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:49,columnNumber:7},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-1 capitalize",children:D},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:50,columnNumber:7},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:51,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:34,columnNumber:5},this),N=e.jsxDEV(_,{variant:"ghost",onClick:n.onToggle,className:"flex items-center justify-between w-full h-10 px-3 text-xs font-medium text-muted-foreground bg-muted/50",children:[e.jsxDEV("span",{children:"Information"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:61,columnNumber:7},this),n.value?e.jsxDEV(Je,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:63,columnNumber:9},this):e.jsxDEV(oe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:65,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:56,columnNumber:5},this),g=e.jsxDEV("div",{className:M("overflow-hidden transition-all duration-200",n.value?"max-h-40":"max-h-0"),children:e.jsxDEV("div",{className:"flex flex-col px-3 py-2.5 space-y-3 text-sm",children:[e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(Ys,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:79,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Role"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:81,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm",children:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:82,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:80,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:78,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(as,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:87,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col min-w-0",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Email"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:89,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm truncate",children:h},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:86,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(ts,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:95,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Phone"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:97,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm",children:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:98,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:96,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:77,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:71,columnNumber:5},this);return e.jsxDEV("div",{children:[f,N,g]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:106,columnNumber:5},this)}function ma({open:s,onOpenChange:a,conversation:n,participants:l}){if(!n)return null;const t=n.type==="group";return e.jsxDEV(es,{open:s,onOpenChange:a,children:e.jsxDEV(ss,{side:"right",className:"w-[380px] p-0 overflow-y-auto",children:[e.jsxDEV(Es,{className:"sr-only",children:e.jsxDEV(Us,{children:t?"Group Details":"Contact Details"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:28,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:27,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col h-full",children:t?e.jsxDEV(ta,{participants:l,conversation:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:35,columnNumber:13},this):e.jsxDEV(ia,{participant:l.find(m=>!m.isCurrentUser),conversation:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:40,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:33,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:26,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:25,columnNumber:5},this)}function pa(){const s=ue(),{id:a}=As({from:"/_authenticated/chat/"}),{data:n}=le(),l=n==null?void 0:n.user,[t,m]=i.useState(null),[r,h]=i.useState(!1),{threads:D,loading:f,error:N,refetch:g}=Sn(l==null?void 0:l.id),{messages:d,loading:u,sendMessage:c,deleteMessage:x,error:b}=kn(a||void 0);i.useEffect(()=>{N&&(console.error("Threads error:",N),F.error("Failed to load conversations")),b&&(console.error("Messages error:",b),F.error("Failed to load messages"))},[N,b]),i.useEffect(()=>{m(null)},[a]);const p=D.map(E=>{var G;const R=E.isGroup?E.name||"Unnamed Group":E.members.filter(T=>T.userId!==(l==null?void 0:l.id)).map(T=>T.user.name).join(", ")||"Unknown",K=E.isGroup?E.avatarUrl:(G=E.members.find(T=>T.userId!==(l==null?void 0:l.id)))==null?void 0:G.user.image,Y=E.members.map(T=>({id:T.userId,name:T.user.name,username:T.user.username,email:T.user.email,phoneNumber:T.user.phoneNumber,image:T.user.image,displayName:T.user.name,photoURL:T.user.image,status:"online",role:T.role,isCurrentUser:T.userId===(l==null?void 0:l.id)})),q=E.messages.length>0?{content:E.messages[0].content,createdAt:E.messages[0].createdAt,sender:{name:E.messages[0].sender.name}}:null;return{id:E.id,type:E.isGroup?"group":"direct",displayName:R,name:E.name,photoURL:K,avatarUrl:E.avatarUrl,isGroup:E.isGroup,participants:Y,messages:[],lastMessage:q,unreadCount:0}}),L=a?p.find(E=>E.id===a):null,U=(L==null?void 0:L.participants)||[];i.useEffect(()=>{h(!1)},[a]);const w=i.useCallback(()=>{h(!0)},[]),S=i.useCallback(E=>{m(E)},[]),y=i.useCallback(()=>{m(null)},[]),A=i.useCallback(async E=>{if(!x){F.error("Delete functionality not available");return}try{await x(E),F.success("Message deleted successfully")}catch(R){console.error("Failed to delete message:",R)}},[x]),V=i.useCallback(async E=>{if(!(l!=null&&l.id)||!a){F.error("Unable to send message. Please select a conversation.");return}try{await c(E,l.id,t==null?void 0:t.id),m(null)}catch(R){console.error("Failed to send message:",R),F.error("Failed to send message. Please try again.")}},[c,l==null?void 0:l.id,a,t]),o=i.useCallback(E=>{s({to:"/chat",search:{id:E}})},[s]);if(f&&D.length===0)return e.jsxDEV("div",{className:"flex-1 flex items-center justify-center h-[calc(100vh-4rem)]",children:e.jsxDEV(C.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-brand-light to-brand-dark flex items-center justify-center",children:e.jsxDEV(ne,{className:"w-8 h-8 text-white"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:150,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:149,columnNumber:13},this),e.jsxDEV(C.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute -inset-2 border-2 border-brand-light/30 border-t-brand-light rounded-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:152,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:148,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground font-medium",children:"Loading conversations..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:160,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:141,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:140,columnNumber:12},this);const v=()=>e.jsxDEV(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.32,.72,0,1]},className:"flex-1 flex items-center justify-center px-8",children:e.jsxDEV("div",{className:"text-center max-w-sm",children:[e.jsxDEV("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(ne,{className:"w-10 h-10 text-muted-foreground/40"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:178,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:177,columnNumber:9},this),e.jsxDEV("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"No conversation selected"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:180,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Choose a chat from the sidebar to start messaging"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:183,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:176,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:166,columnNumber:34},this),k=()=>e.jsxDEV("div",{className:"flex items-center px-4 py-3 min-h-[68px] border-b bg-background sticky top-0 z-10",children:a&&L?e.jsxDEV(On,{participants:U,conversation:L,onDetailsClick:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:189,columnNumber:56},this):e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(ne,{className:"w-5 h-5 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:191,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:190,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-[15px] font-semibold",children:"Messages"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:194,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:[p.length," conversation",p.length!==1?"s":""]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:195,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:193,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:189,columnNumber:177},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:188,columnNumber:30},this),j=()=>!a||!L?v():e.jsxDEV("div",{className:"flex flex-col w-full h-full overflow-hidden",children:[e.jsxDEV(Jn,{messages:d,participants:U,loading:u,threadId:a,onReply:S,onDelete:A},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:206,columnNumber:9},this),e.jsxDEV(sa,{selectedConversationId:a,disabled:!a||u,onSendMessage:V,replyingTo:t,onCancelReply:y},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:208,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:205,columnNumber:12},this);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex h-[calc(100vh-4rem)] overflow-hidden",children:[e.jsxDEV("div",{className:"w-[340px] flex-shrink-0 border-r border-border/40 bg-background",children:e.jsxDEV(Pn,{conversations:p,loading:f,selectedConversationId:a,user:l,onConversationSelect:o,onThreadCreated:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:214,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:213,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 flex flex-col min-w-0 bg-background",children:e.jsxDEV(B,{mode:"wait",children:e.jsxDEV(C.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:[.32,.72,0,1]},className:"flex-1 flex flex-col h-full overflow-hidden",children:[k(),j()]},a||"empty",!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:219,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:218,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:217,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:212,columnNumber:7},this),e.jsxDEV(ma,{open:r,onOpenChange:h,conversation:L,participants:U},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:239,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:211,columnNumber:10},this)}export{pa as component};
