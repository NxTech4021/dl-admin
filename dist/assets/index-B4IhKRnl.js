const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/leagues-data-table-Cd_-xOAc.js","assets/index-DbmPa2XL.js","assets/index-BP0zEeQs.css","assets/animation-variants-Don9j8OV.js","assets/alert-dialog-CLe482Ox.js","assets/table-BF-37yB1.js","assets/skeleton-F4cLaLXW.js","assets/sports-BjJdfO-f.js","assets/dropdown-menu-CelLwBBH.js","assets/index-BbnVvqEk.js","assets/IconDotsVertical-CeT6qTPW.js","assets/IconEye-D9_dM6CQ.js","assets/site-header-CsIIOxWC.js","assets/use-notifications-BOJ6Og0W.js","assets/IconEdit-C-iTvK_x.js","assets/IconCopy-D2qz4_-1.js","assets/constants-DiLdiRGg.js","assets/IconHash-PXOXY5gV.js","assets/IconMapPin-H9nw6eYn.js","assets/IconChevronLeft-D7dY7Drb.js","assets/IconChevronRight-GLtIVBi4.js","assets/league-create-modal-CBNAqzaL.js","assets/league-HRj3i0FE.js"])))=>i.map(i=>d[i]);
import{r as n,aa as u,k as H,l as Q,t as S,j as e,ab as T,E as K,B as g,ae as q,ac as k}from"./index-DbmPa2XL.js";import{S as J,c as W,I as X}from"./site-header-CsIIOxWC.js";import{P as Y}from"./page-header-WJ4ph1iF.js";import{S as L}from"./stats-card-BixNKjKR.js";import{l as Z}from"./league-schema-RdApMHAz.js";import{z as ee}from"./external-TOYCkcbO.js";import{A as te,a as w,b as se,d as ae}from"./animated-container-Cw4NnAdm.js";import{S as ne}from"./search-input-CkuhskT_.js";import{F as I}from"./filter-select-CYGwZ2d8.js";import{I as ie}from"./IconDownload-CjVtm-wR.js";import"./use-notifications-BOJ6Og0W.js";import"./skeleton-F4cLaLXW.js";import"./coerce-DeGA3Dha.js";import"./animation-variants-Don9j8OV.js";const le=[{value:"TENNIS",label:"Tennis"},{value:"PICKLEBALL",label:"Pickleball"},{value:"PADEL",label:"Padel"}],oe=n.lazy(()=>k(()=>import("./leagues-data-table-Cd_-xOAc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])).then(o=>({default:o.LeaguesDataTable}))),re=n.lazy(()=>k(()=>import("./league-create-modal-CBNAqzaL.js"),__vite__mapDeps([21,1,2,22,18])).then(o=>({default:o.default})));function ve(){const[o,v]=n.useState(!1),[l,x]=u.useState([]),[O,P]=u.useState(0),[m,y]=u.useState(!0),[h,A]=n.useState(""),[N,_]=n.useState(void 0),[D,E]=n.useState(void 0),j=n.useMemo(()=>[...new Set(l.map(i=>i.location).filter(Boolean))].sort().map(i=>({value:i,label:i})),[l]),M=h||N||D,F=n.useCallback(()=>{A(""),_(void 0),E(void 0)},[]),r=u.useCallback(async()=>{y(!0);try{const s=await H.get(Q.league.getAll);if(!s.data||!s.data.data||!s.data.data.leagues){x([]);return}const i=s.data.data.leagues,b=s.data.data.totalMembers||0;P(b);const f=i.map(t=>{var p,C,U;const a=((p=t.seasons)==null?void 0:p.reduce((B,G)=>{var V;const $=((V=G._count)==null?void 0:V.memberships)||0;return B+$},0))||0;return{id:t.id,name:t.name,location:t.location,description:t.description,status:t.status,sportType:t.sportType,joinType:t.joinType,registrationType:t.registrationType,gameType:t.gameType,createdById:t.createdById,createdAt:t.createdAt,updatedAt:t.updatedAt,memberCount:a,seasonCount:((C=t._count)==null?void 0:C.seasons)||0,categoryCount:((U=t._count)==null?void 0:U.categories)||0}}),d=ee.array(Z).parse(f);x(d)}catch{x([])}finally{y(!1)}},[]);u.useEffect(()=>{r()},[r]);const R=async()=>{await r()},z=n.useCallback(()=>{if(l.length===0){S.error("No data to export");return}const s=["Name","Sport","Location","Status","Game Type","Players","Seasons","Created At"],i=l.map(a=>[a.name,a.sportType||"",a.location||"",a.status||"",a.gameType||"",a.memberCount||0,a.seasonCount||0,a.createdAt]),b=[s.join(","),...i.map(a=>a.map(p=>`"${String(p).replace(/"/g,'""')}"`).join(","))].join(`
`),f=new Blob([b],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(f),t=document.createElement("a");t.href=d,t.download=`leagues-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(d),S.success("Leagues exported successfully")},[l]),c=l;return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(J,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:126,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-1 flex-col",children:e.jsxDEV("div",{className:"@container/main flex flex-1 flex-col gap-2",children:[e.jsxDEV(Y,{icon:T,title:"League Management",description:"Manage leagues, seasons, and player memberships",actions:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(g,{size:"sm",onClick:()=>v(!0),children:[e.jsxDEV(q,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:131,columnNumber:17},this),"Create League"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:130,columnNumber:15},this),e.jsxDEV(n.Suspense,{fallback:null,children:e.jsxDEV(re,{open:o,onOpenChange:v,onLeagueCreated:R},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:135,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:134,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:129,columnNumber:138},this),children:[e.jsxDEV(te,{className:"grid gap-4 grid-cols-2 md:grid-cols-3",children:[e.jsxDEV(w,{children:e.jsxDEV(L,{title:"Total Leagues",value:c.length,description:`${c.filter(s=>s.status==="ACTIVE"||s.status==="ONGOING").length} currently active`,icon:T,loading:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:140,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:139,columnNumber:13},this),e.jsxDEV(w,{children:e.jsxDEV(L,{title:"Total Members",value:O,description:"Total players across all seasons",icon:K,iconColor:"text-blue-500",loading:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:143,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:142,columnNumber:13},this),e.jsxDEV(w,{children:e.jsxDEV(L,{title:"Total Seasons",value:c.reduce((s,i)=>s+(i.seasonCount||0),0),description:"Across all leagues",icon:W,iconColor:"text-green-500",loading:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:146,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:145,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:138,columnNumber:11},this),e.jsxDEV(se,{children:e.jsxDEV("div",{className:"flex items-center gap-2 w-full",children:[e.jsxDEV(ne,{value:h,onChange:A,placeholder:"Search leagues...",className:"w-[220px]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:153,columnNumber:15},this),e.jsxDEV(I,{value:N,onChange:_,options:le,allLabel:"All Sports",triggerClassName:"w-[140px]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:154,columnNumber:15},this),j.length>0&&e.jsxDEV(I,{value:D,onChange:E,options:j,allLabel:"All Locations",triggerClassName:"w-[160px]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:155,columnNumber:46},this),M&&e.jsxDEV(g,{variant:"ghost",size:"sm",onClick:F,className:"text-muted-foreground hover:text-foreground cursor-pointer",children:"Clear all"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:156,columnNumber:36},this),e.jsxDEV("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsxDEV(g,{variant:"outline",size:"sm",onClick:z,className:"cursor-pointer",children:[e.jsxDEV(ie,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:161,columnNumber:19},this),"Export"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:160,columnNumber:17},this),e.jsxDEV(g,{variant:"outline",size:"sm",onClick:r,className:"cursor-pointer",children:[e.jsxDEV(X,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:165,columnNumber:19},this),"Refresh"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:164,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:159,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:152,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:151,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:129,columnNumber:11},this),e.jsxDEV(ae,{delay:.2,children:e.jsxDEV("div",{className:"flex-1 px-4 lg:px-6 pb-6",children:e.jsxDEV(n.Suspense,{fallback:e.jsxDEV("div",{className:"h-96 animate-pulse bg-muted rounded-lg"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:175,columnNumber:33},this),children:e.jsxDEV(oe,{data:c,isLoading:m,onDataChange:r,searchQuery:h,sportFilter:N,locationFilter:D},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:176,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:175,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:174,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:173,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:128,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:127,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:125,columnNumber:10},this)}export{ve as component};
