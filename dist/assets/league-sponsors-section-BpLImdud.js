import{r as a,u as O,k as x,l as h,t as g,bD as U,j as e,B as N,aO as V,K as R,N as $,P as F,Q as z,R as B,h as M,a0 as P,a1 as K,a2 as G,a3 as H,a4 as C}from"./index-Cwdwjhcx.js";import{C as Q}from"./confirmation-modal-DNlLb9UE.js";import{I as Z}from"./IconPlus-Cxk17R4w.js";import{t as q}from"./site-header-CkiQ_OQH.js";import"./IconAlertTriangle-CcuPPj2B.js";import"./use-notifications-Du3QgAy6.js";function J(){const[o,m]=a.useState({open:!1,title:"",description:"",onConfirm:()=>{},isLoading:!1,variant:"default"}),b=a.useCallback(l=>{m({...l,open:!0,isLoading:!1})},[]),u=a.useCallback(()=>{m(l=>({...l,open:!1}))},[]),f=a.useCallback(l=>{m(d=>({...d,isLoading:l}))},[]);return{...o,showConfirmation:b,hideConfirmation:u,setLoading:f}}const W=o=>new Date(o).toLocaleDateString("en-US",{month:"short",year:"numeric"}),X=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(o);function ae({sponsorships:o,leagueId:m,onAssignSponsor:b,onSponsorDeleted:u}){const f=O(),[l,d]=a.useState(!1),[w,L]=a.useState([]),[p,y]=a.useState(""),[v,A]=a.useState(!1),n=J();a.useEffect(()=>{if(!l)return;const s=new AbortController;return(async()=>{var c;A(!0);try{const i=(await x.get(h.sponsors.getAll,{signal:s.signal})).data,I=(((c=i==null?void 0:i.data)==null?void 0:c.sponsorships)||(i==null?void 0:i.data)||i||[]).map(D=>{var E;return{id:D.id,label:((E=D.company)==null?void 0:E.name)||D.sponsoredName||"Unnamed Sponsor"}});L(I)}catch{if(s.signal.aborted)return;L([]),g.error("Failed to load sponsors")}finally{s.signal.aborted||A(!1)}})(),()=>{s.abort()}},[l]);const S=()=>{d(!0)},j=s=>{s&&f({to:`/utilities/sponsors/view/${s}`})},k=a.useCallback((s,r)=>{n.showConfirmation({title:"Remove Sponsor",description:`Are you sure you want to remove "${r}" from this league?`,variant:"destructive",confirmText:"Remove",cancelText:"Cancel",onConfirm:async()=>{n.setLoading(!0);try{await x.delete(h.sponsors.delete(s)),g.success(`"${r}" has been removed from the league`),n.hideConfirmation(),u&&await u()}catch(c){g.error(U(c,"Failed to remove sponsor from league"))}finally{n.setLoading(!1)}}})},[n,u]),T=s=>{switch(s==null?void 0:s.toUpperCase()){case"PLATINUM":return"text-slate-700 bg-slate-100 border-slate-300";case"GOLD":return"text-yellow-700 bg-yellow-50 border-yellow-300";case"SILVER":return"text-gray-600 bg-gray-50 border-gray-300";case"BRONZE":return"text-orange-700 bg-orange-50 border-orange-300";default:return"text-gray-600 bg-gray-50 border-gray-300"}};return e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("h3",{className:"text-sm font-medium text-muted-foreground",children:"Sponsors"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:172,columnNumber:11},this),(o==null?void 0:o.length)>0&&e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:["(",o.length,")"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:176,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:171,columnNumber:9},this),e.jsxDEV(N,{variant:"ghost",size:"sm",onClick:S,className:"h-8 px-2 text-xs","aria-label":"Add sponsor to league",children:[e.jsxDEV(Z,{className:"w-3 h-3 mr-1","aria-hidden":"true"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:188,columnNumber:11},this),"Add"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:181,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:170,columnNumber:7},this),o&&o.length>0?e.jsxDEV("div",{className:"space-y-2",role:"list","aria-label":"Assigned sponsors",children:o.map(s=>{var c;const r=((c=s.company)==null?void 0:c.name)||s.sponsoredName||"Sponsor";return e.jsxDEV("div",{className:"group flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>{var t;return j((t=s.company)==null?void 0:t.id)},role:"listitem","aria-label":`Sponsor: ${r}`,tabIndex:0,onKeyDown:t=>{var i;(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),j((i=s.company)==null?void 0:i.id))},children:[e.jsxDEV("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-md bg-muted flex items-center justify-center flex-shrink-0",children:e.jsxDEV(V,{className:"w-4 h-4 text-muted-foreground","aria-hidden":"true"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:214,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:213,columnNumber:19},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("h4",{className:"font-medium text-sm truncate",children:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:218,columnNumber:23},this),e.jsxDEV("span",{className:`text-xs px-1.5 py-0.5 rounded ${T(s.tier||s.packageTier)}`,children:s.tier||s.packageTier||"Standard"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:221,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:217,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground",children:[(s.amount||s.contractAmount)&&e.jsxDEV("span",{className:"font-medium",children:X(Number(s.amount||s.contractAmount))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:231,columnNumber:25},this),s.startDate&&e.jsxDEV("span",{children:W(s.startDate)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:235,columnNumber:39},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:229,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:216,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:212,columnNumber:17},this),e.jsxDEV(N,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground hover:text-destructive",onClick:t=>{t.stopPropagation(),k(s.id,r)},"aria-label":`Remove ${r} from league`,children:e.jsxDEV(q,{className:"w-3 h-3","aria-hidden":"true"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:249,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:239,columnNumber:17},this)]},s.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:198,columnNumber:15},this)})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:194,columnNumber:9},this):e.jsxDEV("div",{className:"text-center py-6",role:"status","aria-label":"No sponsors assigned",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-md bg-muted mx-auto mb-2 flex items-center justify-center",children:e.jsxDEV(V,{className:"w-4 h-4 text-muted-foreground","aria-hidden":"true"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:258,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:257,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"No sponsors assigned"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:260,columnNumber:11},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:'Click "Add" to assign sponsors'},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:261,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:256,columnNumber:9},this),e.jsxDEV(R,{open:l,onOpenChange:d,children:e.jsxDEV($,{className:"max-w-md",children:[e.jsxDEV(F,{children:[e.jsxDEV(z,{className:"text-lg",children:"Assign Sponsor"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:271,columnNumber:13},this),e.jsxDEV(B,{children:"Select a sponsorship to assign to this league."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:272,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:270,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(M,{className:"text-sm font-medium",children:"Sponsorship"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:278,columnNumber:15},this),e.jsxDEV(P,{value:p,onValueChange:y,children:[e.jsxDEV(K,{className:"h-9",children:e.jsxDEV(G,{placeholder:v?"Loading...":"Choose sponsorship"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:281,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:280,columnNumber:17},this),e.jsxDEV(H,{children:w.length>0?w.map(s=>e.jsxDEV(C,{value:s.id,children:s.label},s.id,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:288,columnNumber:23},this)):e.jsxDEV(C,{disabled:!0,value:"none",children:v?"Loading...":"No sponsorships found"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:293,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:285,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:279,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:277,columnNumber:13},this),e.jsxDEV("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsxDEV(N,{variant:"outline",size:"sm",onClick:()=>d(!1),children:"Cancel"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:301,columnNumber:15},this),e.jsxDEV(N,{size:"sm",disabled:!p||!m,onClick:async()=>{if(!(!p||!m))try{await x.put(h.sponsors.update(p),{leagueIds:[m]}),g.success("Sponsor assigned to league"),d(!1),y(""),u&&await u()}catch(s){g.error(U(s,"Failed to assign sponsor"))}},children:"Assign"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:308,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:300,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:276,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:269,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:268,columnNumber:7},this),e.jsxDEV(Q,{open:n.open,onOpenChange:s=>{s||n.hideConfirmation()},title:n.title,description:n.description,confirmText:n.confirmText,cancelText:n.cancelText,onConfirm:n.onConfirm,isLoading:n.isLoading,variant:n.variant},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:342,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/league/league-sponsors-section.tsx",lineNumber:169,columnNumber:5},this)}export{ae as LeagueSponsorsSection,ae as default};
