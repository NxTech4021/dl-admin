const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/seasons-data-table-Be9Mf7EH.js","assets/index-BhJxrXm-.js","assets/index-37X8X0xr.css","assets/animation-variants-DxvUkNuY.js","assets/alert-dialog-CPWj1quG.js","assets/table-DrYcIDvM.js","assets/use-notifications-DLwVzHk4.js","assets/skeleton-n4fk542y.js","assets/sports-CgXe2Ig2.js","assets/dropdown-menu-BtL9yl7Q.js","assets/index-Djh1U9zQ.js","assets/IconDotsVertical-BLDMi51Q.js","assets/IconEye-DAVnnHd5.js","assets/site-header-CLzro3EY.js","assets/IconEdit-DuSJ0m0x.js","assets/IconCopy-BXOySSOk.js","assets/IconCategory-DGtWAGSj.js","assets/constants-D_wQXR5Q.js","assets/IconHash-DufQVEkv.js","assets/IconChevronRight-DADmNcDF.js","assets/IconCurrencyDollar-N7LahSAz.js","assets/IconClock-Drjw3b-v.js","assets/IconSettings-CaurdpWY.js","assets/season-edit-modal-CbLkERF1.js","assets/eye-Bcf2cC5Q.js","assets/IconDownload-CRGlJiPa.js","assets/IconChevronLeft-CEnxh4B0.js"])))=>i.map(i=>d[i]);
import{D as E,Z as d,u as _,k as V,l as j,j as e,B as S,r as b,_ as U}from"./index-BhJxrXm-.js";import{S as I,e as C,f as R,b as k}from"./site-header-CLzro3EY.js";import{P as M}from"./page-header-CcEwz9F2.js";import{S as u}from"./stats-card-D1du9MYu.js";import{s as F}from"./season-schema-DVFNm_2a.js";import{z as N}from"./external-DCTon813.js";import{A as P,a as p,d as T}from"./animated-container-D5obiq7b.js";import{I as z}from"./IconStar-D3sTGQ_P.js";import{I as $}from"./IconDownload-CRGlJiPa.js";import"./use-notifications-DLwVzHk4.js";import"./skeleton-n4fk542y.js";import"./schemas-B5fuxOj7.js";import"./coerce-C-pLok-C.js";import"./compat-Blf4Bw1-.js";import"./animation-variants-DxvUkNuY.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M12 12m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M4 4l3 3",key:"svg-1"}],["path",{d:"M20 4l-3 3",key:"svg-2"}],["path",{d:"M4 20l3 -3",key:"svg-3"}],["path",{d:"M20 20l-3 -3",key:"svg-4"}]],H=E("outline","currency","Currency",B),Z=b.lazy(()=>U(()=>import("./seasons-data-table-Be9Mf7EH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26])).then(g=>({default:g.SeasonsDataTable})));function oe(){const[g,x]=d.useState([]),[r,h]=d.useState(!0),[m,a]=d.useState(null),y=_(),o=d.useCallback(async()=>{var t,n;h(!0),a(null);try{const s=await V.get(j.season.getAll);let i=[];if(Array.isArray(s.data)?i=s.data:(t=s.data)!=null&&t.data&&Array.isArray(s.data.data)?i=s.data.data:(n=s.data)!=null&&n.seasons&&Array.isArray(s.data.seasons)&&(i=s.data.seasons),!i||i.length===0){x([]);return}const c=N.array(F).parse(i);x(c),a(null)}catch(s){console.error("Failed to fetch seasons:",s),s instanceof N.ZodError?(a("Invalid data format"),console.error("Validation errors:",s.issues)):s instanceof Error?s.message.includes("Network Error")?a("Network error"):s.message.includes("timeout")?a("Request timeout"):s.message.includes("401")||s.message.includes("403")?a("Access denied"):a("Failed to load"):a("Unexpected error"),x([])}finally{h(!1)}},[]);d.useEffect(()=>{o()},[o]);const w=t=>{y({to:"/seasons/$seasonId",params:{seasonId:t}})},l=g,f=l.length,v=l.filter(t=>t.status==="ACTIVE").length,D=l.reduce((t,n)=>{var s;return t+(((s=n.memberships)==null?void 0:s.length)||0)},0),L=l.reduce((t,n)=>{var c;const s=parseFloat((n==null?void 0:n.entryFee)||"0")||0,i=((c=n.memberships)==null?void 0:c.length)||0;return t+s*i},0),A=f>0?Math.round(D/f):0;return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(I,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:87,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-1 flex-col",children:e.jsxDEV("div",{className:"@container/main flex flex-1 flex-col gap-2",children:[e.jsxDEV(M,{icon:C,title:"Seasons Management",description:"Manage league seasons and tournaments",actions:e.jsxDEV(e.Fragment,{children:e.jsxDEV(S,{variant:"outline",size:"sm",children:[e.jsxDEV($,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:92,columnNumber:17},this),"Export"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:91,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:90,columnNumber:131},this),children:e.jsxDEV(P,{className:"grid gap-4 grid-cols-2 md:grid-cols-4",children:[e.jsxDEV(p,{children:e.jsxDEV(u,{title:"Total Seasons",value:f,description:`${v} currently active`,icon:R,iconColor:"text-primary",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:98,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:97,columnNumber:13},this),e.jsxDEV(p,{children:e.jsxDEV(u,{title:"Total Participants",value:D,description:"Across all seasons",icon:k,iconColor:"text-blue-500",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:101,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:100,columnNumber:13},this),e.jsxDEV(p,{children:e.jsxDEV(u,{title:"Total Revenue",value:`RM ${L.toLocaleString("en-MY",{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:"From all season entry fees",icon:H,iconColor:"text-green-500",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:104,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:103,columnNumber:13},this),e.jsxDEV(p,{children:e.jsxDEV(u,{title:"Average per Season",value:A,description:"Players per season",icon:z,iconColor:"text-yellow-500",loading:r,error:m,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:110,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:109,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:96,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:90,columnNumber:11},this),e.jsxDEV(T,{delay:.2,children:e.jsxDEV("div",{className:"flex-1 px-4 lg:px-6 pb-6",children:e.jsxDEV(b.Suspense,{fallback:e.jsxDEV("div",{className:"h-96 animate-pulse bg-muted rounded-lg"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:117,columnNumber:33},this),children:e.jsxDEV(Z,{data:l,isLoading:r,onViewSeason:w,onRefresh:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:118,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:117,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:116,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:115,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:89,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:88,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:86,columnNumber:10},this)}export{oe as component};
