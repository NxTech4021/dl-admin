import{r as a,k as h,l as f,j as e,P as x,Q as L,R as w,V as b,ao as P,B as v,W as Q,h as d,I as N,aj as Y,ak as Z,al as _,am as q,an as J,aQ as X,aR as $,ji as ee,aS as se,d as F,jj as le,J as B,N as oe,Y as ne,t as y}from"./index-BkrdirJj.js";const ae=[{value:"BRONZE",label:"Bronze"},{value:"SILVER",label:"Silver"},{value:"GOLD",label:"Gold"},{value:"PLATINUM",label:"Platinum"}],ie=i=>{switch(i==null?void 0:i.toUpperCase()){case"PADEL":return"default";case"PICKLEBALL":return"secondary";case"TENNIS":return"outline";default:return"outline"}};function re({open:i,onOpenChange:r,sponsorId:t,onSponsorUpdated:E}){const[o,m]=a.useState({sponsoredName:"",packageTier:"BRONZE",contractAmount:null,sponsorRevenue:null,leagueIds:[]}),[A,j]=a.useState(!1),[O,U]=a.useState(!1),[V,g]=a.useState([]),[M,S]=a.useState(!1),[k,W]=a.useState(!1),[p,G]=a.useState(""),D=a.useRef(null),[I,C]=a.useState("");a.useEffect(()=>{i&&t&&(U(!0),C(""),h.get(f.sponsors.getById(t)).then(s=>{var n;const l=s.data.data;m({sponsoredName:l.sponsoredName||"",packageTier:l.packageTier,contractAmount:l.contractAmount,sponsorRevenue:l.sponsorRevenue,leagueIds:((n=l.leagues)==null?void 0:n.map(u=>u.id))||[]})}).catch(s=>{console.error("Error fetching sponsor:",s),C("Failed to load sponsor data")}),S(!0),h.get(f.league.getAll).then(s=>{var n,u,T;const l=((u=(n=s.data)==null?void 0:n.data)==null?void 0:u.leagues)||((T=s.data)==null?void 0:T.leagues)||[];Array.isArray(l)?g(l):(console.warn("Leagues data is not an array:",l),g([]))}).catch(s=>{console.error("Error fetching leagues:",s),g([])}).finally(()=>{S(!1),U(!1)}))},[i,t]);const z=s=>{m(l=>({...l,leagueIds:l.leagueIds.includes(s)?l.leagueIds.filter(n=>n!==s):[...l.leagueIds,s]}))},H=s=>{m(l=>({...l,leagueIds:l.leagueIds.filter(n=>n!==s)}))},c=V.filter(s=>o.leagueIds.includes(s.id)),R=V.filter(s=>s.name.toLowerCase().includes(p.toLowerCase())),K=async()=>{var s,l;if(!o.sponsoredName||!o.packageTier||o.leagueIds.length===0){y.error("Please fill in all required fields");return}j(!0);try{await h.put(f.sponsors.update(t),{sponsoredName:o.sponsoredName,packageTier:o.packageTier,contractAmount:o.contractAmount,sponsorRevenue:o.sponsorRevenue,leagueIds:o.leagueIds}),y.success("Sponsor updated successfully!"),r(!1),E&&await E()}catch(n){console.error("Error updating sponsor:",n),y.error(((l=(s=n.response)==null?void 0:s.data)==null?void 0:l.message)||"Failed to update sponsor")}finally{j(!1)}};return O?e.jsxDEV(x,{open:i,onOpenChange:r,children:e.jsxDEV(L,{className:"sm:max-w-lg",children:[e.jsxDEV(w,{children:e.jsxDEV(b,{children:"Loading"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:219,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:218,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center justify-center h-96",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(P,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:223,columnNumber:15},this),"Loading sponsor data..."]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:222,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:221,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:217,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:216,columnNumber:7},this):I?e.jsxDEV(x,{open:i,onOpenChange:r,children:e.jsxDEV(L,{className:"sm:max-w-lg",children:[e.jsxDEV(w,{children:e.jsxDEV(b,{children:"Error"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:237,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:236,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center justify-center h-96",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-destructive mb-4",children:I},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:241,columnNumber:15},this),e.jsxDEV(v,{onClick:()=>r(!1),children:"Close"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:242,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:240,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:239,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:235,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:234,columnNumber:7},this):e.jsxDEV(x,{open:i,onOpenChange:r,children:e.jsxDEV(L,{className:"sm:max-w-lg",children:[e.jsxDEV(w,{children:[e.jsxDEV(b,{children:"Edit Sponsor"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:254,columnNumber:11},this),e.jsxDEV(Q,{children:"Update the sponsorship package details and league assignments."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:255,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:253,columnNumber:9},this),e.jsxDEV("div",{className:"grid gap-6",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(d,{htmlFor:"sponsoredName",children:"Sponsor Name *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:262,columnNumber:13},this),e.jsxDEV(N,{id:"sponsoredName",value:o.sponsoredName,onChange:s=>m(l=>({...l,sponsoredName:s.target.value})),placeholder:"Enter sponsor name",className:"h-11"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:263,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:261,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(d,{htmlFor:"packageTier",children:"Package Tier *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:278,columnNumber:13},this),e.jsxDEV(Y,{value:o.packageTier,onValueChange:s=>m(l=>({...l,packageTier:s})),children:[e.jsxDEV(Z,{className:"h-11",children:e.jsxDEV(_,{placeholder:"Select package tier"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:289,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:288,columnNumber:15},this),e.jsxDEV(q,{children:ae.map(s=>e.jsxDEV(J,{value:s.value,children:s.label},s.value,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:293,columnNumber:19},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:291,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:279,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:277,columnNumber:11},this),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(d,{htmlFor:"contractAmount",children:"Contract Amount (RM)"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:303,columnNumber:15},this),e.jsxDEV(N,{id:"contractAmount",type:"number",step:"0.01",value:o.contractAmount||"",onChange:s=>m(l=>({...l,contractAmount:s.target.value?parseFloat(s.target.value):null})),placeholder:"0.00",className:"h-11"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:304,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:302,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(d,{htmlFor:"sponsorRevenue",children:"Sponsor Revenue (RM)"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:323,columnNumber:15},this),e.jsxDEV(N,{id:"sponsorRevenue",type:"number",step:"0.01",value:o.sponsorRevenue||"",onChange:s=>m(l=>({...l,sponsorRevenue:s.target.value?parseFloat(s.target.value):null})),placeholder:"0.00",className:"h-11"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:324,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:322,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:301,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(d,{children:"Select Leagues *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:345,columnNumber:13},this),e.jsxDEV(X,{open:k,onOpenChange:W,children:[e.jsxDEV($,{asChild:!0,children:e.jsxDEV(v,{variant:"outline",role:"combobox","aria-expanded":k,className:"w-full justify-between h-11",children:[c.length>0?`${c.length} league(s) selected`:"Select leagues...",e.jsxDEV(ee,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:357,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:348,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:347,columnNumber:15},this),e.jsxDEV(se,{className:"w-full p-0",style:{maxHeight:"400px"},children:e.jsxDEV("div",{className:"p-2",children:[e.jsxDEV(N,{placeholder:"Search leagues...",className:"mb-2",value:p,onChange:s=>G(s.target.value)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:365,columnNumber:19},this),e.jsxDEV("div",{ref:D,className:"max-h-64 overflow-y-auto overflow-x-hidden",style:{scrollbarWidth:"thin",scrollbarColor:"#d1d5db #f3f4f6",WebkitOverflowScrolling:"touch"},onWheel:s=>{s.preventDefault(),s.stopPropagation(),D.current&&(D.current.scrollTop+=s.deltaY)},children:M?e.jsxDEV("div",{className:"p-2 text-sm text-muted-foreground text-center",children:"Loading leagues..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:388,columnNumber:23},this):R.length===0?e.jsxDEV("div",{className:"p-2 text-sm text-muted-foreground text-center",children:p?"No leagues found matching your search.":"No leagues found."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:392,columnNumber:23},this):R.map(s=>{var l;return e.jsxDEV("div",{onClick:()=>z(s.id),className:F("flex items-center justify-between px-2 py-1.5 text-sm cursor-pointer rounded-sm hover:bg-accent hover:text-accent-foreground",o.leagueIds.includes(s.id)&&"bg-accent text-accent-foreground"),children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(le,{className:F("mr-2 h-4 w-4",o.leagueIds.includes(s.id)?"opacity-100":"opacity-0")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:409,columnNumber:29},this),e.jsxDEV("span",{className:"font-medium",children:s.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:417,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:408,columnNumber:27},this),e.jsxDEV(B,{variant:ie(s.sportType),className:"text-xs capitalize",children:((l=s.sportType)==null?void 0:l.toLowerCase())||"Unknown"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:419,columnNumber:27},this)]},s.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:399,columnNumber:25},this)})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:371,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:364,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:360,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:346,columnNumber:13},this),c.length>0&&e.jsxDEV("div",{className:"flex flex-wrap gap-2 mt-2",children:c.map(s=>e.jsxDEV(B,{variant:"secondary",className:"flex items-center gap-1",children:[s.name,e.jsxDEV(oe,{className:"h-3 w-3 cursor-pointer",onClick:()=>H(s.id)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:443,columnNumber:21},this)]},s.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:437,columnNumber:19},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:435,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:344,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:260,columnNumber:9},this),e.jsxDEV(ne,{className:"mt-6",children:e.jsxDEV(v,{onClick:K,disabled:A||!o.sponsoredName||!o.packageTier||o.leagueIds.length===0,className:"w-full sm:w-auto",children:A?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(P,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:467,columnNumber:17},this),"Updating..."]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:466,columnNumber:15},this):"Update Sponsor"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:455,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:454,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:252,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-edit-modal.tsx",lineNumber:251,columnNumber:5},this)}export{re as SponsorEditModal};
