const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/seasons-data-table-Ba1_xo9f.js","assets/index-BBfLVePp.js","assets/index-BxSHJ7dB.css","assets/animation-variants-Don9j8OV.js","assets/alert-dialog-BkC9TEDW.js","assets/table-C0c472X5.js","assets/use-notifications-C3ECewhV.js","assets/skeleton-DMxoABBr.js","assets/sports-DKtXdFbJ.js","assets/dropdown-menu-DE8Qz5Cb.js","assets/index-CoegBVZq.js","assets/IconDotsVertical-CdorFIFe.js","assets/IconEye-taN6RHeG.js","assets/site-header-DiI5ihJE.js","assets/IconEdit-DIv_6hXg.js","assets/IconCopy-Can4-tB7.js","assets/constants-DiLdiRGg.js","assets/IconHash-9Kf-ZMEu.js","assets/IconChevronRight-DWL6UMPM.js","assets/IconCurrencyDollar-C2wFtmJ4.js","assets/IconClock-7yKfkzg7.js","assets/season-edit-modal-k3P8-kwY.js","assets/IconChevronLeft--cxFcFaG.js"])))=>i.map(i=>d[i]);
import{Y as q,ae as g,r as o,u as Y,k as H,l as Q,t as C,j as s,af as G,E as K,B as L,ag as Z}from"./index-BBfLVePp.js";import{S as J,c as W,I as X}from"./site-header-DiI5ihJE.js";import{P as ee}from"./page-header-v4omfKFm.js";import{S as D}from"./stats-card-BNU3egTN.js";import{s as se}from"./season-schema-CR9biNeh.js";import{g as te}from"./group-seasons-CiDAlYFM.js";import{z as R}from"./external-DF2wqCtK.js";import{A as ae,a as N,b as ne,d as ie}from"./animated-container-Cv57MoYe.js";import{S as oe}from"./search-input-BD0QAePK.js";import{F as I}from"./filter-select-B9TZ-wbR.js";import{I as re}from"./IconStar-x3Gm_thW.js";import{I as le}from"./IconDownload-uJJlLxt3.js";import"./use-notifications-C3ECewhV.js";import"./skeleton-DMxoABBr.js";import"./coerce-BYL0MSKM.js";import"./animation-variants-Don9j8OV.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M12 12m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M4 4l3 3",key:"svg-1"}],["path",{d:"M20 4l-3 3",key:"svg-2"}],["path",{d:"M4 20l3 -3",key:"svg-3"}],["path",{d:"M20 20l-3 -3",key:"svg-4"}]],me=q("outline","currency","Currency",ce),ue=[{value:"TENNIS",label:"Tennis"},{value:"PICKLEBALL",label:"Pickleball"},{value:"PADEL",label:"Padel"}],de=o.lazy(()=>Z(()=>import("./seasons-data-table-Ba1_xo9f.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(r=>({default:r.SeasonsDataTable})));function je(){const[r,f]=g.useState([]),[d,A]=g.useState(!0),[h,l]=g.useState(null),[b,E]=o.useState(""),[v,S]=o.useState(void 0),[w,_]=o.useState(void 0),k=Y(),j=o.useMemo(()=>{const n=new Map;return r.forEach(t=>{var e;(e=t.leagues)==null||e.forEach(i=>{i.id&&i.name&&n.set(i.id,i.name)})}),Array.from(n.entries()).map(([t,e])=>({value:t,label:e})).sort((t,e)=>t.label.localeCompare(e.label))},[r]),F=b||v||w,P=o.useCallback(()=>{E(""),S(void 0),_(void 0)},[]),c=g.useCallback(async()=>{var n,t;A(!0),l(null);try{const e=await H.get(Q.season.getAll);let i=[];if(Array.isArray(e.data)?i=e.data:(n=e.data)!=null&&n.data&&Array.isArray(e.data.data)?i=e.data.data:(t=e.data)!=null&&t.seasons&&Array.isArray(e.data.seasons)&&(i=e.data.seasons),!i||i.length===0){f([]);return}const m=R.array(se).parse(i);f(m),l(null)}catch(e){console.error("Failed to fetch seasons:",e),e instanceof R.ZodError?(l("Invalid data format"),console.error("Validation errors:",e.issues)):e instanceof Error?e.message.includes("Network Error")?l("Network error"):e.message.includes("timeout")?l("Request timeout"):e.message.includes("401")||e.message.includes("403")?l("Access denied"):l("Failed to load"):l("Unexpected error"),f([])}finally{A(!1)}},[]);g.useEffect(()=>{c()},[c]);const T=n=>{k({to:"/seasons/$seasonId",params:{seasonId:n}})},M=o.useCallback(()=>{if(r.length===0){C.error("No data to export");return}const n=["Name","Status","Sport Type","Category","Entry Fee","Players","Divisions","Start Date","End Date","Deadline","Payment Required","Created At"],t=r.map(a=>{var x,V;return[a.name,a.status||"",a.sportType||"",((x=a.category)==null?void 0:x.name)||"No category",a.entryFee||0,a.registeredUserCount||0,((V=a.divisions)==null?void 0:V.length)||0,a.startDate?new Date(a.startDate).toLocaleDateString():"",a.endDate?new Date(a.endDate).toLocaleDateString():"",a.regiDeadline?new Date(a.regiDeadline).toLocaleDateString():"",a.paymentRequired?"Yes":"No",a.createdAt]}),e=[n.join(","),...t.map(a=>a.map(x=>`"${String(x).replace(/"/g,'""')}"`).join(","))].join(`
`),i=new Blob([e],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(i),p=document.createElement("a");p.href=m,p.download=`seasons-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(m),C.success("Seasons exported successfully")},[r]),u=r,O=o.useMemo(()=>te(u),[u]),y=u.length,z=u.filter(n=>n.status==="ACTIVE").length,U=u.reduce((n,t)=>{var e;return n+(((e=t.memberships)==null?void 0:e.length)||0)},0),B=u.reduce((n,t)=>{var m;const e=parseFloat((t==null?void 0:t.entryFee)||"0")||0,i=((m=t.memberships)==null?void 0:m.length)||0;return n+e*i},0),$=y>0?Math.round(U/y):0;return s.jsxDEV(s.Fragment,{children:[s.jsxDEV(J,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:150,columnNumber:7},this),s.jsxDEV("div",{className:"flex flex-1 flex-col",children:s.jsxDEV("div",{className:"@container/main flex flex-1 flex-col gap-2",children:[s.jsxDEV(ee,{icon:W,title:"Seasons Management",description:"Manage league seasons and tournaments",children:[s.jsxDEV(ae,{className:"grid gap-4 grid-cols-2 md:grid-cols-4",children:[s.jsxDEV(N,{children:s.jsxDEV(D,{title:"Total Seasons",value:y,description:`${z} currently active`,icon:G,iconColor:"text-primary",loading:d,error:h,onRetry:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:156,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:155,columnNumber:13},this),s.jsxDEV(N,{children:s.jsxDEV(D,{title:"Total Participants",value:U,description:"Across all seasons",icon:K,iconColor:"text-blue-500",loading:d,error:h,onRetry:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:159,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:158,columnNumber:13},this),s.jsxDEV(N,{children:s.jsxDEV(D,{title:"Total Revenue",value:`RM ${B.toLocaleString("en-MY",{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:"From all season entry fees",icon:me,iconColor:"text-green-500",loading:d,error:h,onRetry:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:162,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:161,columnNumber:13},this),s.jsxDEV(N,{children:s.jsxDEV(D,{title:"Average per Season",value:$,description:"Players per season",icon:re,iconColor:"text-yellow-500",loading:d,error:h,onRetry:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:168,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:167,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:154,columnNumber:11},this),s.jsxDEV(ne,{children:s.jsxDEV("div",{className:"flex items-center gap-2 w-full",children:[s.jsxDEV(oe,{value:b,onChange:E,placeholder:"Search seasons...",className:"w-[220px]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:175,columnNumber:15},this),s.jsxDEV(I,{value:v,onChange:S,options:ue,allLabel:"All Sports",triggerClassName:"w-[140px]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:176,columnNumber:15},this),j.length>0&&s.jsxDEV(I,{value:w,onChange:_,options:j,allLabel:"All Leagues",triggerClassName:"w-[180px]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:177,columnNumber:44},this),F&&s.jsxDEV(L,{variant:"ghost",size:"sm",onClick:P,className:"text-muted-foreground hover:text-foreground cursor-pointer",children:"Clear all"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:178,columnNumber:36},this),s.jsxDEV("div",{className:"flex items-center gap-2 ml-auto",children:[s.jsxDEV(L,{variant:"outline",size:"sm",onClick:M,className:"cursor-pointer",children:[s.jsxDEV(le,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:183,columnNumber:19},this),"Export"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:182,columnNumber:17},this),s.jsxDEV(L,{variant:"outline",size:"sm",onClick:c,className:"cursor-pointer",children:[s.jsxDEV(X,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:187,columnNumber:19},this),"Refresh"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:186,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:174,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:173,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:153,columnNumber:11},this),s.jsxDEV(ie,{delay:.2,children:s.jsxDEV("div",{className:"flex-1 px-4 lg:px-6 pb-6",children:s.jsxDEV(o.Suspense,{fallback:s.jsxDEV("div",{className:"h-96 animate-pulse bg-muted rounded-lg"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:197,columnNumber:33},this),children:s.jsxDEV(de,{data:O,isLoading:d,onViewSeason:T,onRefresh:c,searchQuery:b,sportFilter:v,leagueFilter:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:198,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:197,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:196,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:195,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:152,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:151,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:149,columnNumber:10},this)}export{je as component};
