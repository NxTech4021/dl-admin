const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/leagues-data-table-Cw49KNBd.js","assets/index-D0Xerge1.js","assets/index-DFL6gsus.css","assets/animation-variants-Don9j8OV.js","assets/alert-dialog-xY9TWCUa.js","assets/table-DjLHw1R0.js","assets/skeleton-DmzvApil.js","assets/sports-vqt7BikU.js","assets/dropdown-menu-CQXdOetr.js","assets/index-B6703mES.js","assets/IconDotsVertical-74w_Anu3.js","assets/IconEye-DistWiUw.js","assets/site-header-DtwxUqkT.js","assets/use-notifications-Bde69jPv.js","assets/IconEdit-BTXVXv33.js","assets/IconCopy-B1MMz32t.js","assets/constants-DiLdiRGg.js","assets/IconHash-vUNUje70.js","assets/IconMapPin-C23houOa.js","assets/IconMail-ksVwZa_Q.js","assets/IconChevronLeft-tyXxHybu.js","assets/IconChevronRight-DIv4vGtX.js","assets/league-create-modal-Dji8Nqy4.js","assets/league-BTskQ2oy.js"])))=>i.map(i=>d[i]);
import{r as n,ab as o,k as O,l as R,t as _,j as e,ac as E,a4 as z,B as N,af as P,ad as j}from"./index-D0Xerge1.js";import{S as B,c as G,I as F}from"./site-header-DtwxUqkT.js";import{P as $}from"./page-header-BQ1HYkGo.js";import{S as D}from"./stats-card-BCRXqKxU.js";import{l as H}from"./league-schema-CuM0nQda.js";import{z as Q}from"./external-Dla4SAD_.js";import{A as q,a as f,b as J,d as K}from"./animated-container-CWLOQTPu.js";import{S as W}from"./search-input-PFvIeX63.js";import{I as X}from"./IconDownload-Cqnl-O6v.js";import"./use-notifications-Bde69jPv.js";import"./skeleton-DmzvApil.js";import"./coerce-CjAHOx7i.js";import"./animation-variants-Don9j8OV.js";const Y=n.lazy(()=>j(()=>import("./leagues-data-table-Cw49KNBd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(i=>({default:i.LeaguesDataTable}))),Z=n.lazy(()=>j(()=>import("./league-create-modal-Dji8Nqy4.js"),__vite__mapDeps([22,1,2,23,18])).then(i=>({default:i.default})));function pe(){const[i,b]=n.useState(!1),[u,g]=o.useState([]),[U,V]=o.useState(0),[m,L]=o.useState(!0),[w,C]=n.useState(""),l=o.useCallback(async()=>{L(!0);try{const s=await O.get(R.league.getAll);if(!s.data||!s.data.data||!s.data.data.leagues){g([]);return}const r=s.data.data.leagues,x=s.data.data.totalMembers||0;V(x);const h=r.map(t=>{var p,y,v;const a=((p=t.seasons)==null?void 0:p.reduce((I,k)=>{var A;const M=((A=k._count)==null?void 0:A.memberships)||0;return I+M},0))||0;return{id:t.id,name:t.name,location:t.location,description:t.description,status:t.status,sportType:t.sportType,joinType:t.joinType,registrationType:t.registrationType,gameType:t.gameType,createdById:t.createdById,createdAt:t.createdAt,updatedAt:t.updatedAt,memberCount:a,seasonCount:((y=t._count)==null?void 0:y.seasons)||0,categoryCount:((v=t._count)==null?void 0:v.categories)||0}}),d=Q.array(H).parse(h);g(d)}catch{g([])}finally{L(!1)}},[]);o.useEffect(()=>{l()},[l]);const S=async()=>{await l()},T=n.useCallback(()=>{if(u.length===0){_.error("No data to export");return}const s=["Name","Sport","Location","Status","Game Type","Players","Seasons","Created At"],r=u.map(a=>[a.name,a.sportType||"",a.location||"",a.status||"",a.gameType||"",a.memberCount||0,a.seasonCount||0,a.createdAt]),x=[s.join(","),...r.map(a=>a.map(p=>`"${String(p).replace(/"/g,'""')}"`).join(","))].join(`
`),h=new Blob([x],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(h),t=document.createElement("a");t.href=d,t.download=`leagues-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(d),_.success("Leagues exported successfully")},[u]),c=u;return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(B,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:99,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-1 flex-col",children:e.jsxDEV("div",{className:"@container/main flex flex-1 flex-col gap-2",children:[e.jsxDEV($,{icon:E,title:"League Management",description:"Manage leagues, seasons, and player memberships",actions:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(N,{size:"sm",onClick:()=>b(!0),children:[e.jsxDEV(P,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:104,columnNumber:17},this),"Create League"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:103,columnNumber:15},this),e.jsxDEV(n.Suspense,{fallback:null,children:e.jsxDEV(Z,{open:i,onOpenChange:b,onLeagueCreated:S},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:108,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:107,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:102,columnNumber:138},this),children:[e.jsxDEV(q,{className:"grid gap-4 grid-cols-2 md:grid-cols-3",children:[e.jsxDEV(f,{children:e.jsxDEV(D,{title:"Total Leagues",value:c.length,description:`${c.filter(s=>s.status==="ACTIVE"||s.status==="ONGOING").length} currently active`,icon:E,loading:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:113,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:112,columnNumber:13},this),e.jsxDEV(f,{children:e.jsxDEV(D,{title:"Total Members",value:U,description:"Total players across all seasons",icon:z,iconColor:"text-blue-500",loading:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:116,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:115,columnNumber:13},this),e.jsxDEV(f,{children:e.jsxDEV(D,{title:"Total Seasons",value:c.reduce((s,r)=>s+(r.seasonCount||0),0),description:"Across all leagues",icon:G,iconColor:"text-green-500",loading:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:119,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:118,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:111,columnNumber:11},this),e.jsxDEV(J,{children:e.jsxDEV("div",{className:"flex items-center gap-2 w-full",children:[e.jsxDEV(W,{value:w,onChange:C,placeholder:"Search leagues...",className:"w-[220px]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:126,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsxDEV(N,{variant:"outline",size:"sm",onClick:T,className:"cursor-pointer",children:[e.jsxDEV(X,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:129,columnNumber:19},this),"Export"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:128,columnNumber:17},this),e.jsxDEV(N,{variant:"outline",size:"sm",onClick:l,className:"cursor-pointer",children:[e.jsxDEV(F,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:133,columnNumber:19},this),"Refresh"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:132,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:127,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:125,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:124,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:102,columnNumber:11},this),e.jsxDEV(K,{delay:.2,children:e.jsxDEV("div",{className:"flex-1 px-4 lg:px-6 pb-6",children:e.jsxDEV(n.Suspense,{fallback:e.jsxDEV("div",{className:"h-96 animate-pulse bg-muted rounded-lg"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:143,columnNumber:33},this),children:e.jsxDEV(Y,{data:c,isLoading:m,onDataChange:l,searchQuery:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:144,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:143,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:142,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:141,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:101,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:100,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/league/index.tsx?tsr-split=component",lineNumber:98,columnNumber:10},this)}export{pe as component};
