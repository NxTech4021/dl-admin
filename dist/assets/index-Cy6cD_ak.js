const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/seasons-data-table-K4ZRCatW.js","assets/index-D0Xerge1.js","assets/index-DFL6gsus.css","assets/animation-variants-Don9j8OV.js","assets/alert-dialog-xY9TWCUa.js","assets/table-DjLHw1R0.js","assets/use-notifications-Bde69jPv.js","assets/skeleton-DmzvApil.js","assets/sports-vqt7BikU.js","assets/dropdown-menu-CQXdOetr.js","assets/index-B6703mES.js","assets/IconDotsVertical-74w_Anu3.js","assets/IconEye-DistWiUw.js","assets/site-header-DtwxUqkT.js","assets/IconEdit-BTXVXv33.js","assets/IconCopy-B1MMz32t.js","assets/constants-DiLdiRGg.js","assets/IconHash-vUNUje70.js","assets/IconChevronRight-DIv4vGtX.js","assets/IconCurrencyDollar-DophjyZ5.js","assets/IconClock-d6QqoYHk.js","assets/season-edit-modal-6Z-TsJ2I.js","assets/eye-DCBVcO_f.js","assets/arrow-left-DSMreved.js","assets/IconChevronLeft-tyXxHybu.js"])))=>i.map(i=>d[i]);
import{E as k,ab as p,r as N,u as T,k as F,l as P,t as A,j as e,ac as M,a4 as z,B as E,ad as $}from"./index-D0Xerge1.js";import{S as B,c as O,I as q}from"./site-header-DtwxUqkT.js";import{P as H}from"./page-header-BQ1HYkGo.js";import{S as h}from"./stats-card-BCRXqKxU.js";import{s as Q}from"./season-schema-Dp2h-SSU.js";import{z as S}from"./external-Dla4SAD_.js";import{A as Y,a as D,b as G,d as Z}from"./animated-container-CWLOQTPu.js";import{S as J}from"./search-input-PFvIeX63.js";import{I as K}from"./IconStar-C-2FJNZN.js";import{I as W}from"./IconDownload-Cqnl-O6v.js";import"./use-notifications-Bde69jPv.js";import"./skeleton-DmzvApil.js";import"./coerce-CjAHOx7i.js";import"./animation-variants-Don9j8OV.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M12 12m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M4 4l3 3",key:"svg-1"}],["path",{d:"M20 4l-3 3",key:"svg-2"}],["path",{d:"M4 20l3 -3",key:"svg-3"}],["path",{d:"M20 20l-3 -3",key:"svg-4"}]],ee=k("outline","currency","Currency",X),se=N.lazy(()=>$(()=>import("./seasons-data-table-K4ZRCatW.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(c=>({default:c.SeasonsDataTable})));function he(){const[c,f]=p.useState([]),[d,b]=p.useState(!0),[g,o]=p.useState(null),[w,_]=N.useState(""),j=T(),r=p.useCallback(async()=>{var n,a;b(!0),o(null);try{const s=await F.get(P.season.getAll);let i=[];if(Array.isArray(s.data)?i=s.data:(n=s.data)!=null&&n.data&&Array.isArray(s.data.data)?i=s.data.data:(a=s.data)!=null&&a.seasons&&Array.isArray(s.data.seasons)&&(i=s.data.seasons),!i||i.length===0){f([]);return}const l=S.array(Q).parse(i);f(l),o(null)}catch(s){console.error("Failed to fetch seasons:",s),s instanceof S.ZodError?(o("Invalid data format"),console.error("Validation errors:",s.issues)):s instanceof Error?s.message.includes("Network Error")?o("Network error"):s.message.includes("timeout")?o("Request timeout"):s.message.includes("401")||s.message.includes("403")?o("Access denied"):o("Failed to load"):o("Unexpected error"),f([])}finally{b(!1)}},[]);p.useEffect(()=>{r()},[r]);const U=n=>{j({to:"/seasons/$seasonId",params:{seasonId:n}})},V=N.useCallback(()=>{if(c.length===0){A.error("No data to export");return}const n=["Name","Status","Sport Type","Category","Entry Fee","Players","Divisions","Start Date","End Date","Deadline","Payment Required","Created At"],a=c.map(t=>{var x,v;return[t.name,t.status||"",t.sportType||"",((x=t.category)==null?void 0:x.name)||"No category",t.entryFee||0,t.registeredUserCount||0,((v=t.divisions)==null?void 0:v.length)||0,t.startDate?new Date(t.startDate).toLocaleDateString():"",t.endDate?new Date(t.endDate).toLocaleDateString():"",t.regiDeadline?new Date(t.regiDeadline).toLocaleDateString():"",t.paymentRequired?"Yes":"No",t.createdAt]}),s=[n.join(","),...a.map(t=>t.map(x=>`"${String(x).replace(/"/g,'""')}"`).join(","))].join(`
`),i=new Blob([s],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(i),u=document.createElement("a");u.href=l,u.download=`seasons-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(l),A.success("Seasons exported successfully")},[c]),m=c,y=m.length,C=m.filter(n=>n.status==="ACTIVE").length,L=m.reduce((n,a)=>{var s;return n+(((s=a.memberships)==null?void 0:s.length)||0)},0),R=m.reduce((n,a)=>{var l;const s=parseFloat((a==null?void 0:a.entryFee)||"0")||0,i=((l=a.memberships)==null?void 0:l.length)||0;return n+s*i},0),I=y>0?Math.round(L/y):0;return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(B,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:111,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-1 flex-col",children:e.jsxDEV("div",{className:"@container/main flex flex-1 flex-col gap-2",children:[e.jsxDEV(H,{icon:O,title:"Seasons Management",description:"Manage league seasons and tournaments",children:[e.jsxDEV(Y,{className:"grid gap-4 grid-cols-2 md:grid-cols-4",children:[e.jsxDEV(D,{children:e.jsxDEV(h,{title:"Total Seasons",value:y,description:`${C} currently active`,icon:M,iconColor:"text-primary",loading:d,error:g,onRetry:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:117,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:116,columnNumber:13},this),e.jsxDEV(D,{children:e.jsxDEV(h,{title:"Total Participants",value:L,description:"Across all seasons",icon:z,iconColor:"text-blue-500",loading:d,error:g,onRetry:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:120,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:119,columnNumber:13},this),e.jsxDEV(D,{children:e.jsxDEV(h,{title:"Total Revenue",value:`RM ${R.toLocaleString("en-MY",{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:"From all season entry fees",icon:ee,iconColor:"text-green-500",loading:d,error:g,onRetry:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:123,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:122,columnNumber:13},this),e.jsxDEV(D,{children:e.jsxDEV(h,{title:"Average per Season",value:I,description:"Players per season",icon:K,iconColor:"text-yellow-500",loading:d,error:g,onRetry:r},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:129,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:115,columnNumber:11},this),e.jsxDEV(G,{children:e.jsxDEV("div",{className:"flex items-center gap-2 w-full",children:[e.jsxDEV(J,{value:w,onChange:_,placeholder:"Search seasons...",className:"w-[220px]"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:136,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsxDEV(E,{variant:"outline",size:"sm",onClick:V,className:"cursor-pointer",children:[e.jsxDEV(W,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:139,columnNumber:19},this),"Export"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:138,columnNumber:17},this),e.jsxDEV(E,{variant:"outline",size:"sm",onClick:r,className:"cursor-pointer",children:[e.jsxDEV(q,{className:"mr-2 size-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:143,columnNumber:19},this),"Refresh"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:142,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:137,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:135,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:134,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:114,columnNumber:11},this),e.jsxDEV(Z,{delay:.2,children:e.jsxDEV("div",{className:"flex-1 px-4 lg:px-6 pb-6",children:e.jsxDEV(N.Suspense,{fallback:e.jsxDEV("div",{className:"h-96 animate-pulse bg-muted rounded-lg"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:153,columnNumber:33},this),children:e.jsxDEV(se,{data:m,isLoading:d,onViewSeason:U,onRefresh:r,searchQuery:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:154,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:153,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:152,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:151,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:113,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:112,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:110,columnNumber:10},this)}export{he as component};
