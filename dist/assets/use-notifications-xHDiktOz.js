import{c as Y,r as o,j as s,d as b,Y as W,a7 as q,B as X,a as J,k as S,l as A,t as L}from"./index-LFPNg1Zt.js";import{T as Q,S as Z,d as ee,e as ae,f as ie,g as te,a as re,b as ne,c as se,u as oe}from"./socket-context-BNNiueEL.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],le=Y("panel-left",de),O=768;function ue(){const[t,i]=o.useState(void 0);return o.useEffect(()=>{const e=window.matchMedia(`(max-width: ${O-1}px)`),u=()=>{i(window.innerWidth<O)};return e.addEventListener("change",u),i(window.innerWidth<O),()=>e.removeEventListener("change",u)},[]),!!t}const K="sidebar_state",ce=3600*24*7,me="16rem",be="18rem",fe="3rem",ge="b",F=o.createContext(null);function T(){const t=o.useContext(F);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function xe({defaultOpen:t=!0,open:i,onOpenChange:e,className:u,style:f,children:x,...v}){const[D,p]=o.useState(!1);o.useEffect(()=>{p(!0)},[]);const N=ue(),w=D?N:!1,[a,h]=o.useState(!1),[C,y]=o.useState(t);o.useEffect(()=>{var g;const m=(g=document.cookie.split("; ").find(V=>V.startsWith(`${K}=`)))==null?void 0:g.split("=")[1];m!==void 0&&y(m==="true")},[]);const E=i??C,M=o.useCallback(m=>{const g=typeof m=="function"?m(E):m;e?e(g):y(g),document.cookie=`${K}=${g}; path=/; max-age=${ce}`},[e,E]),k=o.useCallback(()=>N?h(m=>!m):M(m=>!m),[N,M,h]);o.useEffect(()=>{const m=g=>{g.key===ge&&(g.metaKey||g.ctrlKey)&&(g.preventDefault(),k())};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[k]);const j=E?"expanded":"collapsed",_=o.useMemo(()=>({state:j,open:E,setOpen:M,isMobile:w,openMobile:a,setOpenMobile:h,toggleSidebar:k}),[j,E,M,w,a,h,k]);return s.jsxDEV(F.Provider,{value:_,children:s.jsxDEV(Q,{delayDuration:0,children:s.jsxDEV("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":me,"--sidebar-width-icon":fe,...f},className:b("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",u),...v,children:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:151,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:150,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:149,columnNumber:5},this)}function Ne({side:t="left",variant:i="sidebar",collapsible:e="offcanvas",className:u,children:f,...x}){const{isMobile:v,state:D,openMobile:p,setOpenMobile:N}=T();return e==="none"?s.jsxDEV("div",{"data-slot":"sidebar",className:b("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",u),...x,children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:189,columnNumber:7},this):v?s.jsxDEV(Z,{open:p,onOpenChange:N,...x,children:s.jsxDEV(ee,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":be},side:t,children:[s.jsxDEV(ae,{className:"sr-only",children:[s.jsxDEV(ie,{children:"Sidebar"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:218,columnNumber:13},this),s.jsxDEV(te,{children:"Displays the mobile sidebar."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:219,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:217,columnNumber:11},this),s.jsxDEV("div",{className:"flex h-full w-full flex-col",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:221,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:205,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:204,columnNumber:7},this):s.jsxDEV("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":D,"data-collapsible":D==="collapsed"?e:"","data-variant":i,"data-side":t,"data-slot":"sidebar",children:[s.jsxDEV("div",{"data-slot":"sidebar-gap",className:b("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",i==="floating"||i==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:237,columnNumber:7},this),s.jsxDEV("div",{"data-slot":"sidebar-container",className:b("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",i==="floating"||i==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",u),...x,children:s.jsxDEV("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:263,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:248,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:228,columnNumber:5},this)}function ve({className:t,onClick:i,...e}){const{toggleSidebar:u}=T();return s.jsxDEV(X,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:b("size-7",t),onClick:f=>{i==null||i(f),u()},...e,children:[s.jsxDEV(le,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:295,columnNumber:7},this),s.jsxDEV("span",{className:"sr-only",children:"Toggle Sidebar"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:296,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:283,columnNumber:5},this)}function De({className:t,...i}){return s.jsxDEV("main",{"data-slot":"sidebar-inset",className:b("bg-background relative flex w-full flex-1 flex-col","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",t),...i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:328,columnNumber:5},this)}function ye({className:t,...i}){return s.jsxDEV("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:b("flex flex-col gap-3 p-3",t),...i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:356,columnNumber:5},this)}function Le({className:t,...i}){return s.jsxDEV("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:b("flex flex-col gap-3 p-3",t),...i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:367,columnNumber:5},this)}function Ee({className:t,...i}){return s.jsxDEV("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:b("flex min-h-0 flex-1 flex-col gap-4 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:392,columnNumber:5},this)}function Se({className:t,...i}){return s.jsxDEV("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:b("relative flex w-full min-w-0 flex-col p-2",t),...i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:406,columnNumber:5},this)}function Ae({className:t,asChild:i=!1,...e}){const u=i?W:"div";return s.jsxDEV(u,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:b("text-muted-foreground ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-3 text-xs font-semibold uppercase tracking-wider outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...e},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:423,columnNumber:5},this)}function Me({className:t,...i}){return s.jsxDEV("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:b("w-full text-sm",t),...i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:464,columnNumber:5},this)}function ke({className:t,...i}){return s.jsxDEV("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:b("flex w-full min-w-0 flex-col gap-1",t),...i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:475,columnNumber:5},this)}function Ie({className:t,...i}){return s.jsxDEV("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:b("group/menu-item relative",t),...i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:486,columnNumber:5},this)}const pe=q("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Ue({asChild:t=!1,isActive:i=!1,variant:e="default",size:u="default",tooltip:f,className:x,...v}){const D=t?W:"button",{isMobile:p,state:N}=T(),w=s.jsxDEV(D,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":u,"data-active":i,className:b(pe({variant:e,size:u}),x),...v},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:534,columnNumber:5},this);return f?(typeof f=="string"&&(f={children:f}),s.jsxDEV(re,{children:[s.jsxDEV(ne,{asChild:!0,children:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:556,columnNumber:7},this),s.jsxDEV(se,{side:"right",align:"center",hidden:N!=="collapsed"||p,...f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:557,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:555,columnNumber:5},this)):w}function je({className:t,...i}){return s.jsxDEV("div",{"data-slot":"sidebar-menu-badge","data-sidebar":"menu-badge",className:b("text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...i},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/ui/sidebar.tsx",lineNumber:604,columnNumber:5},this)}function Ve(t){const{category:i,metadata:e}=t;if(e!=null&&e.url)return e.url;switch(i){case"MATCH":if(e!=null&&e.matchId)return`/matches/${e.matchId}`;break;case"LEAGUE":if(e!=null&&e.leagueId)return`/league/${e.leagueId}`;break;case"SEASON":if(e!=null&&e.seasonId)return`/seasons/${e.seasonId}`;break;case"DIVISION":if(e!=null&&e.divisionId)return`/divisions/${e.divisionId}`;break;case"PAYMENT":if(e!=null&&e.paymentId)return`/payments/${e.paymentId}`;if(e!=null&&e.userId)return`/players/${e.userId}`;break;case"CHAT":if(e!=null&&e.threadId)return`/chat/${e.threadId}`;break;case"ADMIN":if(e!=null&&e.disputeId)return`/disputes/${e.disputeId}`;if(e!=null&&e.reportId)return`/reports/${e.reportId}`;break}return null}const Ce=()=>{var m,g,V,$,B,R,z,H,P;const[t,i]=o.useState([]),[e,u]=o.useState(0),[f,x]=o.useState(!0),[v,D]=o.useState(!1),[p,N]=o.useState({page:1,limit:20,total:0,totalPages:0,hasMore:!1}),{socket:w}=oe(),{data:a}=J(),h=o.useCallback(async(r={})=>{var l,d;if((l=a==null?void 0:a.user)!=null&&l.id)try{r.append?D(!0):x(!0);const n=new URLSearchParams;r.page&&n.append("page",r.page.toString()),r.limit&&n.append("limit",r.limit.toString()),r.unreadOnly&&n.append("unreadOnly","true"),r.archived!==void 0&&n.append("archived",r.archived.toString());const c=await S.get(`${A.notifications.getAll}?${n}`);if((d=c.data)!=null&&d.success){const I=c.data.data.notifications||[],U=c.data.data.pagination;r.append?i(G=>[...G,...I]):i(I),U&&N({page:U.page||1,limit:U.limit||20,total:U.total||0,totalPages:U.totalPages||0,hasMore:U.hasMore||!1})}}catch(n){console.error("Error fetching notifications:",n)}finally{x(!1),D(!1)}},[(m=a==null?void 0:a.user)==null?void 0:m.id]),C=o.useCallback(async()=>{v||!p.hasMore||await h({page:p.page+1,limit:p.limit,append:!0})},[h,v,p.hasMore,p.page,p.limit]),y=o.useCallback(async()=>{var r,l;if((r=a==null?void 0:a.user)!=null&&r.id)try{const d=await S.get(A.notifications.unreadCount);(l=d.data)!=null&&l.success&&u(d.data.data.unreadCount||0)}catch(d){console.error("Failed to fetch unread count:",d)}},[(g=a==null?void 0:a.user)==null?void 0:g.id]),E=o.useCallback(async r=>{var l;if((l=a==null?void 0:a.user)!=null&&l.id)try{await S.put(A.notifications.markRead(r)),i(d=>d.map(n=>n.id===r?{...n,read:!0,readAt:new Date().toISOString()}:n)),u(d=>Math.max(0,d-1))}catch(d){console.error("Error marking notification as read:",d)}},[(V=a==null?void 0:a.user)==null?void 0:V.id]),M=o.useCallback(async()=>{var r,l;if((r=a==null?void 0:a.user)!=null&&r.id)try{(l=(await S.put(A.notifications.markAllRead)).data)!=null&&l.success&&(i(n=>n.map(c=>({...c,read:!0,readAt:new Date}))),u(0),L.success("All notifications marked as read"))}catch(d){console.error("Error archiving notification:",d)}},[($=a==null?void 0:a.user)==null?void 0:$.id]),k=o.useCallback(async r=>{var l;if((l=a==null?void 0:a.user)!=null&&l.id)try{const d=t.find(n=>n.id===r);await S.delete(A.notifications.delete(r)),i(n=>n.filter(c=>c.id!==r)),d&&!d.read&&u(n=>Math.max(0,n-1)),L.success("Notification deleted")}catch(d){console.error("Error deleting notification:",d),L.error("Failed to delete notification")}},[(B=a==null?void 0:a.user)==null?void 0:B.id,t]),j=o.useCallback(async r=>{var l;if(!(!((l=a==null?void 0:a.user)!=null&&l.id)||r.length===0))try{const d=t.filter(n=>r.includes(n.id)&&!n.read).length;await S.post(A.notifications.deleteMany,{ids:r}),i(n=>n.filter(c=>!r.includes(c.id))),u(n=>Math.max(0,n-d)),L.success(`${r.length} notification${r.length>1?"s":""} deleted`)}catch(d){console.error("Error deleting notifications:",d),L.error("Failed to delete notifications")}},[(R=a==null?void 0:a.user)==null?void 0:R.id,t]),_=o.useCallback(async()=>{var r;if((r=a==null?void 0:a.user)!=null&&r.id)try{await S.delete(A.notifications.clearAll),i([]),u(0),N(l=>({...l,total:0,hasMore:!1})),L.success("All notifications cleared")}catch(l){console.error("Error clearing notifications:",l),L.error("Failed to clear notifications")}},[(z=a==null?void 0:a.user)==null?void 0:z.id]);return o.useCallback(()=>{h()},[h]),o.useEffect(()=>{var r;(r=a==null?void 0:a.user)!=null&&r.id&&(h(),y())},[(H=a==null?void 0:a.user)==null?void 0:H.id,h,y]),o.useEffect(()=>{var d;if(!w||!((d=a==null?void 0:a.user)!=null&&d.id))return;const r=n=>{i(c=>[n,...c]),n.read||u(c=>c+1),L(n.title||"New Notification",{description:n.message,duration:5e3})},l=n=>{i(c=>c.map(I=>I.id===n.notificationId?{...I,read:!0,readAt:new Date().toISOString()}:I)),u(c=>Math.max(0,c-1))};return w.on("notification:new",r),w.on("notification:read",l),()=>{w.off("notification:new",r),w.off("notification:read",l)}},[w,(P=a==null?void 0:a.user)==null?void 0:P.id,y]),{notifications:t,unreadCount:e,loading:f,loadingMore:v,pagination:p,fetchNotifications:h,fetchUnreadCount:y,markAsRead:E,markAllAsRead:M,deleteNotification:k,deleteMany:j,clearAll:_,loadMore:C,refresh:()=>{h(),y()}}};export{Se as S,Me as a,ke as b,Ie as c,Ue as d,je as e,Ae as f,Ce as g,Ne as h,ye as i,Ee as j,Le as k,xe as l,De as m,Ve as n,ve as o,T as u};
