import{r as n,k as A,l as E,j as s,N as P,P as F,Q as B,R as O,V as M,h as i,I as c,a2 as G,a3 as K,a4 as W,a5 as Z,a6 as z,au as H,av as X,B as V,ce as _,aw as q,d as j,cf as J,J as U,K as Q,X as Y,a1 as $,t as N}from"./index-D4sRxPGx.js";const ee=[{value:"BRONZE",label:"Bronze"},{value:"SILVER",label:"Silver"},{value:"GOLD",label:"Gold"},{value:"PLATINUM",label:"Platinum"}],se=r=>{switch(r==null?void 0:r.toUpperCase()){case"PADEL":return"default";case"PICKLEBALL":return"secondary";case"TENNIS":return"outline";default:return"outline"}};function le({open:r,onOpenChange:p,onSponsorCreated:D}){const[l,m]=n.useState({sponsoredName:"",packageTier:"BRONZE",contractAmount:null,sponsorRevenue:null,leagueIds:[]}),[h,f]=n.useState(!1),[x,d]=n.useState([]),[S,w]=n.useState(!1),[L,C]=n.useState(!1),[u,I]=n.useState(""),g=n.useRef(null);n.useEffect(()=>{r&&(w(!0),A.get(E.league.getAll).then(e=>{var o,v,y;console.log("Leagues API response:",e.data);const a=((v=(o=e.data)==null?void 0:o.data)==null?void 0:v.leagues)||((y=e.data)==null?void 0:y.leagues)||[];Array.isArray(a)?d(a):(console.warn("Leagues data is not an array:",a),d([]))}).catch(e=>{console.error("Error fetching leagues:",e),d([])}).finally(()=>w(!1)))},[r]);const k=e=>{m(a=>({...a,leagueIds:a.leagueIds.includes(e)?a.leagueIds.filter(o=>o!==e):[...a.leagueIds,e]}))},R=e=>{m(a=>({...a,leagueIds:a.leagueIds.filter(o=>o!==e)}))},t=x.filter(e=>l.leagueIds.includes(e.id)),b=x.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())),T=async()=>{var e,a;if(!l.sponsoredName||!l.packageTier||l.leagueIds.length===0){N.error("Please fill in all required fields");return}f(!0);try{await A.post(E.sponsors.create,{sponsoredName:l.sponsoredName,packageTier:l.packageTier,contractAmount:l.contractAmount,sponsorRevenue:l.sponsorRevenue,leagueIds:l.leagueIds}),N.success("Sponsor created successfully!"),p(!1),D&&await D(),m({sponsoredName:"",packageTier:"BRONZE",contractAmount:null,sponsorRevenue:null,leagueIds:[]})}catch(o){console.error("Error creating sponsor:",o),N.error(((a=(e=o.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to create sponsor")}finally{f(!1)}};return s.jsxDEV(P,{open:r,onOpenChange:p,children:s.jsxDEV(F,{className:"sm:max-w-lg",children:[s.jsxDEV(B,{children:[s.jsxDEV(O,{children:"Create Sponsor"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:193,columnNumber:11},this),s.jsxDEV(M,{children:"Create a new sponsorship package with league assignments."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:194,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:192,columnNumber:9},this),s.jsxDEV("div",{className:"grid gap-6",children:[s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV(i,{htmlFor:"sponsoredName",children:"Sponsor Name *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:201,columnNumber:13},this),s.jsxDEV(c,{id:"sponsoredName",value:l.sponsoredName,onChange:e=>m(a=>({...a,sponsoredName:e.target.value})),placeholder:"Enter sponsor name",className:"h-11"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:202,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:200,columnNumber:11},this),s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV(i,{htmlFor:"packageTier",children:"Package Tier *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:217,columnNumber:13},this),s.jsxDEV(G,{value:l.packageTier,onValueChange:e=>m(a=>({...a,packageTier:e})),children:[s.jsxDEV(K,{className:"h-11",children:s.jsxDEV(W,{placeholder:"Select package tier"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:228,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:227,columnNumber:15},this),s.jsxDEV(Z,{children:ee.map(e=>s.jsxDEV(z,{value:e.value,children:e.label},e.value,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:232,columnNumber:19},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:230,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:218,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:216,columnNumber:11},this),s.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV(i,{htmlFor:"contractAmount",children:"Contract Amount (RM)"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:242,columnNumber:15},this),s.jsxDEV(c,{id:"contractAmount",type:"number",step:"0.01",value:l.contractAmount||"",onChange:e=>m(a=>({...a,contractAmount:e.target.value?parseFloat(e.target.value):null})),placeholder:"0.00",className:"h-11"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:243,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:241,columnNumber:13},this),s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV(i,{htmlFor:"sponsorRevenue",children:"Expected Revenue (RM)"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:260,columnNumber:15},this),s.jsxDEV(c,{id:"sponsorRevenue",type:"number",step:"0.01",value:l.sponsorRevenue||"",onChange:e=>m(a=>({...a,sponsorRevenue:e.target.value?parseFloat(e.target.value):null})),placeholder:"0.00",className:"h-11"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:261,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:259,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:240,columnNumber:11},this),s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV(i,{children:"Select Leagues *"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:280,columnNumber:13},this),s.jsxDEV(H,{open:L,onOpenChange:C,children:[s.jsxDEV(X,{asChild:!0,children:s.jsxDEV(V,{variant:"outline",role:"combobox","aria-expanded":L,className:"w-full justify-between h-11",children:[t.length>0?`${t.length} league(s) selected`:"Select leagues...",s.jsxDEV(_,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:292,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:283,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:282,columnNumber:15},this),s.jsxDEV(q,{className:"w-full p-0",style:{maxHeight:"400px"},children:s.jsxDEV("div",{className:"p-2",children:[s.jsxDEV(c,{placeholder:"Search leagues...",className:"mb-2",value:u,onChange:e=>I(e.target.value)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:297,columnNumber:19},this),s.jsxDEV("div",{ref:g,className:"max-h-64 overflow-y-auto overflow-x-hidden",style:{scrollbarWidth:"thin",scrollbarColor:"#d1d5db #f3f4f6",WebkitOverflowScrolling:"touch"},onWheel:e=>{e.preventDefault(),e.stopPropagation(),g.current&&(g.current.scrollTop+=e.deltaY)},children:S?s.jsxDEV("div",{className:"p-2 text-sm text-muted-foreground text-center",children:"Loading leagues..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:320,columnNumber:23},this):b.length===0?s.jsxDEV("div",{className:"p-2 text-sm text-muted-foreground text-center",children:u?"No leagues found matching your search.":"No leagues found."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:324,columnNumber:23},this):b.map(e=>{var a;return s.jsxDEV("div",{onClick:()=>k(e.id),className:j("flex items-center justify-between px-2 py-1.5 text-sm cursor-pointer rounded-sm hover:bg-accent hover:text-accent-foreground",l.leagueIds.includes(e.id)&&"bg-accent text-accent-foreground"),children:[s.jsxDEV("div",{className:"flex items-center",children:[s.jsxDEV(J,{className:j("mr-2 h-4 w-4",l.leagueIds.includes(e.id)?"opacity-100":"opacity-0")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:338,columnNumber:29},this),s.jsxDEV("span",{className:"font-medium",children:e.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:346,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:337,columnNumber:27},this),s.jsxDEV(U,{variant:se(e.sportType),className:"text-xs capitalize",children:((a=e.sportType)==null?void 0:a.toLowerCase())||"Unknown"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:348,columnNumber:27},this)]},e.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:329,columnNumber:25},this)})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:303,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:296,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:295,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:281,columnNumber:13},this),t.length>0&&s.jsxDEV("div",{className:"flex flex-wrap gap-2 mt-2",children:t.map(e=>s.jsxDEV(U,{variant:"secondary",className:"flex items-center gap-1",children:[e.name,s.jsxDEV(Q,{className:"h-3 w-3 cursor-pointer",onClick:()=>R(e.id)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:368,columnNumber:21},this)]},e.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:366,columnNumber:19},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:364,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:279,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:199,columnNumber:9},this),s.jsxDEV(Y,{className:"mt-6",children:s.jsxDEV(V,{onClick:T,disabled:h||!l.sponsoredName||!l.packageTier||l.leagueIds.length===0,className:"w-full sm:w-auto",children:h?s.jsxDEV(s.Fragment,{children:[s.jsxDEV($,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:392,columnNumber:17},this),"Creating..."]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:391,columnNumber:15},this):"Create Sponsor"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:380,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:379,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:191,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/modal/sponsor-create-modal.tsx",lineNumber:190,columnNumber:5},this)}export{le as CreateSponsorModal};
