const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/emoji-picker-react.esm-CwidmqYY.js","assets/index-DyY9s1i7.js","assets/index-EswfcjYM.css"])))=>i.map(i=>d[i]);
import{c as Q,ak as rs,al as cs,am as os,an as Ae,ao as Ee,ap as Ue,aq as je,ar as Ve,as as Pe,at as Oe,r as i,aa as ne,j as e,au as ze,av as Ge,J as De,aw as Be,a2 as us,a3 as ds,a4 as hs,a5 as gs,a6 as Ns,d as T,a as me,u as te,k as J,l as ee,t as I,N as He,P as qe,Q as We,R as Ke,M as le,V as fs,S as Ye,I as Qe,B as O,L as Xe,U as oe,ax as ue,p as xs,ay as Ze,az as be,W as Ds,aA as bs,aB as ws,$ as ps,o as Je,aC as Ls}from"./index-DyY9s1i7.js";import{j as ys,k as vs,l as we,M as As,n as Es,u as es,P as Us,o as js,p as Vs,L as Cs,i as Ss,m as M,q as de,r as ks,S as Ce}from"./site-header-Dzv4kaRt.js";import{T as Se,n as ke,o as Me,p as Te,w as pe,q as ss,r as ns,s as Ms,t as Ts}from"./use-notifications-BbMTfb7w.js";import{A as F,a as $,b as P}from"./avatar-uvrxV80z.js";import{S as se}from"./skeleton-C8dggbFW.js";import{A as _s,a as Rs,b as Is,c as Fs,d as $s,e as Ps,f as Os,g as zs}from"./alert-dialog-CP8f2kbJ.js";import{D as Gs,A as Bs}from"./dollar-sign-DQoH7sj2.js";import{C as Hs}from"./circle-CyNtFiuY.js";import{T as ge,U as qs}from"./user-DxD81x5F.js";import{s as Ws}from"./subDays-CzByTSpt.js";import{K as ts}from"./use-queries-CGyvEvtD.js";import{M as as}from"./mail-B_V1zvD2.js";import"./external-DCTon813.js";import"./schemas-B5fuxOj7.js";import"./compat-Blf4Bw1-.js";import"./coerce-C-pLok-C.js";import"./league-schema-CW4CwVLH.js";import"./season-schema-DVFNm_2a.js";import"./division-schema-gPrDsMOQ.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ne=Q("circle-check-big",Ks);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_e=Q("circle-x",Ys);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ls=Q("external-link",Qs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Le=Q("map-pin",Xs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],Re=Q("message-square-plus",Zs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],en=Q("reply",Js);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],nn=Q("smile",sn);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],an=Q("square-pen",tn);function ln(s,t,n){const l=rs(),a=(n==null?void 0:n.locale)??l.locale??cs,m=ys(s,t);if(isNaN(m))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:m}),[h,x]=os(n==null?void 0:n.in,...m>0?[t,s]:[s,t]),f=vs((n==null?void 0:n.roundingMethod)??"round"),D=x.getTime()-h.getTime(),d=D/Ve,c=Ae(x)-Ae(h),o=(D-c)/Ve,N=n==null?void 0:n.unit;let r;if(N?r=N:d<1?r="second":d<60?r="minute":d<Ee?r="hour":o<Ue?r="day":o<je?r="month":r="year",r==="second"){const g=f(D/1e3);return a.formatDistance("xSeconds",g,u)}else if(r==="minute"){const g=f(d);return a.formatDistance("xMinutes",g,u)}else if(r==="hour"){const g=f(d/60);return a.formatDistance("xHours",g,u)}else if(r==="day"){const g=f(o/Ee);return a.formatDistance("xDays",g,u)}else if(r==="month"){const g=f(o/Ue);return g===12&&N!=="month"?a.formatDistance("xYears",1,u):a.formatDistance("xMonths",g,u)}else{const g=f(o/je);return a.formatDistance("xYears",g,u)}}function ye(s,t){return ln(s,we(s),t)}function mn(s,t){return Pe(Oe(s,s),we(s))}function rn(s,t){return Pe(Oe(s,s),Ws(we(s),1))}function Ie(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function cn(...s){return t=>{let n=!1;const l=s.map(a=>{const m=Ie(a,t);return!n&&typeof m=="function"&&(n=!0),m});if(n)return()=>{for(let a=0;a<l.length;a++){const m=l[a];typeof m=="function"?m():Ie(s[a],null)}}}}function on(...s){return i.useCallback(cn(...s),s)}class un extends i.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const l=n.offsetParent,a=Es(l)&&l.offsetWidth||0,m=this.props.sizeRef.current;m.height=n.offsetHeight||0,m.width=n.offsetWidth||0,m.top=n.offsetTop,m.left=n.offsetLeft,m.right=a-m.width-m.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dn({children:s,isPresent:t,anchorX:n,root:l}){const a=i.useId(),m=i.useRef(null),u=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=i.useContext(As),x=on(m,s==null?void 0:s.ref);return i.useInsertionEffect(()=>{const{width:f,height:D,top:d,left:c,right:o}=u.current;if(t||!m.current||!f||!D)return;const N=n==="left"?`left: ${c}`:`right: ${o}`;m.current.dataset.motionPopId=a;const r=document.createElement("style");h&&(r.nonce=h);const g=l??document.head;return g.appendChild(r),r.sheet&&r.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${D}px !important;
            ${N}px !important;
            top: ${d}px !important;
          }
        `),()=>{g.contains(r)&&g.removeChild(r)}},[t]),ne.jsx(un,{isPresent:t,childRef:m,sizeRef:u,children:i.cloneElement(s,{ref:x})})}const hn=({children:s,initial:t,isPresent:n,onExitComplete:l,custom:a,presenceAffectsLayout:m,mode:u,anchorX:h,root:x})=>{const f=es(gn),D=i.useId();let d=!0,c=i.useMemo(()=>(d=!1,{id:D,initial:t,isPresent:n,custom:a,onExitComplete:o=>{f.set(o,!0);for(const N of f.values())if(!N)return;l&&l()},register:o=>(f.set(o,!1),()=>f.delete(o))}),[n,f,l]);return m&&d&&(c={...c}),i.useMemo(()=>{f.forEach((o,N)=>f.set(N,!1))},[n]),i.useEffect(()=>{!n&&!f.size&&l&&l()},[n]),u==="popLayout"&&(s=ne.jsx(dn,{isPresent:n,anchorX:h,root:x,children:s})),ne.jsx(Us.Provider,{value:c,children:s})};function gn(){return new Map}const re=s=>s.key||"";function Fe(s){const t=[];return i.Children.forEach(s,n=>{i.isValidElement(n)&&t.push(n)}),t}const q=({children:s,custom:t,initial:n=!0,onExitComplete:l,presenceAffectsLayout:a=!0,mode:m="sync",propagate:u=!1,anchorX:h="left",root:x})=>{const[f,D]=js(u),d=i.useMemo(()=>Fe(s),[s]),c=u&&!f?[]:d.map(re),o=i.useRef(!0),N=i.useRef(d),r=es(()=>new Map),[g,b]=i.useState(d),[p,E]=i.useState(d);Vs(()=>{o.current=!1,N.current=d;for(let A=0;A<p.length;A++){const U=re(p[A]);c.includes(U)?r.delete(U):r.get(U)!==!0&&r.set(U,!1)}},[p,c.length,c.join("-")]);const w=[];if(d!==g){let A=[...d];for(let U=0;U<p.length;U++){const k=p[U],L=re(k);c.includes(L)||(A.splice(U,0,k),w.push(k))}return m==="wait"&&w.length&&(A=w),E(Fe(A)),b(d),null}m==="wait"&&p.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:j}=i.useContext(Cs);return ne.jsx(ne.Fragment,{children:p.map(A=>{const U=re(A),k=u&&!f?!1:d===p||c.includes(U),L=()=>{if(r.has(U))r.set(U,!0);else return;let V=!0;r.forEach(R=>{R||(V=!1)}),V&&(j==null||j(),E(N.current),u&&(D==null||D()),l&&l())};return ne.jsx(hn,{isPresent:k,initial:!o.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:m,root:x,onExitComplete:k?void 0:L,anchorX:h,children:A},U)})})},Nn=["online","away","busy","offline"],$e={background:{online:"bg-green-500",away:"bg-yellow-500",busy:"bg-red-500",offline:"bg-gray-500"},text:{online:"text-green-600",away:"text-yellow-600",busy:"text-red-600",offline:"text-gray-600"},border:{online:"border-green-500",away:"border-yellow-500",busy:"border-red-500",offline:"border-gray-500"},ring:{online:"ring-green-500",away:"ring-yellow-500",busy:"ring-red-500",offline:"ring-gray-500"}},fe={AVATAR_SIZES:{MEDIUM:"w-10 h-10",LARGE:"w-12 h-12"}},Y=(s,t="background")=>$e[t][s]||$e[t].offline,ce=s=>s.charAt(0).toUpperCase()+s.slice(1),xe={FADE_IN:"animate-in fade-in-0 duration-200",PULSE:"animate-pulse"},ie={USER_STATUS:"online",AVATAR_FALLBACK:"?",UNKNOWN_USER:"Unknown User",EMPTY_MESSAGES:"No messages yet"};function fn({user:s,onStatusChange:t,onSettingsClick:n,onLogoutClick:l,collapsed:a=!1}){const[m,u]=i.useState(ie.USER_STATUS),[h,x]=i.useState(!1),f=(s==null?void 0:s.name)||(s==null?void 0:s.displayName)||ie.UNKNOWN_USER,D=(s==null?void 0:s.email)||"",d=(s==null?void 0:s.image)||(s==null?void 0:s.photoURL)||"",c=f.charAt(0).toUpperCase()||ie.AVATAR_FALLBACK,o=i.useCallback(N=>{u(N),t==null||t(N),console.log("User status changed to:",N)},[t]);return i.useCallback(()=>{x(!1),n==null||n()},[n]),i.useCallback(()=>{x(!1),l==null||l()},[l]),a?e.jsxDEV(Se,{children:e.jsxDEV(ke,{children:[e.jsxDEV(Me,{asChild:!0,children:e.jsxDEV("div",{className:"flex justify-center p-3",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(F,{className:fe.AVATAR_SIZES.MEDIUM,children:[e.jsxDEV($,{src:d,alt:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:70,columnNumber:19},this),e.jsxDEV(P,{className:"text-sm font-medium",children:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:71,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:69,columnNumber:17},this),e.jsxDEV("span",{className:`absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full border-2 border-background ${Y(m)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:76,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:68,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:67,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:66,columnNumber:11},this),e.jsxDEV(Te,{side:"right",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"font-medium",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:84,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground capitalize",children:ce(m)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:85,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:83,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:82,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:65,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:64,columnNumber:7},this):e.jsxDEV(ze,{open:h,onOpenChange:x,children:[e.jsxDEV(Se,{children:e.jsxDEV(ke,{children:[e.jsxDEV(Me,{asChild:!0,children:e.jsxDEV(Ge,{asChild:!0,children:e.jsxDEV("div",{className:`flex items-center gap-3 p-3 cursor-pointer hover:bg-muted/50 rounded-lg transition-colors ${xe.FADE_IN}`,children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(F,{className:fe.AVATAR_SIZES.MEDIUM,children:[e.jsxDEV($,{src:d,alt:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:106,columnNumber:21},this),e.jsxDEV(P,{className:"text-sm font-medium",children:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:107,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:105,columnNumber:19},this),e.jsxDEV("span",{className:`absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full border-2 border-background ${Y(m)} ${m==="online"?xe.PULSE:""}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:112,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:104,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"font-medium text-sm truncate",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:119,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2 mt-1",children:e.jsxDEV(De,{variant:"outline",className:`text-xs px-2 py-0.5 ${Y(m,"text")} border-current`,children:ce(m)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:123,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:122,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:118,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:102,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:101,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:100,columnNumber:11},this),e.jsxDEV(Te,{children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:136,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:D},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:137,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:135,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:134,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:99,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:98,columnNumber:7},this),e.jsxDEV(Be,{className:`w-80 p-0 ${xe.FADE_IN}`,align:"start",children:[e.jsxDEV("div",{className:"flex items-center gap-3 p-4 bg-muted/50",children:[e.jsxDEV(F,{className:fe.AVATAR_SIZES.LARGE,children:[e.jsxDEV($,{src:d,alt:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:147,columnNumber:13},this),e.jsxDEV(P,{className:"text-lg font-medium",children:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:148,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:146,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"font-semibold text-base truncate",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:153,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground truncate",children:D},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:154,columnNumber:13},this),(s==null?void 0:s.username)&&e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["@",s.username]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:156,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:152,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:145,columnNumber:9},this),e.jsxDEV(Ss,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:161,columnNumber:9},this),e.jsxDEV("div",{className:"p-4 space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Status"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:166,columnNumber:13},this),e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${Y(m)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:167,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:165,columnNumber:11},this),e.jsxDEV(us,{value:m,onValueChange:o,children:[e.jsxDEV(ds,{className:"w-full",children:e.jsxDEV(hs,{children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${Y(m)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:176,columnNumber:19},this),e.jsxDEV("span",{className:"capitalize",children:ce(m)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:179,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:175,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:174,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:173,columnNumber:13},this),e.jsxDEV(gs,{children:Nn.map(N=>e.jsxDEV(Ns,{value:N,children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:`h-2 w-2 rounded-full ${Y(N)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:187,columnNumber:21},this),e.jsxDEV("span",{className:"capitalize",children:ce(N)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:190,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:186,columnNumber:19},this)},N,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:185,columnNumber:17},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:172,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:164,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:143,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-account.tsx",lineNumber:97,columnNumber:5},this)}const xn=({className:s,...t})=>e.jsxDEV("div",{className:T("flex flex-row items-center space-x-2 px-2.5 py-1.5",s),...t,children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:12,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex flex-col flex-grow space-y-1",children:[e.jsxDEV("div",{className:"w-[75%] h-2 rounded bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:16,columnNumber:9},void 0),e.jsxDEV("div",{className:"w-[50%] h-2 rounded bg-gray-200 animate-pulse"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:17,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:15,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-skeleton.tsx",lineNumber:7,columnNumber:5},void 0),Dn=(s,t)=>{const[n,l]=i.useState(!1);return i.useEffect(()=>{const a=window.matchMedia("(min-width: 768px)"),m=u=>l(u.matches);return a.addEventListener("change",m),m(a),()=>a.removeEventListener("change",m)},[]),n},bn=(s,t=6)=>{if(!s)return"";const n=s.trim().split(/\s+/);return n.length<=t?s:n.slice(0,t).join(" ")+"..."},wn=({conversation:s,currentUserId:t})=>{var f,D,d,c,o,N;const n=(s==null?void 0:s.type)==="group",l=n?(s==null?void 0:s.participants)||[]:((f=s==null?void 0:s.participants)==null?void 0:f.filter(r=>r.id!==t))||[],a=n?(s==null?void 0:s.displayName)||(s==null?void 0:s.name)||"Group Chat":((D=l[0])==null?void 0:D.name)||((d=l[0])==null?void 0:d.displayName)||ie.UNKNOWN_USER,m=((c=s==null?void 0:s.lastMessage)==null?void 0:c.content)||"",u=bn(m,6),h=(o=s==null?void 0:s.lastMessage)==null?void 0:o.createdAt,x=n&&((N=s==null?void 0:s.participants)==null?void 0:N.some(r=>r.status==="online"));return{group:n,displayName:a,displayText:u,participants:l,lastActivity:h,hasOnlineInGroup:x}},pn={dashboard:{chat:"/chat"}},Ln=s=>s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2),yn=s=>{const t=s.trim().split(" ");return t.length===1?t[0].slice(0,2).toUpperCase():t.slice(0,2).map(n=>n.charAt(0)).join("").toUpperCase()},vn=({selected:s,conversation:t,onCloseMobile:n})=>{const{data:l}=me(),a=l==null?void 0:l.user,m=te(),u=Dn(),{group:h,displayName:x,displayText:f,participants:D,lastActivity:d,hasOnlineInGroup:c}=wn({conversation:t,currentUserId:a==null?void 0:a.id}),o=D[0],{name:N,photoURL:r,status:g}=o||{},b=i.useCallback(async()=>{try{!u&&n&&n(),m({to:`${pn.dashboard.chat}?id=${t.id}`})}catch(w){console.error(w)}},[t.id,u,n,m]),p=e.jsxDEV("div",{className:"relative flex-shrink-0",children:[e.jsxDEV(F,{className:"h-12 w-12",children:[e.jsxDEV($,{src:t.avatarUrl||t.photoURL,alt:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:146,columnNumber:9},void 0),e.jsxDEV(P,{className:"text-sm bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:yn(x)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:150,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:145,columnNumber:7},void 0),c&&e.jsxDEV("span",{className:"absolute bottom-0.5 right-0.5 h-3 w-3 rounded-full bg-green-500 ring-2 ring-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:155,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:144,columnNumber:5},void 0),E=e.jsxDEV("div",{className:"relative flex-shrink-0",children:[e.jsxDEV(F,{className:"h-12 w-12",children:[e.jsxDEV($,{src:r||(o==null?void 0:o.photoURL),alt:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:163,columnNumber:9},void 0),e.jsxDEV(P,{className:"text-sm bg-muted font-medium",children:Ln(x)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:167,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:162,columnNumber:7},void 0),g==="online"&&e.jsxDEV("span",{className:"absolute bottom-0.5 right-0.5 h-3 w-3 rounded-full bg-green-500 ring-2 ring-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:172,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:161,columnNumber:5},void 0);return e.jsxDEV(M.div,{onClick:b,whileTap:{scale:.98},transition:{duration:.1},className:T("flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors",s?"bg-muted":"hover:bg-muted/50"),children:[h?p:E,e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"font-semibold text-[15px] truncate",children:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:193,columnNumber:11},void 0),e.jsxDEV("span",{className:"text-xs text-muted-foreground/70 flex-shrink-0 ml-2",children:d?ye(new Date(d),{addSuffix:!1}):""},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:196,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:192,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-0.5",children:[e.jsxDEV("span",{className:"text-sm text-muted-foreground truncate",children:f||ie.EMPTY_MESSAGES},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:205,columnNumber:11},void 0),e.jsxDEV(q,{children:t.unreadCount>0&&e.jsxDEV(M.span,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},transition:{type:"spring",stiffness:500,damping:25},className:"h-5 min-w-5 px-1.5 rounded-full bg-brand-light text-white text-xs font-medium flex items-center justify-center flex-shrink-0 ml-2",children:t.unreadCount>99?"99+":t.unreadCount},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:210,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:204,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:191,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav-item.tsx",lineNumber:178,columnNumber:5},void 0)};function An(s){const[t,n]=i.useState([]),[l,a]=i.useState(!0),[m,u]=i.useState(null),{socket:h,isConnected:x}=pe(),f=i.useCallback(async()=>{var d,c,o,N;if(!s){a(!1);return}try{a(!0),u(null);const r=await J.get(ee.chat.getThreads(s));r.data?r.data.success&&r.data.data?n(r.data.data):Array.isArray(r.data)?n(r.data):r.data.threads&&Array.isArray(r.data.threads)?n(r.data.threads):n([]):n([])}catch(r){console.error("Error fetching threads:",r);const g=((c=(d=r.response)==null?void 0:d.data)==null?void 0:c.message)||((N=(o=r.response)==null?void 0:o.data)==null?void 0:N.error)||r.message||"Failed to fetch threads";u(g),I.error("Failed to load chat threads"),n([])}finally{a(!1)}},[s]);i.useEffect(()=>{if(!h||!x)return;const d=N=>{n(r=>[N.thread,...r]),I.success("New conversation started!")},c=N=>{n(r=>r.map(g=>g.id===N.threadId?{...g,messages:[N.lastMessage],updatedAt:new Date().toISOString()}:g))},o=N=>{n(r=>{const g=r.findIndex(E=>E.id===N.threadId);if(g===-1)return r;const b=[...r],p=b[g];return b[g]={...p,messages:[N],updatedAt:new Date().toISOString()},b.splice(g,1),b.unshift(b[g]?p:b[g]),[{...p,messages:[N],updatedAt:new Date().toISOString()},...r.filter(E=>E.id!==N.threadId)]})};return h.on("new_thread",d),h.on("thread_updated",c),h.on("new_message",o),()=>{h.off("new_thread",d),h.off("thread_updated",c),h.off("new_message",o)}},[h,x]),i.useEffect(()=>{f()},[f]);const D=i.useCallback((d,c)=>{n(o=>o.some(g=>g.id===d)?[{...o.find(g=>g.id===d),messages:[c],updatedAt:new Date().toISOString()},...o.filter(g=>g.id!==d)]:o)},[]);return{threads:t,loading:l,error:m,refetch:f,updateThreadLastMessage:D}}function En(s){const[t,n]=i.useState([]),[l,a]=i.useState(!1),[m,u]=i.useState(null),{socket:h,isConnected:x,joinThread:f,leaveThread:D}=pe(),d=i.useRef(null),c=i.useCallback(async()=>{var g,b,p,E;if(!s){n([]);return}try{a(!0),u(null);const w=await J.get(ee.chat.getMessages(s));w.data?w.data.success&&w.data.data?n(Array.isArray(w.data.data)?w.data.data:[]):Array.isArray(w.data)?n(w.data):w.data.messages&&Array.isArray(w.data.messages)?n(w.data.messages):n([]):n([])}catch(w){console.error("Error fetching messages:",w);const j=((b=(g=w.response)==null?void 0:g.data)==null?void 0:b.message)||((E=(p=w.response)==null?void 0:p.data)==null?void 0:E.error)||w.message||"Failed to fetch messages";u(j),n([])}finally{a(!1)}},[s]),o=i.useCallback(async(g,b,p)=>{var E,w,j,A;if(s)try{const U={senderId:b,content:g};p&&(U.repliesToId=p);const k=await J.post(ee.chat.sendMessage(s),U);let L=null;if(k.data&&(k.data.success&&k.data.data?L=k.data.data:k.data.message?L=k.data.message:k.data.id&&(L=k.data)),L)return n(V=>[...V,L]),L}catch(U){console.error("Error sending message:",U);const k=((w=(E=U.response)==null?void 0:E.data)==null?void 0:w.message)||((A=(j=U.response)==null?void 0:j.data)==null?void 0:A.error)||U.message||"Failed to send message";throw I.error(k),U}},[s]),N=i.useCallback(async g=>{var p,E,w,j;if(!s)return;const b=[...t];try{return n(A=>A.map(U=>U.id===g?{...U,isDeleted:!0,deletedAt:new Date().toISOString(),content:"This message has been deleted"}:U)),await J.delete(ee.chat.deleteMessage(g)),I.success("Message deleted successfully"),!0}catch(A){n(b);const U=((E=(p=A.response)==null?void 0:p.data)==null?void 0:E.message)||((j=(w=A.response)==null?void 0:w.data)==null?void 0:j.error)||A.message||"Failed to delete message";throw I.error(U),A}},[s,t]);i.useEffect(()=>{if(!h||!x)return;const g=w=>{w.threadId===s&&n(j=>j.some(A=>A.id===w.id)?j:[...j,w])},b=w=>{w.threadId===s&&n(j=>j.map(A=>A.id===w.messageId?{...A,isDeleted:!0,deletedAt:new Date().toISOString(),content:"This message has been deleted"}:A))},p=w=>{},E=w=>{w.threadId===s&&n(j=>j.map(A=>A.id===w.messageId?{...A,readBy:[...A.readBy||[],{id:`${w.messageId}-${w.readerId}`,userId:w.readerId,messageId:w.messageId,readAt:new Date().toISOString(),user:{id:w.readerId,name:w.readerName}}]}:A))};return h.on("new_message",g),h.on("message_deleted",b),h.on("message_sent",p),h.on("message_read",E),()=>{h.off("new_message",g),h.off("message_deleted",b),h.off("message_sent",p),h.off("message_read",E)}},[h,x,s]),i.useEffect(()=>{if(!(!s||!x))return d.current&&d.current!==s&&D(d.current),f(s),d.current=s,()=>{s&&(D(s),d.current=null)}},[s,x,f,D]);const r=i.useCallback(async g=>{try{await J.post(ee.chat.markAsRead(g))}catch{}},[]);return i.useEffect(()=>{c()},[c]),{messages:t,loading:l,error:m,sendMessage:o,deleteMessage:N,markAsRead:r,refetch:c}}function is(s){const[t,n]=i.useState([]),{socket:l,isConnected:a,sendTyping:m}=pe(),{data:u}=me(),h=u==null?void 0:u.user,x=i.useRef(void 0);i.useEffect(()=>()=>{x.current&&(clearTimeout(x.current),x.current=void 0),n([])},[s]),i.useEffect(()=>{if(!l||!a||!s)return;const D=d=>{d.threadId===s&&d.senderId!==(h==null?void 0:h.id)&&n(c=>d.isTyping?c.some(N=>N.userId===d.senderId)?c:[...c,{userId:d.senderId,userName:"Someone"}]:c.filter(o=>o.userId!==d.senderId))};return l.on("typing_status",D),()=>{l.off("typing_status",D)}},[l,a,s,h==null?void 0:h.id]);const f=i.useCallback(D=>{s&&(m(s,D),D?(x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{m(s,!1)},3e3)):x.current&&(clearTimeout(x.current),x.current=void 0))},[s,m]);return{typingUsers:t,setTyping:f}}function Un(){const[s,t]=i.useState(!1),[n,l]=i.useState(null);return{createThread:i.useCallback(async m=>{var u,h,x,f;try{t(!0),l(null);const D=await J.post(ee.chat.createThread,m);if(D.data){let d=null;if(D.data.success&&D.data.data?d=D.data.data:D.data.thread?d=D.data.thread:D.data.id&&(d=D.data),d)return I.success("Thread created successfully"),d}throw new Error("Failed to create thread")}catch(D){console.error("Error creating thread:",D);const d=((h=(u=D.response)==null?void 0:u.data)==null?void 0:h.message)||((f=(x=D.response)==null?void 0:x.data)==null?void 0:f.error)||D.message||"Failed to create thread";throw l(d),I.error(d),D}finally{t(!1)}},[]),loading:s,error:n}}function jn(s){const[t,n]=i.useState([]),[l,a]=i.useState(!1),[m,u]=i.useState(null),h=i.useCallback(async()=>{var x,f,D,d;if(!s){n([]);return}try{a(!0),u(null);const c=await J.get(ee.chat.getAvailableUsers(s));let o=[];c.data&&(c.data.success&&c.data.data?o=c.data.data:Array.isArray(c.data)?o=c.data:c.data.users&&Array.isArray(c.data.users)&&(o=c.data.users));const N=o.filter(r=>r.id!==s);n(N)}catch(c){console.error("Error fetching available users:",c);const o=((f=(x=c.response)==null?void 0:x.data)==null?void 0:f.message)||((d=(D=c.response)==null?void 0:D.data)==null?void 0:d.error)||c.message||"Failed to fetch users";u(o),n([])}finally{a(!1)}},[s]);return i.useEffect(()=>{h()},[h]),{users:t,loading:l,error:m,refetch:h}}const Vn=()=>e.jsxDEV("div",{className:"flex items-center gap-3 p-2",children:[e.jsxDEV(se,{className:"h-10 w-10 rounded-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:30,columnNumber:5},void 0),e.jsxDEV("div",{className:"flex-1 space-y-1",children:[e.jsxDEV(se,{className:"h-4 w-32"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:32,columnNumber:7},void 0),e.jsxDEV(se,{className:"h-3 w-24"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:33,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:31,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:29,columnNumber:3},void 0);function Cn({open:s,onOpenChange:t,currentUserId:n,onThreadCreated:l}){const a=te(),[m,u]=i.useState(""),[h,x]=i.useState(null),{users:f,loading:D,error:d,refetch:c}=jn(n),{createThread:o}=Un(),N=i.useMemo(()=>{if(!m.trim())return f;const b=m.toLowerCase();return f.filter(p=>{var E,w;return p.name.toLowerCase().includes(b)||((E=p.username)==null?void 0:E.toLowerCase().includes(b))||((w=p.email)==null?void 0:w.toLowerCase().includes(b))})},[f,m]),r=async b=>{if(!(!n||h))try{x(b.id);const p={name:void 0,isGroup:!1,userIds:[n,b.id],createdBy:n},E=await o(p);E&&(await(l==null?void 0:l()),x(null),t(!1),u(""),a({to:"/chat",search:{id:E.id}}),I.success(`Chat with ${b.name} started!`))}catch{I.error("Failed to start chat. Please try again."),x(null)}},g=()=>{h||(t(!1),u(""))};return e.jsxDEV(He,{open:s,onOpenChange:g,children:e.jsxDEV(qe,{className:"max-w-md h-[500px] flex flex-col p-0",children:[e.jsxDEV(We,{className:"px-6 pt-6 pb-4",children:[e.jsxDEV(Ke,{className:"flex items-center gap-2",children:[e.jsxDEV(le,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:111,columnNumber:13},this),"Start New Chat"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:110,columnNumber:11},this),e.jsxDEV(fs,{children:"Click on a user to start chatting"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:114,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:109,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 space-y-4 flex-1 flex flex-col overflow-hidden",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ye,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:122,columnNumber:13},this),e.jsxDEV(Qe,{placeholder:"Search users...",value:m,onChange:b=>u(b.target.value),className:"pl-9",disabled:!!h},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:123,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:121,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV(de,{className:"h-full",children:D?e.jsxDEV("div",{className:"space-y-2",children:Array.from({length:5}).map((b,p)=>e.jsxDEV(Vn,{},p,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:138,columnNumber:21},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:136,columnNumber:17},this):d?e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV("div",{className:"text-4xl mb-2",children:"âš ï¸"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:143,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm mb-2",children:"Failed to load users"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:144,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs mb-3",children:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:145,columnNumber:19},this),e.jsxDEV(O,{size:"sm",variant:"outline",onClick:c,children:"Try Again"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:146,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:142,columnNumber:17},this):N.length===0?e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV("div",{className:"text-4xl mb-2",children:m?"ðŸ”":"ðŸ‘¥"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:152,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm mb-1",children:m?"No users found":"No available users"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:155,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs",children:m?"Try a different search term":"All users already have conversations with you"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:158,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:151,columnNumber:17},this):e.jsxDEV("div",{className:"space-y-1",children:N.map(b=>{const p=h===b.id;return e.jsxDEV("div",{onClick:()=>!h&&r(b),className:T("flex items-center gap-3 p-3 rounded-md transition-colors",!h&&"cursor-pointer hover:bg-muted/50",h&&h!==b.id&&"opacity-50",p&&"bg-muted border border-brand-light/20"),children:[e.jsxDEV(F,{className:"h-10 w-10",children:[e.jsxDEV($,{src:b.image,alt:b.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:182,columnNumber:27},this),e.jsxDEV(P,{children:b.name.charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:183,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:181,columnNumber:25},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"text-sm font-medium truncate",children:b.name},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:189,columnNumber:27},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground truncate",children:b.username?`@${b.username}`:b.email},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:192,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:188,columnNumber:25},this),p&&e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxDEV(Xe,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:199,columnNumber:29},this),e.jsxDEV("span",{children:"Creating chat..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:200,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:198,columnNumber:27},this)]},b.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:171,columnNumber:23},this)})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:166,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:134,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:133,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:119,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 py-4 border-t flex justify-end",children:e.jsxDEV(O,{variant:"outline",onClick:g,disabled:!!h,children:h?"Creating...":"Cancel"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:214,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:213,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:108,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/create-chat-modal.tsx",lineNumber:107,columnNumber:5},this)}const Sn=()=>{const[s,t]=i.useState(!1);return i.useEffect(()=>{const n=window.matchMedia("(min-width: 1024px)"),l=a=>t(a.matches);return n.addEventListener("change",l),l(n),()=>n.removeEventListener("change",l)},[]),s},kn=()=>{const[s,t]=i.useState(!1),[n,l]=i.useState(!1);return{collapseDesktop:s,onCollapseDesktop:()=>t(a=>!a),onCloseDesktop:()=>t(!1),openMobile:n,onOpenMobile:()=>l(!0),onCloseMobile:()=>l(!1)}},Mn=(s=!1)=>{const[t,n]=i.useState(s);return{value:t,onTrue:()=>n(!0),onFalse:()=>n(!1),onToggle:()=>n(l=>!l)}};function Tn({loading:s,user:t,conversations:n,selectedConversationId:l,onConversationSelect:a,onThreadCreated:m,openMobile:u,onOpenMobile:h,onCloseMobile:x,mobileOnly:f=!1}){te();const D=Sn(),d=kn(),c=u??d.openMobile,o=x??d.onCloseMobile,{value:N,onTrue:r,onFalse:g}=Mn(!1),[b,p]=i.useState(""),[E,w]=i.useState(n);i.useEffect(()=>{if(!b.trim())w(n);else{const S=n.filter(z=>{var _;const H=z.displayName||"",W=((_=z.participants)==null?void 0:_.map(X=>X.displayName||X.name||"").join(" "))||"";return(H+" "+W).toLowerCase().includes(b.toLowerCase())});w(S)}},[b,n]),i.useEffect(()=>{b.trim()||w(n)},[n,b]);const j=i.useCallback(()=>{D||o(),r()},[D,o,r]),A=i.useCallback(S=>{p(S)},[]),U=i.useCallback(()=>{p("")},[]),k=i.useCallback(async()=>{await(m==null?void 0:m())},[m]),L=()=>e.jsxDEV(e.Fragment,{children:Array.from({length:8},(S,z)=>e.jsxDEV(xn,{},`skeleton-${z}`,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:179,columnNumber:9},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:177,columnNumber:5},this),V=()=>e.jsxDEV(M.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.3,ease:[.4,0,.2,1]},className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:e.jsxDEV(Re,{className:"w-6 h-6 text-muted-foreground/60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:192,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:191,columnNumber:7},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-2",children:b?"No conversations found":"No conversations yet"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:194,columnNumber:7},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground/70",children:b?"Try a different search term":"Start a new conversation"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:197,columnNumber:7},this),!b&&e.jsxDEV(O,{variant:"outline",size:"sm",className:"mt-4",onClick:j,children:[e.jsxDEV(Re,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:209,columnNumber:11},this),"New Message"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:203,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:185,columnNumber:5},this),R=()=>e.jsxDEV(e.Fragment,{children:E.length>0?e.jsxDEV(M.div,{initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.04}}},children:E.map(S=>e.jsxDEV(M.div,{variants:{hidden:{opacity:0,x:-8},visible:{opacity:1,x:0}},transition:{duration:.25,ease:[.4,0,.2,1]},children:e.jsxDEV(vn,{conversation:S,selected:S.id===l,onCloseMobile:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:236,columnNumber:15},this)},S.id,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:228,columnNumber:13},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:219,columnNumber:9},this):V()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:217,columnNumber:5},this),y=()=>e.jsxDEV("div",{className:"flex items-center justify-between px-4 min-h-[68px] border-b",children:[e.jsxDEV(fn,{user:t},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:252,columnNumber:7},this),e.jsxDEV(O,{size:"icon",variant:"ghost",onClick:j,className:"rounded-full h-9 w-9",children:e.jsxDEV(an,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:259,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:253,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:251,columnNumber:5},this),C=()=>e.jsxDEV("div",{className:"px-3 py-2",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ye,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:267,columnNumber:9},this),e.jsxDEV(Qe,{value:b,onChange:S=>A(S.target.value),placeholder:"Search",className:"pl-10 h-9 rounded-full bg-muted/50 border-0 focus-visible:ring-0 text-sm","aria-label":"Search conversations"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:268,columnNumber:9},this),e.jsxDEV(q,{children:b&&e.jsxDEV(M.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},children:e.jsxDEV(O,{variant:"ghost",size:"sm",className:"absolute right-1.5 top-1/2 -translate-y-1/2 h-6 w-6 p-0 text-muted-foreground hover:text-foreground rounded-full",onClick:U,"aria-label":"Clear search",children:"Ã—"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:283,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:277,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:275,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:266,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:265,columnNumber:5},this),v=()=>e.jsxDEV("div",{className:"h-full flex flex-col",children:[y(),C(),e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV(de,{className:"h-full",children:s?L():R()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:309,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:308,columnNumber:7},this),e.jsxDEV(Cn,{open:N,onOpenChange:g,currentUserId:t==null?void 0:t.id,onThreadCreated:k},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:314,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:300,columnNumber:5},this);return f?c?e.jsxDEV(ss,{open:c,onOpenChange:o,children:e.jsxDEV(ns,{side:"left",className:"p-0 border-r-0 w-[320px]",children:v()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:335,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:334,columnNumber:7},this):null:e.jsxDEV("div",{className:"h-full w-full flex flex-col",children:v()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-nav.tsx",lineNumber:344,columnNumber:5},this)}function _n({participants:s=[],conversation:t,onDetailsClick:n}){var c;const l=(t==null?void 0:t.type)==="group",a=s.find(o=>!o.isCurrentUser),m=o=>{const N=o.trim().split(" ");return N.length===1?N[0].slice(0,2).toUpperCase():N.slice(0,2).map(r=>r.charAt(0)).join("").toUpperCase()},u=o=>{switch(o){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"busy":return"bg-red-500";case"offline":default:return"bg-gray-400"}},h=o=>o?`Last seen ${ks(new Date(o),{addSuffix:!0})}`:"Last seen recently",x=((c=t==null?void 0:t.participants)==null?void 0:c.length)||s.length,f=((t==null?void 0:t.participants)||s).filter(o=>o.status==="online").length,D=e.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(F,{className:"h-10 w-10",children:[e.jsxDEV($,{src:(t==null?void 0:t.photoURL)||(t==null?void 0:t.avatarUrl),alt:(t==null?void 0:t.displayName)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:87,columnNumber:11},this),e.jsxDEV(P,{className:"text-sm bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:m((t==null?void 0:t.displayName)||(t==null?void 0:t.name)||"Group")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:91,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:86,columnNumber:9},this),f>0&&e.jsxDEV("div",{className:"absolute bottom-0 right-0 h-3 w-3 bg-green-500 rounded-full border-2 border-background"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:98,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:85,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h3",{className:"text-[15px] font-semibold truncate",children:(t==null?void 0:t.displayName)||(t==null?void 0:t.name)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:104,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsxDEV(oe,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:108,columnNumber:11},this),e.jsxDEV("span",{children:[x," members",f>0&&e.jsxDEV("span",{className:"ml-1",children:["â€¢ ",f," online"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:112,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:109,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:107,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:103,columnNumber:7},this),e.jsxDEV(ue,{className:"h-4 w-4 text-muted-foreground/50 flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:121,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:83,columnNumber:5},this),d=e.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(F,{className:"h-10 w-10",children:[e.jsxDEV($,{src:(a==null?void 0:a.photoURL)||(a==null?void 0:a.avatarUrl)||(t==null?void 0:t.photoURL),alt:(a==null?void 0:a.name)||(a==null?void 0:a.displayName)||(t==null?void 0:t.displayName)||"User"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:130,columnNumber:11},this),e.jsxDEV(P,{children:((a==null?void 0:a.name)||(a==null?void 0:a.displayName)||(t==null?void 0:t.displayName)||"U").charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:134,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:129,columnNumber:9},this),e.jsxDEV("div",{className:T("absolute bottom-0 right-0 h-3 w-3 rounded-full border-2 border-background",u(a==null?void 0:a.status))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:140,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:128,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h3",{className:"text-[15px] font-semibold truncate",children:(a==null?void 0:a.name)||(a==null?void 0:a.displayName)||(t==null?void 0:t.displayName)||"Unknown User"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:148,columnNumber:9},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground truncate",children:(a==null?void 0:a.status)==="offline"?h(a.lastActivity):e.jsxDEV("span",{className:"capitalize",children:(a==null?void 0:a.status)||"online"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:155,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:151,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:147,columnNumber:7},this),e.jsxDEV(ue,{className:"h-4 w-4 text-muted-foreground/50 flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:164,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:126,columnNumber:5},this);return e.jsxDEV("div",{className:T("flex items-center gap-3 w-full py-1 px-2 -mx-2 rounded-xl transition-colors cursor-pointer",n&&"hover:bg-muted/50 active:bg-muted/70"),onClick:n,role:n?"button":void 0,tabIndex:n?0:void 0,onKeyDown:n?o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),n())}:void 0,children:l?D:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-header-detail.tsx",lineNumber:169,columnNumber:5},this)}function Rn({message:s,participants:t,currentUserId:n}){return i.useMemo(()=>{var h;const a=t.find(x=>x.id===s.senderId)||{firstName:"Unknown",avatarUrl:""},m=s.senderId===n,u=s.contentType==="image";return{me:m,senderDetails:{firstName:((h=a.displayName)==null?void 0:h.split(" ")[0])||a.firstName,avatarUrl:a.photoURL||a.avatarUrl},hasImage:u}},[s,t,n])}function In(s){switch(s==null?void 0:s.toUpperCase()){case"PICKLEBALL":return{label:"Pickleball",badgeColor:"#7C3AED",badgeBg:"#F3E8FF",buttonColor:"#7C3AED"};case"TENNIS":return{label:"Tennis",badgeColor:"#059669",badgeBg:"#ECFDF5",buttonColor:"#059669"};case"PADEL":return{label:"Padel",badgeColor:"#2563EB",badgeBg:"#EFF6FF",buttonColor:"#2563EB"};default:return{label:s||"Sport",badgeColor:"#6B7280",badgeBg:"#F3F4F6",buttonColor:"#6B7280"}}}function Fn({message:s,senderDetails:t}){var k;const n=s.matchData,{firstName:l,avatarUrl:a}=t,m=s.createdAt,u=i.useMemo(()=>In(n==null?void 0:n.sportType),[n==null?void 0:n.sportType]),h=L=>{try{const V=new Date(L);return be(V,"d MMM yyyy")}catch{return L}},x=L=>L?L.includes(" - ")?L.split(" - ")[0].trim():L.trim():"12:00 PM",f=L=>{if(!L)return"TBD";if(L.includes("M"))return L;const[V,R]=L.split(":"),y=parseInt(V),C=y>=12?"PM":"AM";return`${y%12||12}:${R} ${C}`},D=(L,V)=>{const R=x(L),[y,C]=R.split(" "),[v,S]=y.split(":").map(Number);let z=C==="PM"&&v!==12?v+12:v;C==="AM"&&v===12&&(z=0);const H=z*60+S+V*60,W=Math.floor(H/60)%24,K=H%60,_=W%12||12,X=W>=12?"PM":"AM";return`${_}:${String(K).padStart(2,"0")} ${X}`},d=()=>{const L=n==null?void 0:n.fee,V=n==null?void 0:n.feeAmount;if(L==="FREE"||!L)return"Free";if(L==="SPLIT"&&V){const R=parseFloat(V),y=parseInt((n==null?void 0:n.numberOfPlayers)||"2",10);return`RM${y>0?(R/y).toFixed(2):"0.00"}/player`}return L==="FIXED"&&V?`RM${parseFloat(V).toFixed(2)}/player`:"Free"},c=()=>(n==null?void 0:n.matchType)==="SINGLES"||(n==null?void 0:n.numberOfPlayers)==="2"?"Singles":"Doubles",o=()=>(n==null?void 0:n.matchType)==="SINGLES"||(n==null?void 0:n.numberOfPlayers)==="2"?2:4,N=(n==null?void 0:n.participants)||[],r=N.filter(L=>L.invitationStatus==="ACCEPTED"||!L.invitationStatus),g=o(),b=n!=null&&n.time?x(n.time):"12:00 PM",p=f(b),E=D(b,(n==null?void 0:n.duration)||2),w=(n==null?void 0:n.isFriendly)||(n==null?void 0:n.isFriendlyRequest),j=c(),A=L=>{var V;return L.name?L.name:L.username?L.username:`User ${((V=L.userId)==null?void 0:V.slice(-6))||"???"}`},U=L=>{switch(L){case"ACCEPTED":return{icon:Ne,color:"text-emerald-500",bg:"bg-emerald-50"};case"DECLINED":return{icon:_e,color:"text-red-500",bg:"bg-red-50"};case"PENDING":return{icon:Hs,color:"text-amber-500",bg:"bg-amber-50"};default:return{icon:Ne,color:"text-emerald-500",bg:"bg-emerald-50"}}};return e.jsxDEV("div",{className:"group flex gap-3 py-2 px-4 md:px-6",children:[e.jsxDEV(F,{className:"h-8 w-8 flex-shrink-0 mt-0.5 border border-border/50",children:[e.jsxDEV($,{src:a,alt:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:155,columnNumber:9},this),e.jsxDEV(P,{className:"text-[11px] bg-muted font-medium text-muted-foreground",children:((k=l==null?void 0:l.charAt(0))==null?void 0:k.toUpperCase())||"?"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:156,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:154,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-col flex-1 min-w-0 max-w-[420px]",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsxDEV("span",{className:"text-[13px] text-muted-foreground",children:[e.jsxDEV("span",{className:"font-semibold text-foreground",children:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:165,columnNumber:13},this),w?" sent a friendly match request":" posted a league match"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:164,columnNumber:11},this),e.jsxDEV("span",{className:"text-[11px] text-muted-foreground/50 ml-auto tabular-nums",children:ye(new Date(m),{addSuffix:!0})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:168,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:163,columnNumber:9},this),e.jsxDEV("div",{className:"rounded-xl border bg-card overflow-hidden shadow-[0_1px_2px_rgba(0,0,0,0.05),0_1px_4px_rgba(0,0,0,0.04)]",style:{borderColor:`${u.badgeColor}25`},children:[e.jsxDEV("div",{className:"px-3.5 py-2.5 flex items-center justify-between border-b border-border/40",children:[e.jsxDEV("span",{className:"font-semibold text-[13px] text-foreground",children:[j," ",w?"Friendly":"League Match"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:180,columnNumber:13},this),e.jsxDEV("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded-full",style:{backgroundColor:`${u.badgeColor}15`,color:u.badgeColor},children:u.label},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:179,columnNumber:11},this),e.jsxDEV("div",{className:"px-3.5 py-3 flex gap-4",children:[e.jsxDEV("div",{className:"flex-1 space-y-1.5",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(Le,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:199,columnNumber:17},this),e.jsxDEV("span",{className:"truncate",children:(n==null?void 0:n.location)||"TBD"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:200,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:198,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(xs,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("span",{children:h(n==null?void 0:n.date)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:202,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(Ze,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:207,columnNumber:17},this),e.jsxDEV("span",{children:[p," â€“ ",E]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:208,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:206,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-[12px] text-muted-foreground",children:[e.jsxDEV(Gs,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:211,columnNumber:17},this),e.jsxDEV("span",{children:d()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:212,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:210,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:197,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col items-end gap-1.5 shrink-0",children:[e.jsxDEV("div",{className:T("flex items-center gap-1 text-[10px] font-medium px-2 py-0.5 rounded",n!=null&&n.courtBooked?"bg-emerald-50 text-emerald-600":"bg-red-50 text-red-500"),children:[e.jsxDEV("span",{children:n!=null&&n.courtBooked?"Court booked":"No court"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:227,columnNumber:17},this),n!=null&&n.courtBooked?e.jsxDEV(Ne,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:229,columnNumber:19},this):e.jsxDEV(_e,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:231,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:219,columnNumber:15},this),(n==null?void 0:n.isFriendlyRequest)&&(n==null?void 0:n.requestStatus)&&e.jsxDEV("div",{className:T("flex items-center gap-1 text-[10px] font-medium px-2 py-0.5 rounded",n.requestStatus==="ACCEPTED"&&"bg-emerald-50 text-emerald-600",n.requestStatus==="DECLINED"&&"bg-red-50 text-red-500",n.requestStatus==="EXPIRED"&&"bg-gray-100 text-gray-500",n.requestStatus==="PENDING"&&"bg-amber-50 text-amber-600"),children:[n.requestStatus==="ACCEPTED"&&"Accepted",n.requestStatus==="DECLINED"&&"Declined",n.requestStatus==="EXPIRED"&&"Expired",n.requestStatus==="PENDING"&&"Pending"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:237,columnNumber:17},this),(n==null?void 0:n.status)&&n.status!=="SCHEDULED"&&e.jsxDEV("div",{className:T("text-[10px] font-medium px-2 py-0.5 rounded",n.status==="COMPLETED"&&"bg-blue-50 text-blue-600",n.status==="CANCELLED"&&"bg-gray-100 text-gray-500",n.status==="ONGOING"&&"bg-amber-50 text-amber-600"),children:n.status},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:255,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:217,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:195,columnNumber:11},this),e.jsxDEV("div",{className:"px-3.5 py-2.5 border-t border-border/40 bg-muted/20",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("div",{className:"flex items-center gap-1.5 text-[11px] text-muted-foreground font-medium",children:[e.jsxDEV(oe,{className:"h-3.5 w-3.5 opacity-60"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:273,columnNumber:17},this),e.jsxDEV("span",{children:"Players"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:274,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:272,columnNumber:15},this),e.jsxDEV("span",{className:"text-[10px] text-muted-foreground tabular-nums",children:[r.length,"/",g]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:276,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:271,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-1",children:[N.map((L,V)=>{const R=U(L.invitationStatus),y=R.icon;return e.jsxDEV("div",{className:"flex items-center gap-2 py-1 px-2 rounded-md bg-background/60",children:[e.jsxDEV(F,{className:"h-5 w-5 border border-border/30",children:[e.jsxDEV($,{src:L.image,alt:A(L)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:291,columnNumber:23},this),e.jsxDEV(P,{className:"text-[8px] bg-muted font-medium",children:A(L).charAt(0).toUpperCase()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:292,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:290,columnNumber:21},this),e.jsxDEV("div",{className:"flex-1 min-w-0 flex items-center gap-1.5",children:[e.jsxDEV("span",{className:"text-[12px] font-medium text-foreground truncate",children:A(L)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:297,columnNumber:23},this),L.role==="CREATOR"&&e.jsxDEV("span",{className:"text-[9px] text-muted-foreground bg-muted px-1.5 py-0.5 rounded font-medium",children:"Host"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:301,columnNumber:25},this),L.team&&e.jsxDEV("span",{className:"text-[9px] text-muted-foreground",children:["T",L.team==="team1"?"1":"2"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:306,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:296,columnNumber:21},this),e.jsxDEV(y,{className:T("h-3.5 w-3.5",R.color)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:311,columnNumber:21},this)]},L.id||L.userId||V,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:286,columnNumber:19},this)}),N.length<g&&Array.from({length:g-N.length}).map((L,V)=>e.jsxDEV("div",{className:"flex items-center gap-2 py-1 px-2 rounded-md border border-dashed border-border/50",children:[e.jsxDEV("div",{className:"h-5 w-5 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(oe,{className:"h-2.5 w-2.5 text-muted-foreground/40"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:324,columnNumber:23},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:323,columnNumber:21},this),e.jsxDEV("span",{className:"text-[11px] text-muted-foreground/50 italic",children:"Waiting for player..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:326,columnNumber:21},this)]},`empty-${V}`,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:319,columnNumber:19},this))]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:281,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:270,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:174,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:161,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/match-message-card.tsx",lineNumber:152,columnNumber:5},this)}const $n=i.memo(Fn);function Pn({message:s,participants:t,onOpenLightbox:n,onReply:l,onDelete:a}){var W,K,_,X,ve;const{data:m}=me(),u=m==null?void 0:m.user,[h,x]=i.useState(!1),[f,D]=i.useState(s.reactions||[]),[d,c]=i.useState(!1),{me:o,senderDetails:N,hasImage:r}=Rn({message:s,participants:t,currentUserId:(u==null?void 0:u.id)||""}),{firstName:g,avatarUrl:b}=N,p=s.content||s.body||"",E=s.createdAt,w=s.isDeleted||!1,j=i.useMemo(()=>{if(s.messageType==="MATCH"&&s.matchData){if(typeof s.matchData=="string")try{return JSON.parse(s.matchData)}catch{return null}return s.matchData}return s.matchData&&typeof s.matchData=="object"?s.matchData:null},[s.messageType,s.matchData]);if(j!==null&&!w)return e.jsxDEV($n,{message:{...s,matchData:j},senderDetails:N},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:93,columnNumber:7},this);const U=()=>{l&&!w&&l(s)},k=()=>{x(!0)},L=()=>{a&&a(s.id),x(!1)},V=B=>{D(ae=>{const he=ae.find(G=>G.emoji===B);return he?he.isSelected?he.count===1?ae.filter(G=>G.emoji!==B):ae.map(G=>G.emoji===B?{...G,count:G.count-1,isSelected:!1}:G):ae.map(G=>G.emoji===B?{...G,count:G.count+1,isSelected:!0}:G):[...ae,{emoji:B,count:1,isSelected:!0}]})},y=((K=(W=s.repliesTo)==null?void 0:W.sender)==null?void 0:K.id)===(u==null?void 0:u.id)?"You":((X=(_=s.repliesTo)==null?void 0:_.sender)==null?void 0:X.name)||"User",C=s.repliesTo&&e.jsxDEV("div",{className:T("mb-2 pb-2 text-xs border-b",o?"border-white/20":"border-border"),children:[e.jsxDEV("span",{className:T("font-medium",o?"text-white/80":"text-foreground/70"),children:y},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:157,columnNumber:7},this),e.jsxDEV("p",{className:T("line-clamp-2 mt-0.5",o?"text-white/60":"text-muted-foreground"),children:s.repliesTo.isDeleted?e.jsxDEV("span",{className:"italic flex items-center gap-1",children:[e.jsxDEV(ge,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:173,columnNumber:13},this),"Message deleted"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:172,columnNumber:11},this):s.repliesTo.content},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:165,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:151,columnNumber:5},this),v=!o&&e.jsxDEV("div",{className:"mb-1",children:e.jsxDEV("p",{className:"text-xs text-muted-foreground font-medium",children:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:185,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:184,columnNumber:5},this),S=w?e.jsxDEV("div",{className:T("flex items-center gap-2 px-4 py-2.5 italic text-sm",o?"rounded-[20px] rounded-br-[6px] bg-brand-light/40 text-white/70":"rounded-[20px] rounded-bl-[6px] bg-muted/40 text-muted-foreground"),children:[e.jsxDEV(ge,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:199,columnNumber:7},this),e.jsxDEV("span",{children:"Message deleted"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:200,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:190,columnNumber:5},this):e.jsxDEV("div",{className:T("relative w-fit max-w-full transition-all duration-200",r?"p-0 bg-transparent rounded-2xl overflow-hidden":"px-4 py-2.5",o?["rounded-[20px] rounded-br-[6px]","bg-brand-light text-white"]:["rounded-[20px] rounded-bl-[6px]","bg-muted text-foreground"]),children:[C,r?e.jsxDEV(M.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.3},children:e.jsxDEV("img",{src:p,alt:"attachment",width:400,height:220,className:"min-h-[220px] w-full object-cover rounded-2xl cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>n==null?void 0:n(p)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:228,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:223,columnNumber:9},this):e.jsxDEV("p",{className:"text-sm whitespace-pre-wrap break-words leading-relaxed",children:p},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:238,columnNumber:9},this),e.jsxDEV(q,{children:f.length>0&&e.jsxDEV(M.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},className:"flex flex-wrap gap-1 mt-1.5 -mb-0.5",children:f.map(B=>e.jsxDEV(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>V(B.emoji),className:T("inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-xs transition-colors duration-150",o?"bg-white/15 hover:bg-white/25":"bg-muted-foreground/10 hover:bg-muted-foreground/20",B.isSelected&&"ring-1 ring-current/30"),children:[e.jsxDEV("span",{children:B.emoji},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:266,columnNumber:17},this),e.jsxDEV("span",{className:"font-medium",children:B.count},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:267,columnNumber:17},this)]},B.emoji,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:253,columnNumber:15},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:246,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:244,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:203,columnNumber:5},this),z=e.jsxDEV("div",{className:T("flex items-center mt-1",o?"justify-end":"justify-start"),children:e.jsxDEV("span",{className:"text-[10px] text-muted-foreground/60 px-1",children:ye(new Date(E),{addSuffix:!0})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:284,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:278,columnNumber:5},this),H=e.jsxDEV(q,{children:d&&!w&&e.jsxDEV(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.1},className:T("absolute -top-8 z-10 flex items-center gap-0.5","bg-background/95 backdrop-blur-sm rounded-full px-1 py-0.5 shadow-md border",o?"right-0":"left-0"),children:[e.jsxDEV(O,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-muted rounded-full",onClick:U,title:"Reply to message",children:e.jsxDEV(en,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:311,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:304,columnNumber:11},this),o&&e.jsxDEV(O,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 hover:bg-destructive/10 hover:text-destructive rounded-full",onClick:k,title:"Delete message",children:e.jsxDEV(ge,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:321,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:314,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:293,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:291,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:T("group flex gap-2 py-1 px-4 md:px-6",o?"flex-row-reverse":"flex-row",w&&"opacity-50"),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[!o&&e.jsxDEV(F,{className:"h-8 w-8 flex-shrink-0 mt-auto mb-1",children:[e.jsxDEV($,{src:b,alt:g},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:343,columnNumber:13},this),e.jsxDEV(P,{className:"text-xs bg-muted font-medium",children:((ve=g==null?void 0:g.charAt(0))==null?void 0:ve.toUpperCase())||"?"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:344,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:342,columnNumber:11},this),e.jsxDEV("div",{className:T("flex flex-col flex-1 min-w-0 max-w-[75%]",o?"items-end":"items-start"),children:[v,e.jsxDEV("div",{className:"relative",children:[H,S]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:359,columnNumber:11},this),z]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:351,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:331,columnNumber:7},this),e.jsxDEV(_s,{open:h,onOpenChange:x,children:e.jsxDEV(Rs,{children:[e.jsxDEV(Is,{children:[e.jsxDEV(Fs,{children:"Delete Message"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:371,columnNumber:13},this),e.jsxDEV($s,{children:"Are you sure you want to delete this message? This action cannot be undone."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:372,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:370,columnNumber:11},this),e.jsxDEV(Ps,{children:[e.jsxDEV(Os,{children:"Cancel"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:378,columnNumber:13},this),e.jsxDEV(zs,{onClick:L,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:379,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:377,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:369,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:368,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-item.tsx",lineNumber:330,columnNumber:5},this)}const On=i.memo(Pn),zn={initial:{y:0,opacity:.4},animate:s=>({y:[-1,1,-1],opacity:[.4,.8,.4],transition:{y:{duration:.6,repeat:1/0,ease:"easeInOut",delay:s*.12},opacity:{duration:.6,repeat:1/0,ease:"easeInOut",delay:s*.12}}})};function Gn({threadId:s}){const{data:t}=me(),n=t==null?void 0:t.user,{typingUsers:l}=is(s),a=l.filter(u=>u.userId!==(n==null?void 0:n.id)),m=()=>a.length===1?`${a[0].userName} is typing`:a.length===2?`${a[0].userName} and ${a[1].userName} are typing`:`${a[0].userName} and ${a.length-1} others are typing`;return e.jsxDEV(q,{children:a.length>0&&e.jsxDEV(M.div,{initial:{opacity:0,y:8,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:8,height:0},transition:{duration:.2,ease:[.4,0,.2,1]},className:"px-4 py-2.5 overflow-hidden",children:e.jsxDEV("div",{className:"flex items-center gap-2.5",children:[e.jsxDEV("div",{className:"flex gap-0.5 items-center h-4",children:[0,1,2].map(u=>e.jsxDEV(M.div,{custom:u,variants:zn,initial:"initial",animate:"animate",className:"w-1.5 h-1.5 bg-muted-foreground/60 rounded-full"},u,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:65,columnNumber:17},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:63,columnNumber:13},this),e.jsxDEV(M.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm text-muted-foreground/70",children:m()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:75,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:61,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:54,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/typing-indicator.tsx",lineNumber:52,columnNumber:5},this)}const Bn=()=>e.jsxDEV("div",{className:"flex gap-3 px-4 py-2",children:[e.jsxDEV(se,{className:"h-8 w-8 rounded-full flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:39,columnNumber:5},void 0),e.jsxDEV("div",{className:"flex-1 space-y-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(se,{className:"h-3 w-16"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:42,columnNumber:9},void 0),e.jsxDEV(se,{className:"h-3 w-20"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:43,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:41,columnNumber:7},void 0),e.jsxDEV(se,{className:"h-4 w-48"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:45,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:40,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:38,columnNumber:3},void 0),Hn=({date:s})=>{const t=new Date(s),n=()=>mn(t)?"Today":rn(t)?"Yesterday":be(t,"MMMM d, yyyy");return e.jsxDEV("div",{className:"flex items-center justify-center py-3",children:e.jsxDEV("span",{className:"px-3 py-1 rounded-full bg-muted/60 text-xs font-medium text-muted-foreground",children:n()},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:61,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:60,columnNumber:5},void 0)};function qn({messages:s=[],participants:t=[],loading:n=!1,threadId:l,onReply:a,onDelete:m}){const u=i.useRef(null),[h,x]=i.useState(!0),[f,D]=i.useState(!1),d=s.reduce((N,r)=>{const g=be(new Date(r.createdAt),"yyyy-MM-dd");return N[g]||(N[g]=[]),N[g].push(r),N},{});i.useEffect(()=>{if(h&&u.current){const N=u.current.querySelector("[data-radix-scroll-area-viewport]");N&&(N.scrollTop=N.scrollHeight)}},[s,h]);const c=N=>{const{scrollTop:r,scrollHeight:g,clientHeight:b}=N.currentTarget,p=g-r-b<100;x(p),D(!p&&s.length>10)},o=()=>{if(u.current){const N=u.current.querySelector("[data-radix-scroll-area-viewport]");N&&N.scrollTo({top:N.scrollHeight,behavior:"smooth"})}};return n&&s.length===0?e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV("div",{className:"space-y-4 p-4",children:Array.from({length:5}).map((N,r)=>e.jsxDEV(Bn,{},r,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:123,columnNumber:13},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:121,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:120,columnNumber:7},this):s.length===0?e.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:e.jsxDEV(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},className:"text-center",children:[e.jsxDEV("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(le,{className:"w-8 h-8 text-muted-foreground/50"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:140,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:139,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-medium text-foreground/80 mb-2",children:"Start a conversation"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:142,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto",children:"Send a message to begin chatting"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:145,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:133,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:132,columnNumber:7},this):e.jsxDEV("div",{className:"flex-1 relative overflow-hidden bg-background",children:[e.jsxDEV(de,{ref:u,className:"h-full",onScrollCapture:c,children:e.jsxDEV("div",{className:"min-h-full flex flex-col justify-end py-2",children:[Object.entries(d).map(([N,r])=>e.jsxDEV("div",{children:[e.jsxDEV(Hn,{date:r[0].createdAt},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:163,columnNumber:15},this),e.jsxDEV(q,{mode:"popLayout",children:r.map((g,b)=>e.jsxDEV(M.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.25,delay:b<3?b*.05:0,ease:[.4,0,.2,1]},layout:!0,children:e.jsxDEV(On,{message:g,participants:t,onReply:a,onDelete:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:178,columnNumber:21},this)},g.id,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:166,columnNumber:19},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:164,columnNumber:15},this)]},N,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:162,columnNumber:13},this)),e.jsxDEV(Gn,{threadId:l},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:191,columnNumber:11},this),e.jsxDEV(q,{children:n&&e.jsxDEV(M.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"flex items-center justify-center py-4",children:[e.jsxDEV(Xe,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:"Sending..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:204,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:196,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:194,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:160,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:155,columnNumber:7},this),e.jsxDEV(q,{children:f&&e.jsxDEV(M.button,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},transition:{duration:.2,ease:"easeOut"},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"absolute bottom-4 right-4 bg-primary text-primary-foreground rounded-full p-2.5 shadow-lg hover:bg-primary/90 transition-colors","aria-label":"Scroll to bottom",children:e.jsxDEV("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:231,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:225,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:214,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:212,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-list.tsx",lineNumber:154,columnNumber:5},this)}const Wn=i.lazy(()=>ps(()=>import("./emoji-picker-react.esm-CwidmqYY.js"),__vite__mapDeps([0,1,2]))),Z=new Map;function Kn({selectedConversationId:s,disabled:t=!1,onSendMessage:n,replyingTo:l,onCancelReply:a}){var R;const[m,u]=i.useState(""),[h,x]=i.useState(!1),[f,D]=i.useState(!1),[d,c]=i.useState(!1),[o,N]=i.useState(typeof window<"u"?window.innerWidth:400),r=i.useRef(null),g=i.useRef(void 0),b=i.useRef(void 0),{setTyping:p}=is(s);i.useEffect(()=>{const y=()=>N(window.innerWidth);return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]);const E=Math.min(350,o-32);i.useEffect(()=>{const y=b.current;if(y&&y!==s&&(m.trim()?Z.set(y,m):Z.delete(y)),s&&s!==y){const C=Z.get(s)||"";u(C),setTimeout(()=>{r.current&&(r.current.style.height="auto",r.current.style.height=`${Math.min(r.current.scrollHeight,120)}px`)},0)}b.current=s},[s]),i.useEffect(()=>{s&&m.trim()?Z.set(s,m):s&&!m.trim()&&Z.delete(s)},[m,s]),i.useEffect(()=>{l&&r.current&&r.current.focus()},[l]);const w=i.useCallback(async()=>{if(!m.trim()||!n||h)return;const y=m.trim();u(""),x(!0),p(!1),s&&Z.delete(s);try{await n(y),setTimeout(()=>{var C;(C=r.current)==null||C.focus()},0)}catch(C){console.error("Failed to send message:",C),u(y),s&&Z.set(s,y)}finally{x(!1)}},[m,n,h,p,s]),j=i.useCallback(y=>{const C=y.metaKey||y.ctrlKey;if(C&&(y.key==="a"||y.key==="A")){y.stopPropagation();const v=y.currentTarget;v.setSelectionRange(0,v.value.length),y.preventDefault();return}if(C){y.stopPropagation();return}if(y.key==="Enter"&&!y.shiftKey){y.preventDefault(),w();return}if(y.key==="Escape"&&l&&a){y.preventDefault(),a();return}},[w,l,a]),A=i.useCallback(()=>{const y=r.current;y&&(y.style.height="auto",y.style.height=`${Math.min(y.scrollHeight,120)}px`)},[]),U=i.useCallback(y=>{const C=y.target.value;u(C),A(),C.trim()&&s?(p(!0),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{p(!1)},1e3)):p(!1)},[A,s,p]),k=i.useCallback(y=>{const C=y.emoji,v=r.current;if(v){const S=v.selectionStart,z=v.selectionEnd,H=m.slice(0,S)+C+m.slice(z);u(H),setTimeout(()=>{v.focus(),v.setSelectionRange(S+C.length,S+C.length)},0)}else u(S=>S+C);D(!1),A()},[m,A]);i.useEffect(()=>()=>{g.current&&clearTimeout(g.current),p(!1)},[s,p]);const L=t||!s||h,V=()=>{var y;return e.jsxDEV(q,{children:l&&e.jsxDEV(M.div,{initial:{opacity:0,y:20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:20,height:0},transition:{duration:.25,ease:[.4,0,.2,1]},className:"border-t bg-muted/20 px-4 py-3 overflow-hidden",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(M.div,{initial:{scaleY:0},animate:{scaleY:1},transition:{duration:.2,delay:.1},className:"w-1 bg-primary rounded-full h-12 flex-shrink-0 mt-1 origin-top"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:260,columnNumber:15},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[e.jsxDEV("p",{className:"text-xs font-medium text-primary",children:["Replying to ",((y=l.sender)==null?void 0:y.name)||"User"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:269,columnNumber:19},this),e.jsxDEV(M.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsxDEV(O,{size:"sm",variant:"ghost",onClick:a,className:"h-6 w-6 p-0 flex-shrink-0 hover:bg-muted-foreground/20 rounded-full",children:e.jsxDEV(ws,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:279,columnNumber:23},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:273,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:272,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:268,columnNumber:17},this),e.jsxDEV("div",{className:"bg-background/60 rounded-xl px-3 py-2 border border-border/50",children:e.jsxDEV("p",{className:"text-sm text-muted-foreground line-clamp-3",children:l.content||"Message"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:285,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:284,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:267,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:258,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:251,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:249,columnNumber:7},this)};return e.jsxDEV("div",{className:"bg-background",children:[V(),e.jsxDEV("div",{className:"border-t bg-background px-4 py-3",children:e.jsxDEV("div",{className:"flex items-end gap-2",children:[e.jsxDEV("div",{className:"flex-1 relative",children:[e.jsxDEV(Ds,{ref:r,value:m,onChange:U,onKeyDown:j,onFocus:()=>c(!0),onBlur:()=>c(!1),placeholder:l?`Reply to ${((R=l.sender)==null?void 0:R.name)||"message"}...`:s?"Message":"Select a conversation",className:T("min-h-[44px] max-h-[120px] py-3 px-4 pr-12","resize-none rounded-[22px]","bg-muted/50 border-0 focus:bg-muted","transition-colors focus-visible:ring-0 focus-visible:ring-offset-0"),disabled:L,rows:1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:307,columnNumber:13},this),e.jsxDEV(ze,{open:f,onOpenChange:D,children:[e.jsxDEV(Ge,{asChild:!0,children:e.jsxDEV(O,{variant:"ghost",size:"icon",className:"absolute right-2 bottom-1.5 h-8 w-8 rounded-full hover:bg-background/50",disabled:L,children:e.jsxDEV(nn,{className:"h-5 w-5 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:340,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:334,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:333,columnNumber:15},this),e.jsxDEV(Be,{className:"w-auto p-0 border-none shadow-lg",side:"top",align:"end",sideOffset:8,children:e.jsxDEV(M.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.2,ease:"easeOut"},children:e.jsxDEV(i.Suspense,{fallback:e.jsxDEV("div",{className:"w-80 h-96 flex items-center justify-center",children:"Loading..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:354,columnNumber:39},this),children:e.jsxDEV(Wn,{onEmojiClick:k,autoFocusSearch:!1,height:400,width:E,previewConfig:{showPreview:!1},skinTonesDisabled:!0,searchDisabled:!1},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:355,columnNumber:21},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:354,columnNumber:19},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:349,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:343,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:332,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:306,columnNumber:11},this),e.jsxDEV(M.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxDEV(O,{onClick:w,disabled:L||!m.trim(),size:"icon",className:T("h-11 w-11 rounded-full flex-shrink-0","bg-brand-light hover:bg-brand-light/90 text-white","disabled:opacity-40 disabled:cursor-not-allowed"),children:e.jsxDEV(bs,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:387,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:377,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:373,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:304,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:303,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-message-input.tsx",lineNumber:298,columnNumber:5},this)}function ms(s){const[t,n]=i.useState(!0),l=i.useCallback(()=>{n(!0)},[]),a=i.useCallback(()=>{n(!1)},[]),m=i.useCallback(()=>{n(u=>!u)},[]);return{value:t,onTrue:l,onFalse:a,onToggle:m,setValue:n}}const Yn=s=>s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2);function Qn({participant:s,onClose:t}){const n=te(),{data:l,isLoading:a}=ts((s==null?void 0:s.id)||""),m=(s==null?void 0:s.name)||(s==null?void 0:s.displayName)||"Unknown",u=(s==null?void 0:s.photoURL)||(s==null?void 0:s.avatarUrl),h=(s==null?void 0:s.role)||"Member",x=(s==null?void 0:s.status)||"offline",f=(s==null?void 0:s.email)||(l==null?void 0:l.email),D=l==null?void 0:l.area,d=()=>{s!=null&&s.id&&(n({to:"/players/$playerId",params:{playerId:s.id}}),t())};return e.jsxDEV("div",{className:"flex flex-col gap-4",children:[e.jsxDEV("div",{className:"flex items-start gap-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(F,{className:"h-16 w-16",children:[e.jsxDEV($,{src:u,alt:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:65,columnNumber:13},this),e.jsxDEV(P,{className:"text-lg",children:Yn(m)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:66,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:64,columnNumber:11},this),e.jsxDEV("div",{className:`absolute bottom-0 right-0 h-3.5 w-3.5 rounded-full border-2 border-background ${Y(x)}`},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:69,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:63,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsxDEV("h4",{className:"text-base font-medium truncate",children:m},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:75,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxDEV(De,{variant:"secondary",className:"text-xs capitalize",children:h},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:77,columnNumber:13},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground capitalize",children:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:76,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:74,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:62,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2 text-sm",children:[f&&e.jsxDEV("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsxDEV(as,{className:"h-3.5 w-3.5 flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:89,columnNumber:13},this),e.jsxDEV("span",{className:"truncate",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:88,columnNumber:11},this),D&&e.jsxDEV("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsxDEV(Le,{className:"h-3.5 w-3.5 flex-shrink-0"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:95,columnNumber:13},this),e.jsxDEV("span",{className:"truncate",children:D},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:96,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:94,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:86,columnNumber:7},this),e.jsxDEV(O,{variant:"outline",size:"sm",className:"w-full mt-1",onClick:d,disabled:!(s!=null&&s.id),children:[e.jsxDEV(ls,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:109,columnNumber:9},this),"View Profile"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:102,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-participant-dialog.tsx",lineNumber:60,columnNumber:5},this)}const Xn=s=>s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2),Zn=s=>{const t=s.trim().split(" ");return t.length===1?t[0].slice(0,2).toUpperCase():t.slice(0,2).map(n=>n.charAt(0)).join("").toUpperCase()};function Jn({participants:s,conversation:t}){const[n,l]=i.useState(null),a=ms(),m=i.useCallback(c=>{l(c)},[]),u=()=>l(null),h=s.length,x=s.filter(c=>c.status==="online").length,f=e.jsxDEV("div",{className:"flex flex-col items-center py-5 px-3 border-b border-border",children:[e.jsxDEV(F,{className:"h-20 w-20 mb-3",children:[e.jsxDEV($,{src:(t==null?void 0:t.photoURL)||(t==null?void 0:t.avatarUrl),alt:(t==null?void 0:t.displayName)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV(P,{className:"text-lg bg-gradient-to-br from-brand-dark to-brand-light text-white font-semibold",children:Zn((t==null?void 0:t.displayName)||(t==null?void 0:t.name)||"Group")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:79,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:74,columnNumber:7},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-center mb-1",children:(t==null?void 0:t.displayName)||(t==null?void 0:t.name)||"Group Chat"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:87,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsxDEV(oe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:93,columnNumber:9},this),e.jsxDEV("span",{children:[h," members",x>0&&e.jsxDEV("span",{className:"ml-1",children:["â€¢ ",x," online"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:97,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:92,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:72,columnNumber:5},this),D=e.jsxDEV(O,{variant:"ghost",onClick:a.onToggle,className:"flex items-center justify-between w-full h-10 px-3 text-xs font-medium text-muted-foreground bg-muted/50",children:[e.jsxDEV("span",{children:["Members (",h,")"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:110,columnNumber:7},this),a.value?e.jsxDEV(Je,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:112,columnNumber:9},this):e.jsxDEV(ue,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:114,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:105,columnNumber:5},this),d=e.jsxDEV(de,{className:"max-h-[320px]",children:e.jsxDEV("ul",{className:"divide-y divide-border",children:s.map(c=>e.jsxDEV("li",{onClick:()=>m(c),className:"flex items-center gap-3 px-3 py-2.5 cursor-pointer hover:bg-muted/50 transition-colors",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(F,{className:"h-8 w-8",children:[e.jsxDEV($,{src:c.photoURL||c.avatarUrl,alt:c.name||c.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:130,columnNumber:17},this),e.jsxDEV(P,{children:Xn(c.name||c.displayName||"User")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:134,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:129,columnNumber:15},this),e.jsxDEV("span",{className:T("absolute bottom-0 right-0 h-2.5 w-2.5 rounded-full border border-background",c.status==="online"?"bg-green-500":c.status==="offline"?"bg-gray-400":"bg-yellow-500")},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:139,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:128,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-sm font-medium truncate",children:c.name||c.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:153,columnNumber:17},this),c.isCurrentUser&&e.jsxDEV("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-1.5 py-0.5 rounded-full",children:"You"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:157,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:152,columnNumber:15},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground truncate",children:c.role||"Member"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:162,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:151,columnNumber:13},this)]},c.id,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:123,columnNumber:11},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:121,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:120,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[f,D,e.jsxDEV("div",{className:T("transition-all overflow-hidden",a.value?"max-h-[320px]":"max-h-0"),children:a.value&&d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:177,columnNumber:7},this),n&&e.jsxDEV(He,{open:!!n,onOpenChange:u,children:e.jsxDEV(qe,{className:"max-w-sm",children:[e.jsxDEV(We,{children:e.jsxDEV(Ke,{className:"sr-only",children:n.name||n.displayName},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:190,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:189,columnNumber:13},this),e.jsxDEV(Qn,{participant:n,onClose:u},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:194,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:188,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:187,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-group.tsx",lineNumber:173,columnNumber:5},this)}const et=s=>s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2);function st({participant:s,conversation:t}){const n=ms(),l=te(),{data:a,isLoading:m}=ts((s==null?void 0:s.id)||""),u=(s==null?void 0:s.name)||(s==null?void 0:s.displayName)||"Unknown User",h=(s==null?void 0:s.photoURL)||"unknown",x=(s==null?void 0:s.role)||"User",f=(s==null?void 0:s.email)||(a==null?void 0:a.email)||"No email provided",D=(s==null?void 0:s.status)||"offline",d=(a==null?void 0:a.sports)||[],c=a==null?void 0:a.area,o=a==null?void 0:a.lastLoginDate,N=()=>{s!=null&&s.id&&l({to:"/players/$playerId",params:{playerId:s.id}})},r=e.jsxDEV("div",{className:"flex flex-col items-center py-5 px-3 border-b border-border",children:[e.jsxDEV("div",{className:"relative mb-3",children:[e.jsxDEV(F,{className:"h-20 w-20",children:[e.jsxDEV($,{src:h,alt:u},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:53,columnNumber:11},this),e.jsxDEV(P,{className:"text-lg",children:et(u)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:54,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:52,columnNumber:9},this),e.jsxDEV("div",{className:T("absolute bottom-1 right-1 h-4 w-4 rounded-full border-2 border-background",Y(D))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:59,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:51,columnNumber:7},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-center mb-1",children:u},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:65,columnNumber:7},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-1 capitalize",children:D},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:66,columnNumber:7},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:67,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:50,columnNumber:5},this),g=e.jsxDEV(O,{variant:"ghost",onClick:n.onToggle,className:"flex items-center justify-between w-full h-10 px-3 text-xs font-medium text-muted-foreground bg-muted/50",children:[e.jsxDEV("span",{children:"Information"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:77,columnNumber:7},this),n.value?e.jsxDEV(Je,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:79,columnNumber:9},this):e.jsxDEV(ue,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:81,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:72,columnNumber:5},this),b=e.jsxDEV("div",{className:T("overflow-hidden transition-all duration-200",n.value?"max-h-[500px]":"max-h-0"),children:e.jsxDEV("div",{className:"flex flex-col px-3 py-2.5 space-y-3 text-sm",children:[e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(qs,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:96,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Role"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:98,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm",children:x},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:99,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:97,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:95,columnNumber:9},this),d.length>0&&e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(Bs,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:106,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col gap-1.5",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Sports"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:108,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-wrap gap-1",children:d.map(p=>e.jsxDEV(De,{variant:"secondary",className:"text-xs capitalize",children:p},p,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:111,columnNumber:19},this))},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:109,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:107,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:105,columnNumber:11},this),c&&e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(Le,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:123,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Location"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:125,columnNumber:15},this),e.jsxDEV("span",{className:"text-sm",children:c},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:126,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:124,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(as,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:133,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col min-w-0",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Email"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:135,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm truncate",children:f},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:136,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:134,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:132,columnNumber:9},this),o&&e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(Ze,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground mt-0.5"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:143,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Last Active"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:145,columnNumber:15},this),e.jsxDEV("span",{className:"text-sm",children:new Date(o).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:146,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:144,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:142,columnNumber:11},this),e.jsxDEV(O,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:N,disabled:!(s!=null&&s.id),children:[e.jsxDEV(ls,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:165,columnNumber:11},this),"View Profile"]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:158,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:93,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:87,columnNumber:5},this);return e.jsxDEV("div",{children:[r,g,b]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-room-single.tsx",lineNumber:173,columnNumber:5},this)}function nt({open:s,onOpenChange:t,conversation:n,participants:l}){if(!n)return null;const a=n.type==="group";return e.jsxDEV(ss,{open:s,onOpenChange:t,children:e.jsxDEV(ns,{side:"right",className:"w-[380px] p-0 overflow-y-auto",children:[e.jsxDEV(Ms,{className:"sr-only",children:e.jsxDEV(Ts,{children:a?"Group Details":"Contact Details"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:28,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:27,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col h-full",children:a?e.jsxDEV(Jn,{participants:l,conversation:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:35,columnNumber:13},this):e.jsxDEV(st,{participant:l.find(m=>!m.isCurrentUser),conversation:n},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:40,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:33,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:26,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/components/chat/chat-details-sheet.tsx",lineNumber:25,columnNumber:5},this)}function Lt(){const s=te(),{id:t}=Ls({from:"/_authenticated/chat/"}),{data:n}=me(),l=n==null?void 0:n.user,[a,m]=i.useState(null),[u,h]=i.useState(!1),{threads:x,loading:f,error:D,refetch:d,updateThreadLastMessage:c}=An(l==null?void 0:l.id),{messages:o,loading:N,sendMessage:r,deleteMessage:g,error:b}=En(t||void 0);i.useEffect(()=>{D&&(console.error("Threads error:",D),I.error("Failed to load conversations")),b&&(console.error("Messages error:",b),I.error("Failed to load messages"))},[D,b]),i.useEffect(()=>{m(null)},[t]);const p=x.map(v=>{var K;const S=v.isGroup?v.name||"Unnamed Group":v.members.filter(_=>_.userId!==(l==null?void 0:l.id)).map(_=>_.user.name).join(", ")||"Unknown",z=v.isGroup?v.avatarUrl:(K=v.members.find(_=>_.userId!==(l==null?void 0:l.id)))==null?void 0:K.user.image,H=v.members.map(_=>({id:_.userId,name:_.user.name,username:_.user.username,email:_.user.email,phoneNumber:_.user.phoneNumber,image:_.user.image,displayName:_.user.name,photoURL:_.user.image,status:"online",role:_.role,isCurrentUser:_.userId===(l==null?void 0:l.id)})),W=v.messages.length>0?{content:v.messages[0].content,createdAt:v.messages[0].createdAt,sender:{name:v.messages[0].sender.name}}:null;return{id:v.id,type:v.isGroup?"group":"direct",displayName:S,name:v.name,photoURL:z,avatarUrl:v.avatarUrl,isGroup:v.isGroup,participants:H,messages:[],lastMessage:W,unreadCount:0}}),E=t?p.find(v=>v.id===t):null,w=(E==null?void 0:E.participants)||[];i.useEffect(()=>{h(!1)},[t]);const j=i.useCallback(()=>{h(!0)},[]),A=i.useCallback(v=>{m(v)},[]),U=i.useCallback(()=>{m(null)},[]),k=i.useCallback(async v=>{if(!g){I.error("Delete functionality not available");return}try{await g(v),I.success("Message deleted successfully")}catch(S){console.error("Failed to delete message:",S)}},[g]),L=i.useCallback(async v=>{if(!(l!=null&&l.id)||!t){I.error("Unable to send message. Please select a conversation.");return}try{const S=await r(v,l.id,a==null?void 0:a.id);m(null),S&&c(t,S)}catch(S){console.error("Failed to send message:",S),I.error("Failed to send message. Please try again.")}},[r,l==null?void 0:l.id,t,a,c]),V=i.useCallback(v=>{s({to:"/chat",search:{id:v}})},[s]);if(f&&x.length===0)return e.jsxDEV("div",{className:"absolute inset-0 flex flex-col",children:[e.jsxDEV(Ce,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:147,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:e.jsxDEV(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-brand-light to-brand-dark flex items-center justify-center",children:e.jsxDEV(le,{className:"w-8 h-8 text-white"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:158,columnNumber:17},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:157,columnNumber:15},this),e.jsxDEV(M.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute -inset-2 border-2 border-brand-light/30 border-t-brand-light rounded-full"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:160,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:156,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground font-medium",children:"Loading conversations..."},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:168,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:149,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:148,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:146,columnNumber:12},this);const R=()=>e.jsxDEV(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.32,.72,0,1]},className:"flex-1 flex items-center justify-center px-8",children:e.jsxDEV("div",{className:"text-center max-w-sm",children:[e.jsxDEV("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(le,{className:"w-10 h-10 text-muted-foreground/40"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:187,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:186,columnNumber:9},this),e.jsxDEV("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"No conversation selected"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:189,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Choose a chat from the sidebar to start messaging"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:192,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:185,columnNumber:7},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:175,columnNumber:34},this),y=()=>e.jsxDEV("div",{className:"flex items-center px-4 py-3 min-h-[68px] border-b bg-background sticky top-0 z-10",children:t&&E?e.jsxDEV(_n,{participants:w,conversation:E,onDetailsClick:j},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:198,columnNumber:56},this):e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsxDEV(le,{className:"w-5 h-5 text-muted-foreground"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:200,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:199,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-[15px] font-semibold",children:"Messages"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:203,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:[p.length," conversation",p.length!==1?"s":""]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:204,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:202,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:198,columnNumber:177},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:197,columnNumber:30},this),C=()=>!t||!E?R():e.jsxDEV("div",{className:"flex flex-col w-full h-full overflow-hidden",children:[e.jsxDEV(qn,{messages:o,participants:w,loading:N,threadId:t,onReply:A,onDelete:k},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:215,columnNumber:9},this),e.jsxDEV(Kn,{selectedConversationId:t,disabled:!t||N,onSendMessage:L,replyingTo:a,onCancelReply:U},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:217,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:214,columnNumber:12},this);return e.jsxDEV("div",{className:"absolute inset-0 flex flex-col",children:[e.jsxDEV(Ce,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:221,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 flex min-h-0",children:[e.jsxDEV("div",{className:"w-[340px] flex-shrink-0 border-r border-border/40 bg-background overflow-y-auto",children:e.jsxDEV(Tn,{conversations:p,loading:f,selectedConversationId:t,user:l,onConversationSelect:V,onThreadCreated:d},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:224,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:223,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 flex flex-col min-w-0 min-h-0 bg-background",children:e.jsxDEV(q,{mode:"wait",children:e.jsxDEV(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:[.32,.72,0,1]},className:"flex-1 flex flex-col min-h-0",children:[y(),C()]},t||"empty",!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:229,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:228,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:227,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:222,columnNumber:7},this),e.jsxDEV(nt,{open:u,onOpenChange:h,conversation:E,participants:w},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:249,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/chat/index.tsx?tsr-split=component",lineNumber:220,columnNumber:10},this)}export{Lt as component};
