const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/seasons-data-table-xQNOeB3O.js","assets/index-24J_mi6z.js","assets/index-C17izGZI.css","assets/animation-variants-Don9j8OV.js","assets/alert-dialog-DJTE609o.js","assets/table-Cbfa69eZ.js","assets/use-notifications-BUTLONJF.js","assets/skeleton-CFwBW98J.js","assets/sports-DpLFZJRK.js","assets/dropdown-menu-ziHghIVr.js","assets/index-FxfVfo46.js","assets/IconDotsVertical-C7s4Z6YM.js","assets/IconEye-DjBkodmw.js","assets/site-header-BtYyQ2Bz.js","assets/IconEdit-BHLQ4c-E.js","assets/IconCopy-DuoNlpeX.js","assets/constants-D_wQXR5Q.js","assets/IconHash-D8XXSvsY.js","assets/IconChevronRight-CBIHPz2o.js","assets/IconCurrencyDollar-DOxVM7qy.js","assets/IconClock-CDbDEWzc.js","assets/season-edit-modal-B7cL3Y5v.js","assets/eye-BEFr_6AA.js","assets/arrow-left-BbiTpBMJ.js","assets/IconDownload-DvOtba7Q.js","assets/IconChevronLeft-BhQWrNbX.js"])))=>i.map(i=>d[i]);
import{E,ab as d,u as _,k as S,l as V,j as s,ac as j,a4 as U,r as y,ad as C}from"./index-24J_mi6z.js";import{S as R,c as I}from"./site-header-BtYyQ2Bz.js";import{P as k}from"./page-header-_LkHZJbM.js";import{S as u}from"./stats-card-B97t__Ls.js";import{s as M}from"./season-schema-Bd77ll7A.js";import{z as N}from"./external-BAFtC5Wh.js";import{A as P,a as p,d as F}from"./animated-container-a84_MVGY.js";import{I as T}from"./IconStar-BFBGx0KU.js";import"./use-notifications-BUTLONJF.js";import"./skeleton-CFwBW98J.js";import"./coerce-D4J0VXwb.js";import"./animation-variants-Don9j8OV.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M12 12m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M4 4l3 3",key:"svg-1"}],["path",{d:"M20 4l-3 3",key:"svg-2"}],["path",{d:"M4 20l3 -3",key:"svg-3"}],["path",{d:"M20 20l-3 -3",key:"svg-4"}]],z=E("outline","currency","Currency",$),H=y.lazy(()=>C(()=>import("./seasons-data-table-xQNOeB3O.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25])).then(g=>({default:g.SeasonsDataTable})));function se(){const[g,x]=d.useState([]),[r,h]=d.useState(!0),[c,n]=d.useState(null),b=_(),o=d.useCallback(async()=>{var t,a;h(!0),n(null);try{const e=await S.get(V.season.getAll);let i=[];if(Array.isArray(e.data)?i=e.data:(t=e.data)!=null&&t.data&&Array.isArray(e.data.data)?i=e.data.data:(a=e.data)!=null&&a.seasons&&Array.isArray(e.data.seasons)&&(i=e.data.seasons),!i||i.length===0){x([]);return}const m=N.array(M).parse(i);x(m),n(null)}catch(e){console.error("Failed to fetch seasons:",e),e instanceof N.ZodError?(n("Invalid data format"),console.error("Validation errors:",e.issues)):e instanceof Error?e.message.includes("Network Error")?n("Network error"):e.message.includes("timeout")?n("Request timeout"):e.message.includes("401")||e.message.includes("403")?n("Access denied"):n("Failed to load"):n("Unexpected error"),x([])}finally{h(!1)}},[]);d.useEffect(()=>{o()},[o]);const v=t=>{b({to:"/seasons/$seasonId",params:{seasonId:t}})},l=g,f=l.length,w=l.filter(t=>t.status==="ACTIVE").length,D=l.reduce((t,a)=>{var e;return t+(((e=a.memberships)==null?void 0:e.length)||0)},0),L=l.reduce((t,a)=>{var m;const e=parseFloat((a==null?void 0:a.entryFee)||"0")||0,i=((m=a.memberships)==null?void 0:m.length)||0;return t+e*i},0),A=f>0?Math.round(D/f):0;return s.jsxDEV(s.Fragment,{children:[s.jsxDEV(R,{},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:86,columnNumber:7},this),s.jsxDEV("div",{className:"flex flex-1 flex-col",children:s.jsxDEV("div",{className:"@container/main flex flex-1 flex-col gap-2",children:[s.jsxDEV(k,{icon:I,title:"Seasons Management",description:"Manage league seasons and tournaments",children:s.jsxDEV(P,{className:"grid gap-4 grid-cols-2 md:grid-cols-4",children:[s.jsxDEV(p,{children:s.jsxDEV(u,{title:"Total Seasons",value:f,description:`${w} currently active`,icon:j,iconColor:"text-primary",loading:r,error:c,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:92,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:91,columnNumber:13},this),s.jsxDEV(p,{children:s.jsxDEV(u,{title:"Total Participants",value:D,description:"Across all seasons",icon:U,iconColor:"text-blue-500",loading:r,error:c,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:95,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:94,columnNumber:13},this),s.jsxDEV(p,{children:s.jsxDEV(u,{title:"Total Revenue",value:`RM ${L.toLocaleString("en-MY",{minimumFractionDigits:2,maximumFractionDigits:2})}`,description:"From all season entry fees",icon:z,iconColor:"text-green-500",loading:r,error:c,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:98,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:97,columnNumber:13},this),s.jsxDEV(p,{children:s.jsxDEV(u,{title:"Average per Season",value:A,description:"Players per season",icon:T,iconColor:"text-yellow-500",loading:r,error:c,onRetry:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:104,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:103,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:90,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:89,columnNumber:11},this),s.jsxDEV(F,{delay:.2,children:s.jsxDEV("div",{className:"flex-1 px-4 lg:px-6 pb-6",children:s.jsxDEV(y.Suspense,{fallback:s.jsxDEV("div",{className:"h-96 animate-pulse bg-muted rounded-lg"},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:111,columnNumber:33},this),children:s.jsxDEV(H,{data:l,isLoading:r,onViewSeason:v,onRefresh:o},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:112,columnNumber:15},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:111,columnNumber:13},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:110,columnNumber:11},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:109,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:88,columnNumber:9},this)},void 0,!1,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:87,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/willywong/DeuceLeague/DL Admin/dl-admin/src/routes/_authenticated/seasons/index.tsx?tsr-split=component",lineNumber:85,columnNumber:10},this)}export{se as component};
